import{$ as j,$a as Ru,$b as fs,A as ll,Aa as Cu,Ab as Ui,Ac as ri,B as Ri,Ba as Ut,Bb as ss,Bc as th,C as pt,Ca as kr,Cb as p,Cc as nh,D as Ai,Da as ml,Db as z,Dc as U,E as En,Ea as Pi,Eb as P,Ec as ih,F as cl,Fa as Fi,Fb as as,Fc as bl,G as bt,Ga as wu,Gb as ye,Gc as gs,H as du,Ha as Su,Hb as be,Hc as rh,I as uu,Ia as Eu,Ib as _e,Ic as vs,J as Zn,Ja as Mu,Jb as Ct,K as Mn,Ka as ku,Kb as V,L as dl,La as Iu,Lb as Fe,M as hu,Ma as Tu,Mb as rt,N as pu,Na as ti,Nb as ls,O as fu,Oa as qt,Ob as te,Oc as oh,P as mu,Pa as Ke,Pb as ie,Pc as Fr,Q as Ae,Qa as Du,Qb as ju,Qc as ys,R as es,Ra as Ir,Rb as vl,S as De,Sa as Tr,Sb as cs,T as ce,Ta as g,Tb as zu,U as kn,Ua as C,Ub as ds,V as Nt,Va as ns,Vb as us,Vc as sh,W as L,Wa as Nu,Wb as yl,Wc as bs,X as He,Xa as Vi,Xb as hs,Y as gu,Ya as cn,Yb as Or,Yc as ah,Z as Q,Za as Dr,Zb as ps,_ as ul,_a as Ou,_b as dn,a as k,aa as R,ab as Li,ac as Bu,b as H,ba as hl,bb as xt,bc as Uu,bd as lh,c as H0,ca as vu,cb as is,cc as Rr,d as tt,da as Er,db as Au,dc as qu,e as Jo,ea as A,eb as gl,ec as $u,f as su,fa as Ge,fb as M,fc as Hu,g as au,ga as Ce,gb as ji,gc as ni,h as rl,ha as yu,hb as _,hc as qi,i as ol,ia as an,ib as Pu,ic as un,j as sl,ja as pl,jb as $t,jc as Gu,k as Be,ka as bu,kb as Vt,kc as Wu,l as Dt,la as ei,lb as u,lc as ii,m as Sn,ma as Ot,mb as d,mc as Ku,n as Te,na as Bt,nb as y,nc as Ju,o as F,oa as D,ob as nt,oc as Ne,p as Yn,pa as N,pb as it,pc as Qu,q as Qo,qa as ln,qb as Fu,qc as Ar,r as lu,ra as _u,rb as q,rc as Xu,s as G,sa as In,sb as E,sc as Yu,t as Xo,ta as Mr,tb as x,tc as Pr,u as yt,ua as We,ub as Vu,uc as ms,v as al,va as Pe,vb as Lu,vc as ot,w as Yo,wa as fl,wb as zi,wc as Se,x as Oi,xa as _t,xb as rs,xc as W,y as cu,ya as xu,yb as Nr,yc as Zu,z as Zo,za as ts,zb as Bi,zc as eh}from"./chunk-MX2XTEPJ.js";var et=H0((a0,Qa)=>{(function(i,e){typeof Qa=="object"&&Qa.exports?Qa.exports=e():i.Toastify=e()})(a0,function(i){var e=function(o){return new e.lib.init(o)},n="1.12.0";e.defaults={oldestFirst:!0,text:"Toastify is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"toastify-top",positionLeft:!1,position:"",backgroundColor:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""}},e.lib=e.prototype={toastify:n,constructor:e,init:function(o){return o||(o={}),this.options={},this.toastElement=null,this.options.text=o.text||e.defaults.text,this.options.node=o.node||e.defaults.node,this.options.duration=o.duration===0?0:o.duration||e.defaults.duration,this.options.selector=o.selector||e.defaults.selector,this.options.callback=o.callback||e.defaults.callback,this.options.destination=o.destination||e.defaults.destination,this.options.newWindow=o.newWindow||e.defaults.newWindow,this.options.close=o.close||e.defaults.close,this.options.gravity=o.gravity==="bottom"?"toastify-bottom":e.defaults.gravity,this.options.positionLeft=o.positionLeft||e.defaults.positionLeft,this.options.position=o.position||e.defaults.position,this.options.backgroundColor=o.backgroundColor||e.defaults.backgroundColor,this.options.avatar=o.avatar||e.defaults.avatar,this.options.className=o.className||e.defaults.className,this.options.stopOnFocus=o.stopOnFocus===void 0?e.defaults.stopOnFocus:o.stopOnFocus,this.options.onClick=o.onClick||e.defaults.onClick,this.options.offset=o.offset||e.defaults.offset,this.options.escapeMarkup=o.escapeMarkup!==void 0?o.escapeMarkup:e.defaults.escapeMarkup,this.options.ariaLive=o.ariaLive||e.defaults.ariaLive,this.options.style=o.style||e.defaults.style,o.backgroundColor&&(this.options.style.background=o.backgroundColor),this},buildToast:function(){if(!this.options)throw"Toastify is not initialized";var o=document.createElement("div");o.className="toastify on "+this.options.className,this.options.position?o.className+=" toastify-"+this.options.position:this.options.positionLeft===!0?(o.className+=" toastify-left",console.warn("Property `positionLeft` will be depreciated in further versions. Please use `position` instead.")):o.className+=" toastify-right",o.className+=" "+this.options.gravity,this.options.backgroundColor&&console.warn('DEPRECATION NOTICE: "backgroundColor" is being deprecated. Please use the "style.background" property.');for(var s in this.options.style)o.style[s]=this.options.style[s];if(this.options.ariaLive&&o.setAttribute("aria-live",this.options.ariaLive),this.options.node&&this.options.node.nodeType===Node.ELEMENT_NODE)o.appendChild(this.options.node);else if(this.options.escapeMarkup?o.innerText=this.options.text:o.innerHTML=this.options.text,this.options.avatar!==""){var a=document.createElement("img");a.src=this.options.avatar,a.className="toastify-avatar",this.options.position=="left"||this.options.positionLeft===!0?o.appendChild(a):o.insertAdjacentElement("afterbegin",a)}if(this.options.close===!0){var l=document.createElement("button");l.type="button",l.setAttribute("aria-label","Close"),l.className="toast-close",l.innerHTML="&#10006;",l.addEventListener("click",(function(w){w.stopPropagation(),this.removeElement(this.toastElement),window.clearTimeout(this.toastElement.timeOutValue)}).bind(this));var c=window.innerWidth>0?window.innerWidth:screen.width;(this.options.position=="left"||this.options.positionLeft===!0)&&c>360?o.insertAdjacentElement("afterbegin",l):o.appendChild(l)}if(this.options.stopOnFocus&&this.options.duration>0){var h=this;o.addEventListener("mouseover",function(w){window.clearTimeout(o.timeOutValue)}),o.addEventListener("mouseleave",function(){o.timeOutValue=window.setTimeout(function(){h.removeElement(o)},h.options.duration)})}if(typeof this.options.destination<"u"&&o.addEventListener("click",(function(w){w.stopPropagation(),this.options.newWindow===!0?window.open(this.options.destination,"_blank"):window.location=this.options.destination}).bind(this)),typeof this.options.onClick=="function"&&typeof this.options.destination>"u"&&o.addEventListener("click",(function(w){w.stopPropagation(),this.options.onClick()}).bind(this)),typeof this.options.offset=="object"){var f=t("x",this.options),m=t("y",this.options),b=this.options.position=="left"?f:"-"+f,v=this.options.gravity=="toastify-top"?m:"-"+m;o.style.transform="translate("+b+","+v+")"}return o},showToast:function(){this.toastElement=this.buildToast();var o;if(typeof this.options.selector=="string"?o=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||typeof ShadowRoot<"u"&&this.options.selector instanceof ShadowRoot?o=this.options.selector:o=document.body,!o)throw"Root element is not defined";var s=e.defaults.oldestFirst?o.firstChild:o.lastChild;return o.insertBefore(this.toastElement,s),e.reposition(),this.options.duration>0&&(this.toastElement.timeOutValue=window.setTimeout((function(){this.removeElement(this.toastElement)}).bind(this),this.options.duration)),this},hideToast:function(){this.toastElement.timeOutValue&&clearTimeout(this.toastElement.timeOutValue),this.removeElement(this.toastElement)},removeElement:function(o){o.className=o.className.replace(" on",""),window.setTimeout((function(){this.options.node&&this.options.node.parentNode&&this.options.node.parentNode.removeChild(this.options.node),o.parentNode&&o.parentNode.removeChild(o),this.options.callback.call(o),e.reposition()}).bind(this),400)}},e.reposition=function(){for(var o={top:15,bottom:15},s={top:15,bottom:15},a={top:15,bottom:15},l=document.getElementsByClassName("toastify"),c,h=0;h<l.length;h++){r(l[h],"toastify-top")===!0?c="toastify-top":c="toastify-bottom";var f=l[h].offsetHeight;c=c.substr(9,c.length-1);var m=15,b=window.innerWidth>0?window.innerWidth:screen.width;b<=360?(l[h].style[c]=a[c]+"px",a[c]+=f+m):r(l[h],"toastify-left")===!0?(l[h].style[c]=o[c]+"px",o[c]+=f+m):(l[h].style[c]=s[c]+"px",s[c]+=f+m)}return this};function t(o,s){return s.offset[o]?isNaN(s.offset[o])?s.offset[o]:s.offset[o]+"px":"0px"}function r(o,s){return!o||typeof s!="string"?!1:!!(o.className&&o.className.trim().split(/\s+/gi).indexOf(s)>-1)}return e.lib.init.prototype=e.lib,e})});var Lr=class{},xs=class{},st=class i{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let t=n.indexOf(":");if(t>0){let r=n.slice(0,t),o=r.toLowerCase(),s=n.slice(t+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,t)=>{this.setHeaderEntries(t,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,t])=>{this.setHeaderEntries(n,t)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof i?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new i;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof i?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let t=e.value;if(typeof t=="string"&&(t=[t]),t.length===0)return;this.maybeSetNormalizedName(e.name,n);let r=(e.op==="a"?this.headers.get(n):void 0)||[];r.push(...t),this.headers.set(n,r);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}setHeaderEntries(e,n){let t=(Array.isArray(n)?n:[n]).map(o=>o.toString()),r=e.toLowerCase();this.headers.set(r,t),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var xl=class{encodeKey(e){return ch(e)}encodeValue(e){return ch(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function W0(i,e){let n=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,o)),e.decodeValue(r.slice(o+1))],l=n.get(s)||[];l.push(a),n.set(s,l)}),n}var K0=/%(\d[a-f0-9])/gi,J0={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function ch(i){return encodeURIComponent(i).replace(K0,(e,n)=>J0[n]??e)}function _s(i){return`${i}`}var Dn=class i{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new xl,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=W0(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let t=e.fromObject[n],r=Array.isArray(t)?t.map(_s):[_s(t)];this.map.set(n,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(t=>{let r=e[t];Array.isArray(r)?r.forEach(o=>{n.push({param:t,value:o,op:"a"})}):n.push({param:t,value:r,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(t=>n+"="+this.encoder.encodeValue(t)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new i({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(_s(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let t=this.map.get(e.param)||[],r=t.indexOf(_s(e.value));r!==-1&&t.splice(r,1),t.length>0?this.map.set(e.param,t):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Cl=class{constructor(){this.map=new Map}set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function Q0(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function dh(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function uh(i){return typeof Blob<"u"&&i instanceof Blob}function hh(i){return typeof FormData<"u"&&i instanceof FormData}function X0(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}var Vr=class i{constructor(e,n,t,r){this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let o;if(Q0(this.method)||r?(this.body=t!==void 0?t:null,o=r):o=t,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new st,this.context??=new Cl,!this.params)this.params=new Dn,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let a=n.indexOf("?"),l=a===-1?"?":a<n.length-1?"&":"";this.urlWithParams=n+l+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||dh(this.body)||uh(this.body)||hh(this.body)||X0(this.body)?this.body:this.body instanceof Dn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||hh(this.body)?null:uh(this.body)?this.body.type||null:dh(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Dn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let n=e.method||this.method,t=e.url||this.url,r=e.responseType||this.responseType,o=e.transferCache??this.transferCache,s=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,c=e.headers||this.headers,h=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(c=Object.keys(e.setHeaders).reduce((m,b)=>m.set(b,e.setHeaders[b]),c)),e.setParams&&(h=Object.keys(e.setParams).reduce((m,b)=>m.set(b,e.setParams[b]),h)),new i(n,t,s,{params:h,headers:c,context:f,reportProgress:l,responseType:r,withCredentials:a,transferCache:o})}},Nn=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}(Nn||{}),jr=class{constructor(e,n=200,t="OK"){this.headers=e.headers||new st,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||t,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}},Cs=class i extends jr{constructor(e={}){super(e),this.type=Nn.ResponseHeader}clone(e={}){return new i({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},zr=class i extends jr{constructor(e={}){super(e),this.type=Nn.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new i({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Tn=class extends jr{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},vh=200,Y0=204;function _l(i,e){return{body:e,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials,transferCache:i.transferCache}}var oi=(()=>{let e=class e{constructor(t){this.handler=t}request(t,r,o={}){let s;if(t instanceof Vr)s=t;else{let c;o.headers instanceof st?c=o.headers:c=new st(o.headers);let h;o.params&&(o.params instanceof Dn?h=o.params:h=new Dn({fromObject:o.params})),s=new Vr(t,r,o.body!==void 0?o.body:null,{headers:c,context:o.context,params:h,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache})}let a=F(s).pipe(En(c=>this.handler.handle(c)));if(t instanceof Vr||o.observe==="events")return a;let l=a.pipe(pt(c=>c instanceof zr));switch(o.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return l.pipe(G(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return l.pipe(G(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return l.pipe(G(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return l.pipe(G(c=>c.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${o.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:new Dn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,o={}){return this.request("PATCH",t,_l(o,r))}post(t,r,o={}){return this.request("POST",t,_l(o,r))}put(t,r,o={}){return this.request("PUT",t,_l(o,r))}};e.\u0275fac=function(r){return new(r||e)(j(Lr))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),Z0=/^\)\]\}',?\n/,ev="X-Request-URL";function ph(i){if(i.url)return i.url;let e=ev.toLocaleLowerCase();return i.headers.get(e)}var tv=(()=>{let e=class e{constructor(){this.fetchImpl=R(wl,{optional:!0})?.fetch??fetch.bind(globalThis),this.ngZone=R(Pe)}handle(t){return new rl(r=>{let o=new AbortController;return this.doRequest(t,o.signal,r).then(Sl,s=>r.error(new Tn({error:s}))),()=>o.abort()})}doRequest(t,r,o){return Jo(this,null,function*(){let s=this.createRequestInit(t),a;try{let v=this.ngZone.runOutsideAngular(()=>this.fetchImpl(t.urlWithParams,k({signal:r},s)));nv(v),o.next({type:Nn.Sent}),a=yield v}catch(v){o.error(new Tn({error:v,status:v.status??0,statusText:v.statusText,url:t.urlWithParams,headers:v.headers}));return}let l=new st(a.headers),c=a.statusText,h=ph(a)??t.urlWithParams,f=a.status,m=null;if(t.reportProgress&&o.next(new Cs({headers:l,status:f,statusText:c,url:h})),a.body){let v=a.headers.get("content-length"),w=[],S=a.body.getReader(),I=0,Z,fe,pe=typeof Zone<"u"&&Zone.current;yield this.ngZone.runOutsideAngular(()=>Jo(this,null,function*(){for(;;){let{done:xe,value:sn}=yield S.read();if(xe)break;if(w.push(sn),I+=sn.length,t.reportProgress){fe=t.responseType==="text"?(fe??"")+(Z??=new TextDecoder).decode(sn,{stream:!0}):void 0;let Xn=()=>o.next({type:Nn.DownloadProgress,total:v?+v:void 0,loaded:I,partialText:fe});pe?pe.run(Xn):Xn()}}}));let vt=this.concatChunks(w,I);try{let xe=a.headers.get("Content-Type")??"";m=this.parseBody(t,vt,xe)}catch(xe){o.error(new Tn({error:xe,headers:new st(a.headers),status:a.status,statusText:a.statusText,url:ph(a)??t.urlWithParams}));return}}f===0&&(f=m?vh:0),f>=200&&f<300?(o.next(new zr({body:m,headers:l,status:f,statusText:c,url:h})),o.complete()):o.error(new Tn({error:m,headers:l,status:f,statusText:c,url:h}))})}parseBody(t,r,o){switch(t.responseType){case"json":let s=new TextDecoder().decode(r).replace(Z0,"");return s===""?null:JSON.parse(s);case"text":return new TextDecoder().decode(r);case"blob":return new Blob([r],{type:o});case"arraybuffer":return r.buffer}}createRequestInit(t){let r={},o=t.withCredentials?"include":void 0;if(t.headers.forEach((s,a)=>r[s]=a.join(",")),t.headers.has("Accept")||(r.Accept="application/json, text/plain, */*"),!t.headers.has("Content-Type")){let s=t.detectContentTypeHeader();s!==null&&(r["Content-Type"]=s)}return{body:t.serializeBody(),method:t.method,headers:r,credentials:o}}concatChunks(t,r){let o=new Uint8Array(r),s=0;for(let a of t)o.set(a,s),s+=a.length;return o}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),wl=class{};function Sl(){}function nv(i){i.then(Sl,Sl)}function yh(i,e){return e(i)}function iv(i,e){return(n,t)=>e.intercept(n,{handle:r=>i(r,t)})}function rv(i,e,n){return(t,r)=>Ot(n,()=>e(t,o=>i(o,r)))}var ov=new Q(""),El=new Q(""),sv=new Q(""),bh=new Q("",{providedIn:"root",factory:()=>!0});function av(){let i=null;return(e,n)=>{i===null&&(i=(R(ov,{optional:!0})??[]).reduceRight(iv,yh));let t=R(Mr);if(R(bh)){let o=t.add();return i(e,n).pipe(Zn(()=>t.remove(o)))}else return i(e,n)}}var fh=(()=>{let e=class e extends Lr{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=R(Mr),this.contributeToStability=R(bh)}handle(t){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(El),...this.injector.get(sv,[])]));this.chain=r.reduceRight((o,s)=>rv(o,s,this.injector),yh)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(t,o=>this.backend.handle(o)).pipe(Zn(()=>this.pendingTasks.remove(r)))}else return this.chain(t,r=>this.backend.handle(r))}};e.\u0275fac=function(r){return new(r||e)(j(xs),j(ei))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})();var lv=/^\)\]\}',?\n/;function cv(i){return"responseURL"in i&&i.responseURL?i.responseURL:/^X-Request-URL:/m.test(i.getAllResponseHeaders())?i.getResponseHeader("X-Request-URL"):null}var mh=(()=>{let e=class e{constructor(t){this.xhrFactory=t}handle(t){if(t.method==="JSONP")throw new ce(-2800,!1);let r=this.xhrFactory;return(r.\u0275loadImpl?Te(r.\u0275loadImpl()):F(null)).pipe(Ae(()=>new rl(s=>{let a=r.build();if(a.open(t.method,t.urlWithParams),t.withCredentials&&(a.withCredentials=!0),t.headers.forEach((S,I)=>a.setRequestHeader(S,I.join(","))),t.headers.has("Accept")||a.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){let S=t.detectContentTypeHeader();S!==null&&a.setRequestHeader("Content-Type",S)}if(t.responseType){let S=t.responseType.toLowerCase();a.responseType=S!=="json"?S:"text"}let l=t.serializeBody(),c=null,h=()=>{if(c!==null)return c;let S=a.statusText||"OK",I=new st(a.getAllResponseHeaders()),Z=cv(a)||t.url;return c=new Cs({headers:I,status:a.status,statusText:S,url:Z}),c},f=()=>{let{headers:S,status:I,statusText:Z,url:fe}=h(),pe=null;I!==Y0&&(pe=typeof a.response>"u"?a.responseText:a.response),I===0&&(I=pe?vh:0);let vt=I>=200&&I<300;if(t.responseType==="json"&&typeof pe=="string"){let xe=pe;pe=pe.replace(lv,"");try{pe=pe!==""?JSON.parse(pe):null}catch(sn){pe=xe,vt&&(vt=!1,pe={error:sn,text:pe})}}vt?(s.next(new zr({body:pe,headers:S,status:I,statusText:Z,url:fe||void 0})),s.complete()):s.error(new Tn({error:pe,headers:S,status:I,statusText:Z,url:fe||void 0}))},m=S=>{let{url:I}=h(),Z=new Tn({error:S,status:a.status||0,statusText:a.statusText||"Unknown Error",url:I||void 0});s.error(Z)},b=!1,v=S=>{b||(s.next(h()),b=!0);let I={type:Nn.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(I.total=S.total),t.responseType==="text"&&a.responseText&&(I.partialText=a.responseText),s.next(I)},w=S=>{let I={type:Nn.UploadProgress,loaded:S.loaded};S.lengthComputable&&(I.total=S.total),s.next(I)};return a.addEventListener("load",f),a.addEventListener("error",m),a.addEventListener("timeout",m),a.addEventListener("abort",m),t.reportProgress&&(a.addEventListener("progress",v),l!==null&&a.upload&&a.upload.addEventListener("progress",w)),a.send(l),s.next({type:Nn.Sent}),()=>{a.removeEventListener("error",m),a.removeEventListener("abort",m),a.removeEventListener("load",f),a.removeEventListener("timeout",m),t.reportProgress&&(a.removeEventListener("progress",v),l!==null&&a.upload&&a.upload.removeEventListener("progress",w)),a.readyState!==a.DONE&&a.abort()}})))}};e.\u0275fac=function(r){return new(r||e)(j(vs))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),_h=new Q(""),dv="XSRF-TOKEN",uv=new Q("",{providedIn:"root",factory:()=>dv}),hv="X-XSRF-TOKEN",pv=new Q("",{providedIn:"root",factory:()=>hv}),ws=class{},fv=(()=>{let e=class e{constructor(t,r,o){this.doc=t,this.platform=r,this.cookieName=o,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ms(t,this.cookieName),this.lastCookieString=t),this.lastToken}};e.\u0275fac=function(r){return new(r||e)(j(Ne),j(Ut),j(uv))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})();function mv(i,e){let n=i.url.toLowerCase();if(!R(_h)||i.method==="GET"||i.method==="HEAD"||n.startsWith("http://")||n.startsWith("https://"))return e(i);let t=R(ws).getToken(),r=R(pv);return t!=null&&!i.headers.has(r)&&(i=i.clone({headers:i.headers.set(r,t)})),e(i)}var xh=function(i){return i[i.Interceptors=0]="Interceptors",i[i.LegacyInterceptors=1]="LegacyInterceptors",i[i.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",i[i.NoXsrfProtection=3]="NoXsrfProtection",i[i.JsonpSupport=4]="JsonpSupport",i[i.RequestsMadeViaParent=5]="RequestsMadeViaParent",i[i.Fetch=6]="Fetch",i}(xh||{});function gv(i,e){return{\u0275kind:i,\u0275providers:e}}function vv(...i){let e=[oi,mh,fh,{provide:Lr,useExisting:fh},{provide:xs,useFactory:()=>R(tv,{optional:!0})??R(mh)},{provide:El,useValue:mv,multi:!0},{provide:_h,useValue:!0},{provide:ws,useClass:fv}];for(let n of i)e.push(...n.\u0275providers);return an(e)}var gh=new Q("");function yv(){return gv(xh.LegacyInterceptors,[{provide:gh,useFactory:av},{provide:El,useExisting:gh,multi:!0}])}var Ch=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ge({type:e}),e.\u0275inj=He({providers:[vv(yv())]});let i=e;return i})();var Tl=class extends Ju{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Dl=class i extends Tl{static makeCurrent(){Ku(new i)}onAndCancel(e,n,t){return e.addEventListener(n,t),()=>{e.removeEventListener(n,t)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=_v();return n==null?null:xv(n)}resetBaseElement(){Br=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ms(document.cookie,e)}},Br=null;function _v(){return Br=Br||document.querySelector("base"),Br?Br.getAttribute("href"):null}function xv(i){return new URL(i,document.baseURI).pathname}var Nl=class{addToWindow(e){kn.getAngularTestability=(t,r=!0)=>{let o=e.findTestabilityInTree(t,r);if(o==null)throw new ce(5103,!1);return o},kn.getAllAngularTestabilities=()=>e.getAllTestabilities(),kn.getAllAngularRootElements=()=>e.getAllRootElements();let n=t=>{let r=kn.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&t()};r.forEach(a=>{a.whenStable(s)})};kn.frameworkStabilizers||(kn.frameworkStabilizers=[]),kn.frameworkStabilizers.push(n)}findTestabilityInTree(e,n,t){if(n==null)return null;let r=e.getTestability(n);return r??(t?ii().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},Cv=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),Ss=new Q(""),Mh=(()=>{let e=class e{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(s=>s.supports(t)),!r)throw new ce(5101,!1);return this._eventNameToPlugin.set(t,r),r}};e.\u0275fac=function(r){return new(r||e)(j(Ss),j(Pe))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),Ur=class{constructor(e){this._doc=e}},kl="ng-app-id",kh=(()=>{let e=class e{constructor(t,r,o,s={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=gs(s),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${kl}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){let o=this.styleRef;if(o.has(t)){let s=o.get(t);return s.usage+=r,s.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let o=this.styleNodesInDOM,s=o?.get(r);if(s?.parentNode===t)return o.delete(r),s.removeAttribute(kl),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(kl,this.appId),t.appendChild(a),a}}addStyleToHost(t,r){let o=this.getStyleElement(t,r),s=this.styleRef,a=s.get(r)?.elements;a?a.push(o):s.set(r,{elements:[o],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(j(Ne),j(ts),j(ml,8),j(Ut))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),Il={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Rl=/%COMP%/g,Ih="%COMP%",wv=`_nghost-${Ih}`,Sv=`_ngcontent-${Ih}`,Ev=!0,Mv=new Q("",{providedIn:"root",factory:()=>Ev});function kv(i){return Sv.replace(Rl,i)}function Iv(i){return wv.replace(Rl,i)}function Th(i,e){return e.map(n=>n.replace(Rl,i))}var $i=(()=>{let e=class e{constructor(t,r,o,s,a,l,c,h=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=c,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=gs(l),this.defaultRenderer=new qr(t,a,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Er.ShadowDom&&(r=H(k({},r),{encapsulation:Er.Emulated}));let o=this.getOrCreateRenderer(t,r);return o instanceof Es?o.applyToHost(t):o instanceof $r&&o.applyStyles(),o}getOrCreateRenderer(t,r){let o=this.rendererByCompId,s=o.get(r.id);if(!s){let a=this.doc,l=this.ngZone,c=this.eventManager,h=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Er.Emulated:s=new Es(c,h,r,this.appId,f,a,l,m);break;case Er.ShadowDom:return new Ol(c,h,t,r,a,l,this.nonce,m);default:s=new $r(c,h,r,f,a,l,m);break}o.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(j(Mh),j(kh),j(ts),j(Mv),j(Ne),j(Ut),j(Pe),j(ml))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),qr=class{constructor(e,n,t,r){this.eventManager=e,this.doc=n,this.ngZone=t,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Il[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(wh(e)?e.content:e).appendChild(n)}insertBefore(e,n,t){e&&(wh(e)?e.content:e).insertBefore(n,t)}removeChild(e,n){n.remove()}selectRootElement(e,n){let t=typeof e=="string"?this.doc.querySelector(e):e;if(!t)throw new ce(-5104,!1);return n||(t.textContent=""),t}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,t,r){if(r){n=r+":"+n;let o=Il[r];o?e.setAttributeNS(o,n,t):e.setAttribute(n,t)}else e.setAttribute(n,t)}removeAttribute(e,n,t){if(t){let r=Il[t];r?e.removeAttributeNS(r,n):e.removeAttribute(`${t}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,t,r){r&(Tr.DashCase|Tr.Important)?e.style.setProperty(n,t,r&Tr.Important?"important":""):e.style[n]=t}removeStyle(e,n,t){t&Tr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,t){e!=null&&(e[n]=t)}setValue(e,n){e.nodeValue=n}listen(e,n,t){if(typeof e=="string"&&(e=ii().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(t))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function wh(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var Ol=class extends qr{constructor(e,n,t,r,o,s,a,l){super(e,o,s,l),this.sharedStylesHost=n,this.hostEl=t,this.shadowRoot=t.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=Th(r.id,r.styles);for(let h of c){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,t){return super.insertBefore(this.nodeOrShadowRoot(e),n,t)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},$r=class extends qr{constructor(e,n,t,r,o,s,a,l){super(e,o,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?Th(l,t.styles):t.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Es=class extends $r{constructor(e,n,t,r,o,s,a,l){let c=r+"-"+t.id;super(e,n,t,o,s,a,l,c),this.contentAttr=kv(c),this.hostAttr=Iv(c)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let t=super.createElement(e,n);return super.setAttribute(t,this.contentAttr,""),t}},Tv=(()=>{let e=class e extends Ur{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}};e.\u0275fac=function(r){return new(r||e)(j(Ne))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),Dv=(()=>{let e=class e extends Ur{constructor(t){super(t),this.delegate=R(Hu,{optional:!0})}supports(t){return this.delegate?this.delegate.supports(t):!1}addEventListener(t,r,o){return this.delegate.addEventListener(t,r,o)}removeEventListener(t,r,o){return this.delegate.removeEventListener(t,r,o)}};e.\u0275fac=function(r){return new(r||e)(j(Ne))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),Sh=["alt","control","meta","shift"],Nv={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ov={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},Rv=(()=>{let e=class e extends Ur{constructor(t){super(t)}supports(t){return e.parseEventName(t)!=null}addEventListener(t,r,o){let s=e.parseEventName(r),a=e.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ii().onAndCancel(t,s.domEventName,a))}static parseEventName(t){let r=t.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let s=e._normalizeKey(r.pop()),a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),Sh.forEach(h=>{let f=r.indexOf(h);f>-1&&(r.splice(f,1),a+=h+".")}),a+=s,r.length!=0||s.length===0)return null;let c={};return c.domEventName=o,c.fullKey=a,c}static matchEventFullKeyCode(t,r){let o=Nv[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(o=t.code,s="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),Sh.forEach(a=>{if(a!==o){let l=Ov[a];l(t)&&(s+=a+".")}}),s+=o,s===r)}static eventCallback(t,r,o){return s=>{e.matchEventFullKeyCode(s,t)&&o.runGuarded(()=>r(s))}}static _normalizeKey(t){return t==="esc"?"escape":t}};e.\u0275fac=function(r){return new(r||e)(j(Ne))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})();function Dh(i,e){return $u(k({rootComponent:i},Av(e)))}function Av(i){return{appProviders:[...Nh,...i?.providers??[]],platformProviders:Lv}}function Pv(){Dl.makeCurrent()}function Fv(){return new fl}function Vv(){return xu(document),document}var Lv=[{provide:Ut,useValue:ih},{provide:Cu,useValue:Pv,multi:!0},{provide:Ne,useFactory:Vv,deps:[]}];var jv=new Q(""),zv=[{provide:ds,useClass:Nl,deps:[]},{provide:zu,useClass:us,deps:[Pe,yl,ds]},{provide:us,useClass:us,deps:[Pe,yl,ds]}],Nh=[{provide:bu,useValue:"root"},{provide:fl,useFactory:Fv,deps:[]},{provide:Ss,useClass:Tv,multi:!0,deps:[Ne,Pe,Ut]},{provide:Ss,useClass:Rv,multi:!0,deps:[Ne]},{provide:Ss,useClass:Dv,multi:!0},$i,kh,Mh,{provide:Vi,useExisting:$i},{provide:vs,useClass:Cv,deps:[]},[]],Oh=(()=>{let e=class e{constructor(t){}static withServerTransition(t){return{ngModule:e,providers:[{provide:ts,useValue:t.appId}]}}};e.\u0275fac=function(r){return new(r||e)(j(jv,12))},e.\u0275mod=Ge({type:e}),e.\u0275inj=He({providers:[...Nh,...zv],imports:[U,qu]});let i=e;return i})();var Rh=(()=>{let e=class e{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}};e.\u0275fac=function(r){return new(r||e)(j(Ne))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Al=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:function(r){let o=null;return r?o=new(r||e):o=j(Bv),o},providedIn:"root"});let i=e;return i})(),Bv=(()=>{let e=class e extends Al{constructor(t){super(),this._doc=t}sanitize(t,r){if(r==null)return null;switch(t){case ti.NONE:return r;case ti.HTML:return Fi(r,"HTML")?Pi(r):Tu(this._doc,String(r)).toString();case ti.STYLE:return Fi(r,"Style")?Pi(r):r;case ti.SCRIPT:if(Fi(r,"Script"))return Pi(r);throw new ce(5200,!1);case ti.URL:return Fi(r,"URL")?Pi(r):Iu(String(r));case ti.RESOURCE_URL:if(Fi(r,"ResourceURL"))return Pi(r);throw new ce(5201,!1);default:throw new ce(5202,!1)}}bypassSecurityTrustHtml(t){return wu(t)}bypassSecurityTrustStyle(t){return Su(t)}bypassSecurityTrustScript(t){return Eu(t)}bypassSecurityTrustUrl(t){return Mu(t)}bypassSecurityTrustResourceUrl(t){return ku(t)}};e.\u0275fac=function(r){return new(r||e)(j(Ne))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var $="primary",oo=Symbol("RouteTitle"),jl=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Qi(i){return new jl(i)}function Uv(i,e,n){let t=n.path.split("/");if(t.length>i.length||n.pathMatch==="full"&&(e.hasChildren()||t.length<i.length))return null;let r={};for(let o=0;o<t.length;o++){let s=t[o],a=i[o];if(s[0]===":")r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:i.slice(0,t.length),posParams:r}}function qv(i,e){if(i.length!==e.length)return!1;for(let n=0;n<i.length;++n)if(!Ht(i[n],e[n]))return!1;return!0}function Ht(i,e){let n=i?zl(i):void 0,t=e?zl(e):void 0;if(!n||!t||n.length!=t.length)return!1;let r;for(let o=0;o<n.length;o++)if(r=n[o],!Hh(i[r],e[r]))return!1;return!0}function zl(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function Hh(i,e){if(Array.isArray(i)&&Array.isArray(e)){if(i.length!==e.length)return!1;let n=[...i].sort(),t=[...e].sort();return n.every((r,o)=>t[o]===r)}else return i===e}function Gh(i){return i.length>0?i[i.length-1]:null}function Rn(i){return Qo(i)?i:hs(i)?Te(Promise.resolve(i)):F(i)}var $v={exact:Kh,subset:Jh},Wh={exact:Hv,subset:Gv,ignored:()=>!0};function Ph(i,e,n){return $v[n.paths](i.root,e.root,n.matrixParams)&&Wh[n.queryParams](i.queryParams,e.queryParams)&&!(n.fragment==="exact"&&i.fragment!==e.fragment)}function Hv(i,e){return Ht(i,e)}function Kh(i,e,n){if(!ai(i.segments,e.segments)||!Is(i.segments,e.segments,n)||i.numberOfChildren!==e.numberOfChildren)return!1;for(let t in e.children)if(!i.children[t]||!Kh(i.children[t],e.children[t],n))return!1;return!0}function Gv(i,e){return Object.keys(e).length<=Object.keys(i).length&&Object.keys(e).every(n=>Hh(i[n],e[n]))}function Jh(i,e,n){return Qh(i,e,e.segments,n)}function Qh(i,e,n,t){if(i.segments.length>n.length){let r=i.segments.slice(0,n.length);return!(!ai(r,n)||e.hasChildren()||!Is(r,n,t))}else if(i.segments.length===n.length){if(!ai(i.segments,n)||!Is(i.segments,n,t))return!1;for(let r in e.children)if(!i.children[r]||!Jh(i.children[r],e.children[r],t))return!1;return!0}else{let r=n.slice(0,i.segments.length),o=n.slice(i.segments.length);return!ai(i.segments,r)||!Is(i.segments,r,t)||!i.children[$]?!1:Qh(i.children[$],e,o,t)}}function Is(i,e,n){return e.every((t,r)=>Wh[n](i[r].parameters,t.parameters))}var pn=class{constructor(e=new de([],{}),n={},t=null){this.root=e,this.queryParams=n,this.fragment=t}get queryParamMap(){return this._queryParamMap??=Qi(this.queryParams),this._queryParamMap}toString(){return Jv.serialize(this)}},de=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(t=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ts(this)}},si=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Qi(this.parameters),this._parameterMap}toString(){return Yh(this)}};function Wv(i,e){return ai(i,e)&&i.every((n,t)=>Ht(n.parameters,e[t].parameters))}function ai(i,e){return i.length!==e.length?!1:i.every((n,t)=>n.path===e[t].path)}function Kv(i,e){let n=[];return Object.entries(i.children).forEach(([t,r])=>{t===$&&(n=n.concat(e(r,t)))}),Object.entries(i.children).forEach(([t,r])=>{t!==$&&(n=n.concat(e(r,t)))}),n}var so=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:()=>new Xi,providedIn:"root"});let i=e;return i})(),Xi=class{parse(e){let n=new Ul(e);return new pn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Hr(e.root,!0)}`,t=Yv(e.queryParams),r=typeof e.fragment=="string"?`#${Qv(e.fragment)}`:"";return`${n}${t}${r}`}},Jv=new Xi;function Ts(i){return i.segments.map(e=>Yh(e)).join("/")}function Hr(i,e){if(!i.hasChildren())return Ts(i);if(e){let n=i.children[$]?Hr(i.children[$],!1):"",t=[];return Object.entries(i.children).forEach(([r,o])=>{r!==$&&t.push(`${r}:${Hr(o,!1)}`)}),t.length>0?`${n}(${t.join("//")})`:n}else{let n=Kv(i,(t,r)=>r===$?[Hr(i.children[$],!1)]:[`${r}:${Hr(t,!1)}`]);return Object.keys(i.children).length===1&&i.children[$]!=null?`${Ts(i)}/${n[0]}`:`${Ts(i)}/(${n.join("//")})`}}function Xh(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ms(i){return Xh(i).replace(/%3B/gi,";")}function Qv(i){return encodeURI(i)}function Bl(i){return Xh(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ds(i){return decodeURIComponent(i)}function Fh(i){return Ds(i.replace(/\+/g,"%20"))}function Yh(i){return`${Bl(i.path)}${Xv(i.parameters)}`}function Xv(i){return Object.entries(i).map(([e,n])=>`;${Bl(e)}=${Bl(n)}`).join("")}function Yv(i){let e=Object.entries(i).map(([n,t])=>Array.isArray(t)?t.map(r=>`${Ms(n)}=${Ms(r)}`).join("&"):`${Ms(n)}=${Ms(t)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var Zv=/^[^\/()?;#]+/;function Pl(i){let e=i.match(Zv);return e?e[0]:""}var ey=/^[^\/()?;=#]+/;function ty(i){let e=i.match(ey);return e?e[0]:""}var ny=/^[^=?&#]+/;function iy(i){let e=i.match(ny);return e?e[0]:""}var ry=/^[^&#]+/;function oy(i){let e=i.match(ry);return e?e[0]:""}var Ul=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new de([],{}):new de([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(t[$]=new de(e,n)),t}parseSegment(){let e=Pl(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ce(4009,!1);return this.capture(e),new si(Ds(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=ty(this.remaining);if(!n)return;this.capture(n);let t="";if(this.consumeOptional("=")){let r=Pl(this.remaining);r&&(t=r,this.capture(t))}e[Ds(n)]=Ds(t)}parseQueryParam(e){let n=iy(this.remaining);if(!n)return;this.capture(n);let t="";if(this.consumeOptional("=")){let s=oy(this.remaining);s&&(t=s,this.capture(t))}let r=Fh(n),o=Fh(t);if(e.hasOwnProperty(r)){let s=e[r];Array.isArray(s)||(s=[s],e[r]=s),s.push(o)}else e[r]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let t=Pl(this.remaining),r=this.remaining[t.length];if(r!=="/"&&r!==")"&&r!==";")throw new ce(4010,!1);let o;t.indexOf(":")>-1?(o=t.slice(0,t.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=$);let s=this.parseChildren();n[o]=Object.keys(s).length===1?s[$]:new de([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ce(4011,!1)}};function Zh(i){return i.segments.length>0?new de([],{[$]:i}):i}function ep(i){let e={};for(let[t,r]of Object.entries(i.children)){let o=ep(r);if(t===$&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))e[s]=a;else(o.segments.length>0||o.hasChildren())&&(e[t]=o)}let n=new de(i.segments,e);return sy(n)}function sy(i){if(i.numberOfChildren===1&&i.children[$]){let e=i.children[$];return new de(i.segments.concat(e.segments),e.children)}return i}function li(i){return i instanceof pn}function ay(i,e,n=null,t=null){let r=tp(i);return np(r,e,n,t)}function tp(i){let e;function n(o){let s={};for(let l of o.children){let c=n(l);s[l.outlet]=c}let a=new de(o.url,s);return o===i&&(e=a),a}let t=n(i.root),r=Zh(t);return e??r}function np(i,e,n,t){let r=i;for(;r.parent;)r=r.parent;if(e.length===0)return Fl(r,r,r,n,t);let o=ly(e);if(o.toRoot())return Fl(r,r,new de([],{}),n,t);let s=cy(o,r,i),a=s.processChildren?Kr(s.segmentGroup,s.index,o.commands):rp(s.segmentGroup,s.index,o.commands);return Fl(r,s.segmentGroup,a,n,t)}function Ns(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function Xr(i){return typeof i=="object"&&i!=null&&i.outlets}function Fl(i,e,n,t,r){let o={};t&&Object.entries(t).forEach(([l,c])=>{o[l]=Array.isArray(c)?c.map(h=>`${h}`):`${c}`});let s;i===e?s=n:s=ip(i,e,n);let a=Zh(ep(s));return new pn(a,o,r)}function ip(i,e,n){let t={};return Object.entries(i.children).forEach(([r,o])=>{o===e?t[r]=n:t[r]=ip(o,e,n)}),new de(i.segments,t)}var Os=class{constructor(e,n,t){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=t,e&&t.length>0&&Ns(t[0]))throw new ce(4003,!1);let r=t.find(Xr);if(r&&r!==Gh(t))throw new ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function ly(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new Os(!0,0,i);let e=0,n=!1,t=i.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Os(n,e,t)}var Wi=class{constructor(e,n,t){this.segmentGroup=e,this.processChildren=n,this.index=t}};function cy(i,e,n){if(i.isAbsolute)return new Wi(e,!0,0);if(!n)return new Wi(e,!1,NaN);if(n.parent===null)return new Wi(n,!0,0);let t=Ns(i.commands[0])?0:1,r=n.segments.length-1+t;return dy(n,r,i.numberOfDoubleDots)}function dy(i,e,n){let t=i,r=e,o=n;for(;o>r;){if(o-=r,t=t.parent,!t)throw new ce(4005,!1);r=t.segments.length}return new Wi(t,!1,r-o)}function uy(i){return Xr(i[0])?i[0].outlets:{[$]:i}}function rp(i,e,n){if(i??=new de([],{}),i.segments.length===0&&i.hasChildren())return Kr(i,e,n);let t=hy(i,e,n),r=n.slice(t.commandIndex);if(t.match&&t.pathIndex<i.segments.length){let o=new de(i.segments.slice(0,t.pathIndex),{});return o.children[$]=new de(i.segments.slice(t.pathIndex),i.children),Kr(o,0,r)}else return t.match&&r.length===0?new de(i.segments,{}):t.match&&!i.hasChildren()?ql(i,e,n):t.match?Kr(i,0,r):ql(i,e,n)}function Kr(i,e,n){if(n.length===0)return new de(i.segments,{});{let t=uy(n),r={};if(Object.keys(t).some(o=>o!==$)&&i.children[$]&&i.numberOfChildren===1&&i.children[$].segments.length===0){let o=Kr(i.children[$],e,n);return new de(i.segments,o.children)}return Object.entries(t).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=rp(i.children[o],e,s))}),Object.entries(i.children).forEach(([o,s])=>{t[o]===void 0&&(r[o]=s)}),new de(i.segments,r)}}function hy(i,e,n){let t=0,r=e,o={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(t>=n.length)return o;let s=i.segments[r],a=n[t];if(Xr(a))break;let l=`${a}`,c=t<n.length-1?n[t+1]:null;if(r>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!Lh(l,c,s))return o;t+=2}else{if(!Lh(l,{},s))return o;t++}r++}return{match:!0,pathIndex:r,commandIndex:t}}function ql(i,e,n){let t=i.segments.slice(0,e),r=0;for(;r<n.length;){let o=n[r];if(Xr(o)){let l=py(o.outlets);return new de(t,l)}if(r===0&&Ns(n[0])){let l=i.segments[e];t.push(new si(l.path,Vh(n[0]))),r++;continue}let s=Xr(o)?o.outlets[$]:`${o}`,a=r<n.length-1?n[r+1]:null;s&&a&&Ns(a)?(t.push(new si(s,Vh(a))),r+=2):(t.push(new si(s,{})),r++)}return new de(t,{})}function py(i){let e={};return Object.entries(i).forEach(([n,t])=>{typeof t=="string"&&(t=[t]),t!==null&&(e[n]=ql(new de([],{}),0,t))}),e}function Vh(i){let e={};return Object.entries(i).forEach(([n,t])=>e[n]=`${t}`),e}function Lh(i,e,n){return i==n.path&&Ht(e,n.parameters)}var Jr="imperative",Ve=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(Ve||{}),Rt=class{constructor(e,n){this.id=e,this.url=n}},Yi=class extends Rt{constructor(e,n,t="imperative",r=null){super(e,n),this.type=Ve.NavigationStart,this.navigationTrigger=t,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Gt=class extends Rt{constructor(e,n,t){super(e,n),this.urlAfterRedirects=t,this.type=Ve.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},St=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(St||{}),Rs=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(Rs||{}),hn=class extends Rt{constructor(e,n,t,r){super(e,n),this.reason=t,this.code=r,this.type=Ve.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},On=class extends Rt{constructor(e,n,t,r){super(e,n),this.reason=t,this.code=r,this.type=Ve.NavigationSkipped}},Yr=class extends Rt{constructor(e,n,t,r){super(e,n),this.error=t,this.target=r,this.type=Ve.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},As=class extends Rt{constructor(e,n,t,r){super(e,n),this.urlAfterRedirects=t,this.state=r,this.type=Ve.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$l=class extends Rt{constructor(e,n,t,r){super(e,n),this.urlAfterRedirects=t,this.state=r,this.type=Ve.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hl=class extends Rt{constructor(e,n,t,r,o){super(e,n),this.urlAfterRedirects=t,this.state=r,this.shouldActivate=o,this.type=Ve.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gl=class extends Rt{constructor(e,n,t,r){super(e,n),this.urlAfterRedirects=t,this.state=r,this.type=Ve.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wl=class extends Rt{constructor(e,n,t,r){super(e,n),this.urlAfterRedirects=t,this.state=r,this.type=Ve.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Kl=class{constructor(e){this.route=e,this.type=Ve.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Jl=class{constructor(e){this.route=e,this.type=Ve.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Ql=class{constructor(e){this.snapshot=e,this.type=Ve.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xl=class{constructor(e){this.snapshot=e,this.type=Ve.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yl=class{constructor(e){this.snapshot=e,this.type=Ve.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zl=class{constructor(e){this.snapshot=e,this.type=Ve.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ps=class{constructor(e,n,t){this.routerEvent=e,this.position=n,this.anchor=t,this.type=Ve.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Zr=class{},Zi=class{constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function fy(i,e){return i.providers&&!i._injector&&(i._injector=gl(i.providers,e,`Route: ${i.path}`)),i._injector??e}function Lt(i){return i.outlet||$}function my(i,e){let n=i.filter(t=>Lt(t)===e);return n.push(...i.filter(t=>Lt(t)!==e)),n}function ao(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let e=i.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var ec=class{get injector(){return ao(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new lo(this.rootInjector),this.attachRef=null}},lo=(()=>{let e=class e{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ec(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}};e.\u0275fac=function(r){return new(r||e)(j(ei))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Fs=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=tc(e,this._root);return n?n.children.map(t=>t.value):[]}firstChild(e){let n=tc(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=nc(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return nc(e,this._root).map(n=>n.value)}};function tc(i,e){if(i===e.value)return e;for(let n of e.children){let t=tc(i,n);if(t)return t}return null}function nc(i,e){if(i===e.value)return[e];for(let n of e.children){let t=nc(i,n);if(t.length)return t.unshift(e),t}return[]}var wt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Gi(i){let e={};return i&&i.children.forEach(n=>e[n.value.outlet]=n),e}var Vs=class extends Fs{constructor(e,n){super(e),this.snapshot=n,uc(this,e)}toString(){return this.snapshot.toString()}};function op(i){let e=gy(i),n=new Dt([new si("",{})]),t=new Dt({}),r=new Dt({}),o=new Dt({}),s=new Dt(""),a=new Wt(n,t,o,s,r,$,i,e.root);return a.snapshot=e.root,new Vs(new wt(a,[]),e)}function gy(i){let e={},n={},t={},r="",o=new Ki([],e,t,r,n,$,i,null,{});return new js("",new wt(o,[]))}var Wt=class{constructor(e,n,t,r,o,s,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=t,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(G(c=>c[oo]))??F(void 0),this.url=e,this.params=n,this.queryParams=t,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(G(e=>Qi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(G(e=>Qi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Ls(i,e,n="emptyOnly"){let t,{routeConfig:r}=i;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?t={params:k(k({},e.params),i.params),data:k(k({},e.data),i.data),resolve:k(k(k(k({},i.data),e.data),r?.data),i._resolvedData)}:t={params:k({},i.params),data:k({},i.data),resolve:k(k({},i.data),i._resolvedData??{})},r&&ap(r)&&(t.resolve[oo]=r.title),t}var Ki=class{get title(){return this.data?.[oo]}constructor(e,n,t,r,o,s,a,l,c){this.url=e,this.params=n,this.queryParams=t,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(t=>t.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},js=class extends Fs{constructor(e,n){super(n),this.url=e,uc(this,n)}toString(){return sp(this._root)}};function uc(i,e){e.value._routerState=i,e.children.forEach(n=>uc(i,n))}function sp(i){let e=i.children.length>0?` { ${i.children.map(sp).join(", ")} } `:"";return`${i.value}${e}`}function Vl(i){if(i.snapshot){let e=i.snapshot,n=i._futureSnapshot;i.snapshot=n,Ht(e.queryParams,n.queryParams)||i.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&i.fragmentSubject.next(n.fragment),Ht(e.params,n.params)||i.paramsSubject.next(n.params),qv(e.url,n.url)||i.urlSubject.next(n.url),Ht(e.data,n.data)||i.dataSubject.next(n.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function ic(i,e){let n=Ht(i.params,e.params)&&Wv(i.url,e.url),t=!i.parent!=!e.parent;return n&&!t&&(!i.parent||ic(i.parent,e.parent))}function ap(i){return typeof i.title=="string"||i.title===null}var co=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=$,this.activateEvents=new We,this.deactivateEvents=new We,this.attachEvents=new We,this.detachEvents=new We,this.parentContexts=R(lo),this.location=R(Ru),this.changeDetector=R(Rr),this.inputBinder=R(qs,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ce(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ce(4013,!1);this._activatedRoute=t;let o=this.location,a=t.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,c=new rc(t,l,o.injector);this.activated=o.createComponent(a,{index:o.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ce({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Bt]});let i=e;return i})(),rc=class i{__ngOutletInjector(e){return new i(this.route,this.childContexts,e)}constructor(e,n,t){this.route=e,this.childContexts=n,this.parent=t}get(e,n){return e===Wt?this.route:e===lo?this.childContexts:this.parent.get(e,n)}},qs=new Q(""),jh=(()=>{let e=class e{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,o=Xo([r.queryParams,r.params,r.data]).pipe(Ae(([s,a,l],c)=>(l=k(k(k({},s),a),l),c===0?F(l):Promise.resolve(l)))).subscribe(s=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let a=Wu(r.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:l}of a.inputs)t.activatedComponentRef.setInput(l,s[l])});this.outletDataSubscriptions.set(t,o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})();function vy(i,e,n){let t=eo(i,e._root,n?n._root:void 0);return new Vs(t,e)}function eo(i,e,n){if(n&&i.shouldReuseRoute(e.value,n.value.snapshot)){let t=n.value;t._futureSnapshot=e.value;let r=yy(i,e,n);return new wt(t,r)}else{if(i.shouldAttach(e.value)){let o=i.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>eo(i,a)),s}}let t=by(e.value),r=e.children.map(o=>eo(i,o));return new wt(t,r)}}function yy(i,e,n){return e.children.map(t=>{for(let r of n.children)if(i.shouldReuseRoute(t.value,r.value.snapshot))return eo(i,t,r);return eo(i,t)})}function by(i){return new Wt(new Dt(i.url),new Dt(i.params),new Dt(i.queryParams),new Dt(i.fragment),new Dt(i.data),i.outlet,i.component,i)}var to=class{constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},lp="ngNavigationCancelingError";function zs(i,e){let{redirectTo:n,navigationBehaviorOptions:t}=li(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=cp(!1,St.Redirect);return r.url=n,r.navigationBehaviorOptions=t,r}function cp(i,e){let n=new Error(`NavigationCancelingError: ${i||""}`);return n[lp]=!0,n.cancellationCode=e,n}function _y(i){return dp(i)&&li(i.url)}function dp(i){return!!i&&i[lp]}var xy=(i,e,n,t)=>G(r=>(new oc(e,r.targetRouterState,r.currentRouterState,n,t).activate(i),r)),oc=class{constructor(e,n,t,r,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=t,this.forwardEvent=r,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,t,e),Vl(this.futureState.root),this.activateChildRoutes(n,t,e)}deactivateChildRoutes(e,n,t){let r=Gi(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],t),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,t)})}deactivateRoutes(e,n,t){let r=e.value,o=n?n.value:null;if(r===o)if(r.component){let s=t.getContext(r.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,t);else o&&this.deactivateRouteAndItsChildren(n,t)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let t=n.getContext(e.value.outlet),r=t&&e.value.component?t.children:n,o=Gi(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(t&&t.outlet){let s=t.outlet.detach(),a=t.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let t=n.getContext(e.value.outlet),r=t&&e.value.component?t.children:n,o=Gi(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);t&&(t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated()),t.attachRef=null,t.route=null)}activateChildRoutes(e,n,t){let r=Gi(n);e.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],t),this.forwardEvent(new Zl(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Xl(e.value.snapshot))}activateRoutes(e,n,t){let r=e.value,o=n?n.value:null;if(Vl(r),r===o)if(r.component){let s=t.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,t);else if(r.component){let s=t.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Vl(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=r,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,t)}},Bs=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ji=class{constructor(e,n){this.component=e,this.route=n}};function Cy(i,e,n){let t=i._root,r=e?e._root:null;return Gr(t,r,n,[t.value])}function wy(i){let e=i.routeConfig?i.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:i,guards:e}}function tr(i,e){let n=Symbol(),t=e.get(i,n);return t===n?typeof i=="function"&&!gu(i)?i:e.get(i):t}function Gr(i,e,n,t,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Gi(e);return i.children.forEach(s=>{Sy(s,o[s.value.outlet],n,t.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Qr(a,n.getContext(s),r)),r}function Sy(i,e,n,t,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=i.value,s=e?e.value:null,a=n?n.getContext(i.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let l=Ey(s,o,o.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Bs(t)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Gr(i,e,a?a.children:null,t,r):Gr(i,e,n,t,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Ji(a.outlet.component,s))}else s&&Qr(e,a,r),r.canActivateChecks.push(new Bs(t)),o.component?Gr(i,null,a?a.children:null,t,r):Gr(i,null,n,t,r);return r}function Ey(i,e,n){if(typeof n=="function")return n(i,e);switch(n){case"pathParamsChange":return!ai(i.url,e.url);case"pathParamsOrQueryParamsChange":return!ai(i.url,e.url)||!Ht(i.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ic(i,e)||!Ht(i.queryParams,e.queryParams);case"paramsChange":default:return!ic(i,e)}}function Qr(i,e,n){let t=Gi(i),r=i.value;Object.entries(t).forEach(([o,s])=>{r.component?e?Qr(s,e.children.getContext(o),n):Qr(s,null,n):Qr(s,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Ji(e.outlet.component,r)):n.canDeactivateChecks.push(new Ji(null,r)):n.canDeactivateChecks.push(new Ji(null,r))}function uo(i){return typeof i=="function"}function My(i){return typeof i=="boolean"}function ky(i){return i&&uo(i.canLoad)}function Iy(i){return i&&uo(i.canActivate)}function Ty(i){return i&&uo(i.canActivateChild)}function Dy(i){return i&&uo(i.canDeactivate)}function Ny(i){return i&&uo(i.canMatch)}function up(i){return i instanceof lu||i?.name==="EmptyError"}var ks=Symbol("INITIAL_VALUE");function er(){return Ae(i=>Xo(i.map(e=>e.pipe(bt(1),mu(ks)))).pipe(G(e=>{for(let n of e)if(n!==!0){if(n===ks)return ks;if(n===!1||Oy(n))return n}return!0}),pt(e=>e!==ks),bt(1)))}function Oy(i){return li(i)||i instanceof to}function Ry(i,e){return yt(n=>{let{targetSnapshot:t,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?F(H(k({},n),{guardsResult:!0})):Ay(s,t,r,i).pipe(yt(a=>a&&My(a)?Py(t,o,i,e):F(a)),G(a=>H(k({},n),{guardsResult:a})))})}function Ay(i,e,n,t){return Te(i).pipe(yt(r=>zy(r.component,r.route,n,e,t)),Mn(r=>r!==!0,!0))}function Py(i,e,n,t){return Te(e).pipe(En(r=>Yo(Vy(r.route.parent,t),Fy(r.route,t),jy(i,r.path,n),Ly(i,r.route,n))),Mn(r=>r!==!0,!0))}function Fy(i,e){return i!==null&&e&&e(new Yl(i)),F(!0)}function Vy(i,e){return i!==null&&e&&e(new Ql(i)),F(!0)}function Ly(i,e,n){let t=e.routeConfig?e.routeConfig.canActivate:null;if(!t||t.length===0)return F(!0);let r=t.map(o=>Oi(()=>{let s=ao(e)??n,a=tr(o,s),l=Iy(a)?a.canActivate(e,i):Ot(s,()=>a(e,i));return Rn(l).pipe(Mn())}));return F(r).pipe(er())}function jy(i,e,n){let t=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>wy(s)).filter(s=>s!==null).map(s=>Oi(()=>{let a=s.guards.map(l=>{let c=ao(s.node)??n,h=tr(l,c),f=Ty(h)?h.canActivateChild(t,i):Ot(c,()=>h(t,i));return Rn(f).pipe(Mn())});return F(a).pipe(er())}));return F(o).pipe(er())}function zy(i,e,n,t,r){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return F(!0);let s=o.map(a=>{let l=ao(e)??r,c=tr(a,l),h=Dy(c)?c.canDeactivate(i,e,n,t):Ot(l,()=>c(i,e,n,t));return Rn(h).pipe(Mn())});return F(s).pipe(er())}function By(i,e,n,t){let r=e.canLoad;if(r===void 0||r.length===0)return F(!0);let o=r.map(s=>{let a=tr(s,i),l=ky(a)?a.canLoad(e,n):Ot(i,()=>a(e,n));return Rn(l)});return F(o).pipe(er(),hp(t))}function hp(i){return au(De(e=>{if(typeof e!="boolean")throw zs(i,e)}),G(e=>e===!0))}function Uy(i,e,n,t){let r=e.canMatch;if(!r||r.length===0)return F(!0);let o=r.map(s=>{let a=tr(s,i),l=Ny(a)?a.canMatch(e,n):Ot(i,()=>a(e,n));return Rn(l)});return F(o).pipe(er(),hp(t))}var no=class{constructor(e){this.segmentGroup=e||null}},io=class extends Error{constructor(e){super(),this.urlTree=e}};function Hi(i){return Yn(new no(i))}function qy(i){return Yn(new ce(4e3,!1))}function $y(i){return Yn(cp(!1,St.GuardRejected))}var sc=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let t=[],r=n.root;for(;;){if(t=t.concat(r.segments),r.numberOfChildren===0)return F(t);if(r.numberOfChildren>1||!r.children[$])return qy(`${e.redirectTo}`);r=r.children[$]}}applyRedirectCommands(e,n,t,r,o){if(typeof n!="string"){let a=n,{queryParams:l,fragment:c,routeConfig:h,url:f,outlet:m,params:b,data:v,title:w}=r,S=Ot(o,()=>a({params:b,data:v,queryParams:l,fragment:c,routeConfig:h,url:f,outlet:m,title:w}));if(S instanceof pn)throw new io(S);n=S}let s=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,t);if(n[0]==="/")throw new io(s);return s}applyRedirectCreateUrlTree(e,n,t,r){let o=this.createSegmentGroup(e,n.root,t,r);return new pn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let t={};return Object.entries(e).forEach(([r,o])=>{if(typeof o=="string"&&o[0]===":"){let a=o.substring(1);t[r]=n[a]}else t[r]=o}),t}createSegmentGroup(e,n,t,r){let o=this.createSegments(e,n.segments,t,r),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(e,l,t,r)}),new de(o,s)}createSegments(e,n,t,r){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,r):this.findOrReturn(o,t))}findPosParam(e,n,t){let r=t[n.path.substring(1)];if(!r)throw new ce(4001,!1);return r}findOrReturn(e,n){let t=0;for(let r of n){if(r.path===e.path)return n.splice(t),r;t++}return e}},ac={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Hy(i,e,n,t,r){let o=hc(i,e,n);return o.matched?(t=fy(e,t),Uy(t,e,n,r).pipe(G(s=>s===!0?o:k({},ac)))):F(o)}function hc(i,e,n){if(e.path==="**")return Gy(n);if(e.path==="")return e.pathMatch==="full"&&(i.hasChildren()||n.length>0)?k({},ac):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||Uv)(n,i,e);if(!r)return k({},ac);let o={};Object.entries(r.posParams??{}).forEach(([a,l])=>{o[a]=l.path});let s=r.consumed.length>0?k(k({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function Gy(i){return{matched:!0,parameters:i.length>0?Gh(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function zh(i,e,n,t){return n.length>0&&Jy(i,n,t)?{segmentGroup:new de(e,Ky(t,new de(n,i.children))),slicedSegments:[]}:n.length===0&&Qy(i,n,t)?{segmentGroup:new de(i.segments,Wy(i,n,t,i.children)),slicedSegments:n}:{segmentGroup:new de(i.segments,i.children),slicedSegments:n}}function Wy(i,e,n,t){let r={};for(let o of n)if($s(i,e,o)&&!t[Lt(o)]){let s=new de([],{});r[Lt(o)]=s}return k(k({},t),r)}function Ky(i,e){let n={};n[$]=e;for(let t of i)if(t.path===""&&Lt(t)!==$){let r=new de([],{});n[Lt(t)]=r}return n}function Jy(i,e,n){return n.some(t=>$s(i,e,t)&&Lt(t)!==$)}function Qy(i,e,n){return n.some(t=>$s(i,e,t))}function $s(i,e,n){return(i.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Xy(i,e,n,t){return Lt(i)!==t&&(t===$||!$s(e,n,i))?!1:hc(e,i,n).matched}function Yy(i,e,n){return e.length===0&&!i.children[n]}var lc=class{};function Zy(i,e,n,t,r,o,s="emptyOnly"){return new cc(i,e,n,t,r,s,o).recognize()}var e1=31,cc=class{constructor(e,n,t,r,o,s,a){this.injector=e,this.configLoader=n,this.rootComponentType=t,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new sc(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ce(4002,`'${e.segmentGroup}'`)}recognize(){let e=zh(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(G(({children:n,rootSnapshot:t})=>{let r=new wt(t,n),o=new js("",r),s=ay(t,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}))}match(e){let n=new Ki([],Object.freeze({}),Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),$,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,$,n).pipe(G(t=>({children:t,rootSnapshot:n})),Ai(t=>{if(t instanceof io)return this.urlTree=t.urlTree,this.match(t.urlTree.root);throw t instanceof no?this.noMatchError(t):t}))}processSegmentGroup(e,n,t,r,o){return t.segments.length===0&&t.hasChildren()?this.processChildren(e,n,t,o):this.processSegment(e,n,t,t.segments,r,!0,o).pipe(G(s=>s instanceof wt?[s]:[]))}processChildren(e,n,t,r){let o=[];for(let s of Object.keys(t.children))s==="primary"?o.unshift(s):o.push(s);return Te(o).pipe(En(s=>{let a=t.children[s],l=my(n,s);return this.processSegmentGroup(e,l,a,s,r)}),fu((s,a)=>(s.push(...a),s)),cl(null),hu(),yt(s=>{if(s===null)return Hi(t);let a=pp(s);return t1(a),F(a)}))}processSegment(e,n,t,r,o,s,a){return Te(n).pipe(En(l=>this.processSegmentAgainstRoute(l._injector??e,n,l,t,r,o,s,a).pipe(Ai(c=>{if(c instanceof no)return F(null);throw c}))),Mn(l=>!!l),Ai(l=>{if(up(l))return Yy(t,r,o)?F(new lc):Hi(t);throw l}))}processSegmentAgainstRoute(e,n,t,r,o,s,a,l){return Xy(t,r,o,s)?t.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,t,o,s,l):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,t,o,s,l):Hi(r):Hi(r)}expandSegmentAgainstRouteUsingRedirect(e,n,t,r,o,s,a){let{matched:l,parameters:c,consumedSegments:h,positionalParamSegments:f,remainingSegments:m}=hc(n,r,o);if(!l)return Hi(n);typeof r.redirectTo=="string"&&r.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>e1&&(this.allowRedirects=!1));let b=new Ki(o,c,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Bh(r),Lt(r),r.component??r._loadedComponent??null,r,Uh(r)),v=Ls(b,a,this.paramsInheritanceStrategy);b.params=Object.freeze(v.params),b.data=Object.freeze(v.data);let w=this.applyRedirects.applyRedirectCommands(h,r.redirectTo,f,b,e);return this.applyRedirects.lineralizeSegments(r,w).pipe(yt(S=>this.processSegment(e,t,n,S.concat(m),s,!1,a)))}matchSegmentAgainstRoute(e,n,t,r,o,s){let a=Hy(n,t,r,e,this.urlSerializer);return t.path==="**"&&(n.children={}),a.pipe(Ae(l=>l.matched?(e=t._injector??e,this.getChildConfig(e,t,r).pipe(Ae(({routes:c})=>{let h=t._loadedInjector??e,{parameters:f,consumedSegments:m,remainingSegments:b}=l,v=new Ki(m,f,Object.freeze(k({},this.urlTree.queryParams)),this.urlTree.fragment,Bh(t),Lt(t),t.component??t._loadedComponent??null,t,Uh(t)),w=Ls(v,s,this.paramsInheritanceStrategy);v.params=Object.freeze(w.params),v.data=Object.freeze(w.data);let{segmentGroup:S,slicedSegments:I}=zh(n,m,b,c);if(I.length===0&&S.hasChildren())return this.processChildren(h,c,S,v).pipe(G(fe=>new wt(v,fe)));if(c.length===0&&I.length===0)return F(new wt(v,[]));let Z=Lt(t)===o;return this.processSegment(h,c,S,I,Z?$:o,!0,v).pipe(G(fe=>new wt(v,fe instanceof wt?[fe]:[])))}))):Hi(n)))}getChildConfig(e,n,t){return n.children?F({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?F({routes:n._loadedRoutes,injector:n._loadedInjector}):By(e,n,t,this.urlSerializer).pipe(yt(r=>r?this.configLoader.loadChildren(e,n).pipe(De(o=>{n._loadedRoutes=o.routes,n._loadedInjector=o.injector})):$y(n))):F({routes:[],injector:e})}};function t1(i){i.sort((e,n)=>e.value.outlet===$?-1:n.value.outlet===$?1:e.value.outlet.localeCompare(n.value.outlet))}function n1(i){let e=i.value.routeConfig;return e&&e.path===""}function pp(i){let e=[],n=new Set;for(let t of i){if(!n1(t)){e.push(t);continue}let r=e.find(o=>t.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...t.children),n.add(r)):e.push(t)}for(let t of n){let r=pp(t.children);e.push(new wt(t.value,r))}return e.filter(t=>!n.has(t))}function Bh(i){return i.data||{}}function Uh(i){return i.resolve||{}}function i1(i,e,n,t,r,o){return yt(s=>Zy(i,e,n,t,s.extractedUrl,r,o).pipe(G(({state:a,tree:l})=>H(k({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function r1(i,e){return yt(n=>{let{targetSnapshot:t,guards:{canActivateChecks:r}}=n;if(!r.length)return F(n);let o=new Set(r.map(l=>l.route)),s=new Set;for(let l of o)if(!s.has(l))for(let c of fp(l))s.add(c);let a=0;return Te(s).pipe(En(l=>o.has(l)?o1(l,t,i,e):(l.data=Ls(l,l.parent,i).resolve,F(void 0))),De(()=>a++),dl(1),yt(l=>a===s.size?F(n):Sn))})}function fp(i){let e=i.children.map(n=>fp(n)).flat();return[i,...e]}function o1(i,e,n,t){let r=i.routeConfig,o=i._resolve;return r?.title!==void 0&&!ap(r)&&(o[oo]=r.title),s1(o,i,e,t).pipe(G(s=>(i._resolvedData=s,i.data=Ls(i,i.parent,n).resolve,null)))}function s1(i,e,n,t){let r=zl(i);if(r.length===0)return F({});let o={};return Te(r).pipe(yt(s=>a1(i[s],e,n,t).pipe(Mn(),De(a=>{if(a instanceof to)throw zs(new Xi,a);o[s]=a}))),dl(1),du(o),Ai(s=>up(s)?Sn:Yn(s)))}function a1(i,e,n,t){let r=ao(e)??t,o=tr(i,r),s=o.resolve?o.resolve(e,n):Ot(r,()=>o(e,n));return Rn(s)}function Ll(i){return Ae(e=>{let n=i(e);return n?Te(n).pipe(G(()=>e)):F(e)})}var mp=(()=>{let e=class e{buildTitle(t){let r,o=t.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(s=>s.outlet===$);return r}getResolvedTitleForRoute(t){return t.data[oo]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:()=>R(l1),providedIn:"root"});let i=e;return i})(),l1=(()=>{let e=class e extends mp{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(j(Rh))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),ho=new Q("",{providedIn:"root",factory:()=>({})}),c1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=A({type:e,selectors:[["ng-component"]],standalone:!0,features:[V],decls:1,vars:0,template:function(r,o){r&1&&y(0,"router-outlet")},dependencies:[co],encapsulation:2});let i=e;return i})();function pc(i){let e=i.children&&i.children.map(pc),n=e?H(k({},i),{children:e}):k({},i);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==$&&(n.component=c1),n}var ro=new Q(""),fc=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=R(fs)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return F(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Rn(t.loadComponent()).pipe(G(gp),De(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),Zn(()=>{this.componentLoaders.delete(t)})),o=new sl(r,()=>new Be).pipe(ol());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return F({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let s=d1(r,this.compiler,t,this.onLoadEndListener).pipe(Zn(()=>{this.childrenLoaders.delete(r)})),a=new sl(s,()=>new Be).pipe(ol());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function d1(i,e,n,t){return Rn(i.loadChildren()).pipe(G(gp),yt(r=>r instanceof Au||Array.isArray(r)?F(r):Te(e.compileModuleAsync(r))),G(r=>{t&&t(i);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(n).injector,s=o.get(ro,[],{optional:!0,self:!0}).flat()),{routes:s.map(pc),injector:o}}))}function u1(i){return i&&typeof i=="object"&&"default"in i}function gp(i){return u1(i)?i.default:i}var mc=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:()=>R(h1),providedIn:"root"});let i=e;return i})(),h1=(()=>{let e=class e{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),vp=new Q(""),yp=new Q("");function p1(i,e,n){let t=i.get(yp),r=i.get(Ne);return i.get(Pe).runOutsideAngular(()=>{if(!r.startViewTransition||t.skipNextTransition)return t.skipNextTransition=!1,new Promise(c=>setTimeout(c));let o,s=new Promise(c=>{o=c}),a=r.startViewTransition(()=>(o(),f1(i))),{onViewTransitionCreated:l}=t;return l&&Ot(i,()=>l({transition:a,from:e,to:n})),s})}function f1(i){return new Promise(e=>{Ou({read:()=>setTimeout(e)},{injector:i})})}var m1=new Q(""),gc=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Be,this.transitionAbortSubject=new Be,this.configLoader=R(fc),this.environmentInjector=R(ei),this.urlSerializer=R(so),this.rootContexts=R(lo),this.location=R(Pr),this.inputBindingEnabled=R(qs,{optional:!0})!==null,this.titleStrategy=R(mp),this.options=R(ho,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=R(mc),this.createViewTransition=R(vp,{optional:!0}),this.navigationErrorHandler=R(m1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>F(void 0),this.rootComponentType=null;let t=o=>this.events.next(new Kl(o)),r=o=>this.events.next(new Jl(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(H(k(k({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,o){return this.transitions=new Dt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:Jr,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(pt(s=>s.id!==0),G(s=>H(k({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),Ae(s=>{let a=!1,l=!1;return F(s).pipe(Ae(c=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",St.SupersededByNewNavigation),Sn;this.currentTransition=s,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?H(k({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!h&&f!=="reload"){let m="";return this.events.next(new On(c.id,this.urlSerializer.serialize(c.rawUrl),m,Rs.IgnoredSameUrlNavigation)),c.resolve(!1),Sn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return F(c).pipe(Ae(m=>{let b=this.transitions?.getValue();return this.events.next(new Yi(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),b!==this.transitions?.getValue()?Sn:Promise.resolve(m)}),i1(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),De(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=H(k({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let b=new As(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(b)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:m,extractedUrl:b,source:v,restoredState:w,extras:S}=c,I=new Yi(m,this.urlSerializer.serialize(b),v,w);this.events.next(I);let Z=op(this.rootComponentType).snapshot;return this.currentTransition=s=H(k({},c),{targetSnapshot:Z,urlAfterRedirects:b,extras:H(k({},S),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=b,F(s)}else{let m="";return this.events.next(new On(c.id,this.urlSerializer.serialize(c.extractedUrl),m,Rs.IgnoredByUrlHandlingStrategy)),c.resolve(!1),Sn}}),De(c=>{let h=new $l(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(h)}),G(c=>(this.currentTransition=s=H(k({},c),{guards:Cy(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),s)),Ry(this.environmentInjector,c=>this.events.next(c)),De(c=>{if(s.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw zs(this.urlSerializer,c.guardsResult);let h=new Hl(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(h)}),pt(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",St.GuardRejected),!1)),Ll(c=>{if(c.guards.canActivateChecks.length)return F(c).pipe(De(h=>{let f=new Gl(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}),Ae(h=>{let f=!1;return F(h).pipe(r1(this.paramsInheritanceStrategy,this.environmentInjector),De({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(h,"",St.NoDataFromResolver)}}))}),De(h=>{let f=new Wl(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}))}),Ll(c=>{let h=f=>{let m=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(f.routeConfig).pipe(De(b=>{f.component=b}),G(()=>{})));for(let b of f.children)m.push(...h(b));return m};return Xo(h(c.targetSnapshot.root)).pipe(cl(null),bt(1))}),Ll(()=>this.afterPreactivation()),Ae(()=>{let{currentSnapshot:c,targetSnapshot:h}=s,f=this.createViewTransition?.(this.environmentInjector,c.root,h.root);return f?Te(f).pipe(G(()=>s)):F(s)}),G(c=>{let h=vy(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=s=H(k({},c),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,s}),De(()=>{this.events.next(new Zr)}),xy(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),bt(1),De({next:c=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Gt(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{a=!0}}),es(this.transitionAbortSubject.pipe(De(c=>{throw c}))),Zn(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",St.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Ai(c=>{if(l=!0,dp(c))this.events.next(new hn(s.id,this.urlSerializer.serialize(s.extractedUrl),c.message,c.cancellationCode)),_y(c)?this.events.next(new Zi(c.url,c.navigationBehaviorOptions)):s.resolve(!1);else{let h=new Yr(s.id,this.urlSerializer.serialize(s.extractedUrl),c,s.targetSnapshot??void 0);try{let f=Ot(this.environmentInjector,()=>this.navigationErrorHandler?.(h));if(f instanceof to){let{message:m,cancellationCode:b}=zs(this.urlSerializer,f);this.events.next(new hn(s.id,this.urlSerializer.serialize(s.extractedUrl),m,b)),this.events.next(new Zi(f.redirectTo,f.navigationBehaviorOptions))}else{this.events.next(h);let m=t.errorHandler(c);s.resolve(!!m)}}catch(f){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(f)}}return Sn}))}))}cancelNavigationTransition(t,r,o){let s=new hn(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(s),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function g1(i){return i!==Jr}var v1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:()=>R(y1),providedIn:"root"});let i=e;return i})(),dc=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},y1=(()=>{let e=class e extends dc{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=ln(e)))(o||e)}})(),e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),bp=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:()=>R(b1),providedIn:"root"});let i=e;return i})(),b1=(()=>{let e=class e extends bp{constructor(){super(...arguments),this.location=R(Pr),this.urlSerializer=R(so),this.options=R(ho,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=R(mc),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new pn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=op(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Yi)this.stateMemento=this.createStateMemento();else if(t instanceof On)this.rawUrlTree=r.initialUrl;else if(t instanceof As){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??o,r)}}else t instanceof Zr?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof hn&&(t.code===St.GuardRejected||t.code===St.NoDataFromResolver)?this.restoreHistory(r):t instanceof Yr?this.restoreHistory(r,!0):t instanceof Gt&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let o=t instanceof pn?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let s=this.browserPageId,a=k(k({},r.extras.state),this.generateNgRouterState(r.id,s));this.location.replaceState(o,"",a)}else{let s=k(k({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",s)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,s=this.currentPageId-o;s!==0?this.location.historyGo(s):this.currentUrlTree===t.finalUrl&&s===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=ln(e)))(o||e)}})(),e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Wr=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(Wr||{});function _p(i,e){i.events.pipe(pt(n=>n instanceof Gt||n instanceof hn||n instanceof Yr||n instanceof On),G(n=>n instanceof Gt||n instanceof On?Wr.COMPLETE:(n instanceof hn?n.code===St.Redirect||n.code===St.SupersededByNewNavigation:!1)?Wr.REDIRECTING:Wr.FAILED),pt(n=>n!==Wr.REDIRECTING),bt(1)).subscribe(()=>{e()})}function _1(i){throw i}var x1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},C1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},me=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=R(cs),this.stateManager=R(bp),this.options=R(ho,{optional:!0})||{},this.pendingTasks=R(Mr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=R(gc),this.urlSerializer=R(so),this.location=R(Pr),this.urlHandlingStrategy=R(mc),this._events=new Be,this.errorHandler=this.options.errorHandler||_1,this.navigated=!1,this.routeReuseStrategy=R(v1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=R(ro,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!R(qs,{optional:!0}),this.eventsSubscription=new su,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(o!==null&&s!==null){if(this.stateManager.handleRouterEvent(r,s),r instanceof hn&&r.code!==St.Redirect&&r.code!==St.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Gt)this.navigated=!0;else if(r instanceof Zi){let a=r.navigationBehaviorOptions,l=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c=k({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||g1(o.source)},a);this.scheduleNavigation(l,Jr,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}S1(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Jr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,o){let s={replaceUrl:!0},a=o?.navigationId?o:null;if(o){let c=k({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(s.state=c)}let l=this.parseUrl(t);this.scheduleNavigation(l,r,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(pc),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:o,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:c}=r,h=c?this.currentUrlTree.fragment:a,f=null;switch(l??this.options.defaultQueryParamsHandling){case"merge":f=k(k({},this.currentUrlTree.queryParams),s);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=s||null}f!==null&&(f=this.removeEmptyProps(f));let m;try{let b=o?o.snapshot:this.routerState.snapshot.root;m=tp(b)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),m=this.currentUrlTree.root}return np(m,t,f,h??null)}navigateByUrl(t,r={skipLocationChange:!1}){let o=li(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(s,Jr,null,r)}navigate(t,r={skipLocationChange:!1}){return w1(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let o;if(r===!0?o=k({},x1):r===!1?o=k({},C1):o=r,li(t))return Ph(this.currentUrlTree,t,o);let s=this.parseUrl(t);return Ph(this.currentUrlTree,s,o)}removeEmptyProps(t){return Object.entries(t).reduce((r,[o,s])=>(s!=null&&(r[o]=s),r),{})}scheduleNavigation(t,r,o,s,a){if(this.disposed)return Promise.resolve(!1);let l,c,h;a?(l=a.resolve,c=a.reject,h=a.promise):h=new Promise((m,b)=>{l=m,c=b});let f=this.pendingTasks.add();return _p(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:l,reject:c,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();function w1(i){for(let e=0;e<i.length;e++)if(i[e]==null)throw new ce(4008,!1)}function S1(i){return!(i instanceof Zr)&&!(i instanceof Zi)}var An=(()=>{let e=class e{constructor(t,r,o,s,a,l){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=s,this.el=a,this.locationStrategy=l,this.href=null,this.onChanges=new Be,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(h=>{h instanceof Gt&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(li(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,o,s,a){let l=this.urlTree;if(l===null||this.isAnchorElement&&(t!==0||r||o||s||a||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(l,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:Du(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let o=this.renderer,s=this.el.nativeElement;r!==null?o.setAttribute(s,t,r):o.removeAttribute(s,t)}get urlTree(){return this.routerLinkInput===null?null:li(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}};e.\u0275fac=function(r){return new(r||e)(C(me),C(Wt),_u("tabindex"),C(cn),C(_t),C(Ar))},e.\u0275dir=Ce({type:e,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){r&1&&E("click",function(a){return o.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&ji("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ni],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ni],replaceUrl:[2,"replaceUrl","replaceUrl",ni],routerLink:"routerLink"},standalone:!0,features:[is,Bt]});let i=e;return i})();var Us=class{};var E1=(()=>{let e=class e{constructor(t,r,o,s,a){this.router=t,this.injector=o,this.preloadingStrategy=s,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(pt(t=>t instanceof Gt),En(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let o=[];for(let s of r){s.providers&&!s._injector&&(s._injector=gl(s.providers,t,`Route: ${s.path}`));let a=s._injector??t,l=s._loadedInjector??a;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&o.push(this.preloadConfig(a,s)),(s.children||s._loadedRoutes)&&o.push(this.processRoutes(l,s.children??s._loadedRoutes))}return Te(o).pipe(al())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(t,r):o=F(null);let s=o.pipe(yt(a=>a===null?F(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return Te([s,a]).pipe(al())}else return s})}};e.\u0275fac=function(r){return new(r||e)(j(me),j(fs),j(ei),j(Us),j(fc))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),xp=new Q(""),M1=(()=>{let e=class e{constructor(t,r,o,s,a={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=s,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Yi?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Gt?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof On&&t.code===Rs.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Ps&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Ps(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}};e.\u0275fac=function(r){ns()},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})();function Cp(i,...e){return an([{provide:ro,multi:!0,useValue:i},[],{provide:Wt,useFactory:wp,deps:[me]},{provide:ps,multi:!0,useFactory:Sp},e.map(n=>n.\u0275providers)])}function wp(i){return i.routerState.root}function po(i,e){return{\u0275kind:i,\u0275providers:e}}function Sp(){let i=R(In);return e=>{let n=i.get(dn);if(e!==n.components[0])return;let t=i.get(me),r=i.get(Ep);i.get(vc)===1&&t.initialNavigation(),i.get(Mp,null,ul.Optional)?.setUpPreloading(),i.get(xp,null,ul.Optional)?.init(),t.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var Ep=new Q("",{factory:()=>new Be}),vc=new Q("",{providedIn:"root",factory:()=>1});function k1(){return po(2,[{provide:vc,useValue:0},{provide:Or,multi:!0,deps:[In],useFactory:e=>{let n=e.get(Qu,Promise.resolve());return()=>n.then(()=>new Promise(t=>{let r=e.get(me),o=e.get(Ep);_p(r,()=>{t(!0)}),e.get(gc).afterPreactivation=()=>(t(!0),o.closed?F(void 0):o),r.initialNavigation()}))}}])}function I1(){return po(3,[{provide:Or,multi:!0,useFactory:()=>{let e=R(me);return()=>{e.setUpLocationChangeListener()}}},{provide:vc,useValue:2}])}var Mp=new Q("");function T1(i){return po(0,[{provide:Mp,useExisting:E1},{provide:Us,useExisting:i}])}function D1(){return po(8,[jh,{provide:qs,useExisting:jh}])}function N1(i){let e=[{provide:vp,useValue:p1},{provide:yp,useValue:k({skipNextTransition:!!i?.skipInitialTransition},i)}];return po(9,e)}var qh=new Q("ROUTER_FORROOT_GUARD"),O1=[Pr,{provide:so,useClass:Xi},me,lo,{provide:Wt,useFactory:wp,deps:[me]},fc,[]],kp=(()=>{let e=class e{constructor(t){}static forRoot(t,r){return{ngModule:e,providers:[O1,[],{provide:ro,multi:!0,useValue:t},{provide:qh,useFactory:F1,deps:[[me,new hl,new vu]]},{provide:ho,useValue:r||{}},r?.useHash?A1():P1(),R1(),r?.preloadingStrategy?T1(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?V1(r):[],r?.bindToComponentInputs?D1().\u0275providers:[],r?.enableViewTransitions?N1().\u0275providers:[],L1()]}}static forChild(t){return{ngModule:e,providers:[{provide:ro,multi:!0,useValue:t}]}}};e.\u0275fac=function(r){return new(r||e)(j(qh,8))},e.\u0275mod=Ge({type:e}),e.\u0275inj=He({});let i=e;return i})();function R1(){return{provide:xp,useFactory:()=>{let i=R(rh),e=R(Pe),n=R(ho),t=R(gc),r=R(so);return n.scrollOffset&&i.setOffset(n.scrollOffset),new M1(r,t,i,e,n)}}}function A1(){return{provide:Ar,useClass:Yu}}function P1(){return{provide:Ar,useClass:Xu}}function F1(i){return"guarded"}function V1(i){return[i.initialNavigation==="disabled"?I1().\u0275providers:[],i.initialNavigation==="enabledBlocking"?k1().\u0275providers:[]]}var $h=new Q("");function L1(){return[{provide:$h,useFactory:Sp},{provide:ps,multi:!0,useExisting:$h}]}var re=(()=>{let e=class e{constructor(){this.show="undefined",this.check="nothing",this.createMemoTab=void 0,this.qrCodeData=void 0,this.componentStates={},this.setPublishMemId=t=>this.publishMemId=t}setQrCodeData(t){this.qrCodeData=t}showMother(t){this.show=t}toggleCheck(t){this.check=t}setCreateMemoTabs(t){this.createMemoTab=t,t||this.setQrCodeData(void 0)}setUserData(t){this.userData=t}setMemId(t){this.memId=t}getUserData(){return this.userData}setAuthData(t){this.authData=t}getAuthData(){return this.authData}setUserDetail(t){this.UserDetail=t}getUserDetail(){return this.UserDetail}setEditMemo(t){console.log(t),this.editMemo=t}getEditMemo(){return this.editMemo}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var ft=(()=>{let e=class e{constructor(){}write(t,r){r&&(r=JSON.stringify(r)),localStorage.setItem(t,r)}read(t){let r=localStorage.getItem(t);if(r&&r!="undefined"&&r!="null")return JSON.parse(r)}readArray(t){let r=localStorage.getItem(t);return r&&r!="undefined"&&r!="null"?r:null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var K=(()=>{let e=class e{constructor(t,r){this.http=t,this.localstorage=r,this.baseUrl="https://3f5f-102-89-47-68.ngrok-free.app/api",this.geoApiKey="39f835849b07490f9ada6d2e31447933"}makeGetRequest(t,r={}){return this.http.get(`${this.baseUrl}${t}`,{headers:this.returnHeader()})}makePostRequest(t,r={},o=!1){let s=o?void 0:this.returnHeader();return this.http.post(`${this.baseUrl}${t}`,r,{headers:s})}makePatchRequest(t,r={}){return this.http.patch(`${this.baseUrl}${t}`,r,{headers:this.returnHeader()})}makeDeleteRequest(t,r={}){return this.http.delete(`${this.baseUrl}${t}`,{headers:this.returnHeader()})}fetchLocation(t){return this.http.get(`https://ipapi.co/${t}/json/`)}fetchAreaDetails(t){let r=`https://api.opencagedata.com/geocode/v1/json?q=${encodeURIComponent(t)}&key=${this.geoApiKey}`;return this.http.get(r)}returnHeader(){return new st({"ngrok-skip-browser-warning":"69420","Content-Type":"application/json",Authorization:`Bearer ${this.localstorage.read("data")}`})}};e.\u0275fac=function(r){return new(r||e)(j(oi),j(ft))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var Hs=(()=>{let e=class e{constructor(t,r){this.sidebarService=t,this.httpRequet=r,this.user={}}ngOnInit(){let t=this.httpRequet.makeGetRequest("/auth/user").subscribe(r=>{this.user=r.data,console.log(this?.user?.last_name)},r=>{console.log(r)})}};e.\u0275fac=function(r){return new(r||e)(C(re),C(K))},e.\u0275cmp=A({type:e,selectors:[["app-header"]],standalone:!0,features:[V],decls:122,vars:2,consts:[[1,"header","d-print-none"],[1,"header-container"],[1,"header-body"],[1,"header-body-left"],[1,"navbar-nav"],[1,"nav-item","navigation-toggler"],["href","#",1,"nav-link"],[1,"ti-menu","cursor-pointer"],[1,"nav-item"],[1,"header-search-form"],[1,"input-group"],[1,"input-group-prepend"],[1,"btn"],[1,"ti-search"],["type","text","placeholder","Search something...",1,"form-control"],[1,"input-group-append"],[1,"btn","header-search-close-btn"],["data-feather","x"],[1,"header-body-right"],["href","#","title","Search",1,"nav-link","mobile-header-search-btn"],[1,"nav-item","dropdown"],["href","#","title","Notifications","data-toggle","dropdown",1,"nav-link","nav-link-notify"],[1,"ti-bell"],[1,"dropdown-menu","dropdown-menu-right","dropdown-menu-big"],[1,"bg-primary","px-3","py-3"],[1,"mb-0"],[1,"dropdown-scroll"],[1,"list-group","list-group-flush"],["href","#",1,"list-group-item","d-flex","hide-show-toggler"],[1,"avatar","mr-3"],[1,"avatar-title","bg-secondary-bright","text-secondary","rounded-circle"],[1,"ti-server"],[1,"flex-grow-1"],["title","Mark as unread","data-toggle","tooltip",1,"hide-show-toggler-item","fa","fa-check","font-size-11","position-absolute","right-0","top-0","mr-3","mt-3"],[1,"text-muted","small"],["src","../../assets/media/image/user/man_avatar4.jpg","alt","avatar",1,"rounded-circle"],[1,"text-primary"],["title","Mark as read","data-toggle","tooltip",1,"hide-show-toggler-item","fa","fa-circle-o","font-size-11","position-absolute","right-0","top-0","mr-3","mt-3"],[1,"text-divider","text-center","small","pb-2","px-3"],[1,"avatar-title","bg-info-bright","text-info","rounded-circle"],[1,"fa","fa-cloud-upload"],[1,"avatar-title","bg-success-bright","text-success","rounded-circle"],[1,"ti-share"],[1,"px-3","py-2","text-right","border-top"],[1,"list-inline","small"],[1,"list-inline-item","mb-0"],["href","#"],[1,"mr-2","d-sm-inline","d-none"],["data-background-image","../../assets/media/image/image1.jpg",1,"text-center","py-4"],[1,"avatar","avatar-lg","mb-3","border-0"],["src","../../assets/media/image/user/man_avatar3.jpg","alt","image",1,"rounded-circle"],["href","#","data-sidebar-target","#settings",1,"list-group-item"],["href","http://bifor.laborasyon.com/login","data-sidebar-target","#settings",1,"list-group-item","text-danger"],[1,"pb-0","p-4"],[1,"mb-4"],[1,"d-flex","justify-content-between"],[1,"float-right"],[1,"progress",2,"height","5px"],["role","progressbar","aria-valuenow","68","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","bg-primary",2,"width","68%"],[1,"navbar-nav","ml-auto"],[1,"nav-item","header-toggler"],[1,"ti-arrow-down"],[1,"nav-item","sidebar-toggler"],[1,"ti-cloud"]],template:function(r,o){r&1&&(u(0,"div")(1,"div",0)(2,"div",1)(3,"div",2)(4,"div",3)(5,"ul",4)(6,"li",5)(7,"span",6),y(8,"i",7),d()(),u(9,"li",8)(10,"div",9)(11,"form")(12,"div",10)(13,"div",11)(14,"button",12),y(15,"i",13),d()(),y(16,"input",14),u(17,"div",15)(18,"button",16),y(19,"i",17),d()()()()()()()(),u(20,"div",18)(21,"ul",4)(22,"li",8)(23,"a",19),y(24,"i",13),d()(),u(25,"li",20)(26,"a",21),y(27,"i",22),d(),u(28,"div",23)(29,"div",24)(30,"h6",25),p(31,"Notifications"),d()(),u(32,"div",26)(33,"ul",27)(34,"li")(35,"a",28)(36,"div")(37,"figure",29)(38,"span",30),y(39,"i",31),d()()(),u(40,"div",32)(41,"p",25),p(42," Your storage space is running low! "),y(43,"i",33),d(),u(44,"span",34),p(45,"4 sec ago"),d()()()(),u(46,"li")(47,"a",28)(48,"div")(49,"figure",29),y(50,"img",35),d()(),u(51,"div")(52,"p",25)(53,"span",36),p(54,"Jonny Richie"),d(),p(55," uploaded new files "),y(56,"i",37),d(),u(57,"span",34),p(58,"20 min ago"),d()()()(),u(59,"li",38)(60,"span"),p(61,"Old notifications"),d()(),u(62,"li")(63,"a",28)(64,"div")(65,"figure",29)(66,"span",39),y(67,"i",40),d()()(),u(68,"div",32)(69,"p",25),p(70," Upgrade plan "),y(71,"i",33),d(),u(72,"span",34),p(73,"45 sec ago"),d()()()(),u(74,"li")(75,"a",28)(76,"div")(77,"figure",29)(78,"span",41),y(79,"i",42),d()()(),u(80,"div",32)(81,"p",25),p(82," A file has been shared "),y(83,"i",33),d(),u(84,"span",34),p(85,"58 sec ago"),d()()()()()(),u(86,"div",43)(87,"ul",44)(88,"li",45)(89,"a",46),p(90,"Mark All Read"),d()()()()()(),y(91,"li",20),u(92,"li",20)(93,"span",47),p(94),d(),u(95,"div",23)(96,"div",48)(97,"figure",49),y(98,"img",50),d(),u(99,"h5",25),p(100),d()(),u(101,"div",27)(102,"a",51),p(103,"Settings"),d(),u(104,"a",52),p(105,"Sign Out!"),d()(),u(106,"div",53)(107,"div",54)(108,"h6",55),p(109," Completed Tasks "),u(110,"span",56),p(111,"%68"),d()(),u(112,"div",57),y(113,"div",58),d()()()()()()()(),u(114,"ul",59)(115,"li",60)(116,"a",6),y(117,"i",61),d()(),u(118,"li",62)(119,"a",6),y(120,"i",63),d()()(),y(121,"div"),d()()()),r&2&&(g(94),z(o.user==null?null:o.user.last_name),g(6),z(o.user==null?null:o.user.last_name))},dependencies:[U]});let i=e;return i})();var Vp=(()=>{let e=class e{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}};e.\u0275fac=function(r){return new(r||e)(C(cn),C(_t))},e.\u0275dir=Ce({type:e});let i=e;return i})(),ta=(()=>{let e=class e extends Vp{};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=ln(e)))(o||e)}})(),e.\u0275dir=Ce({type:e,features:[xt]});let i=e;return i})(),Vn=new Q(""),j1={provide:Vn,useExisting:Nt(()=>bo),multi:!0},bo=(()=>{let e=class e extends ta{writeValue(t){this.setProperty("checked",t)}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=ln(e)))(o||e)}})(),e.\u0275dir=Ce({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,o){r&1&&E("change",function(a){return o.onChange(a.target.checked)})("blur",function(){return o.onTouched()})},features:[Ct([j1]),xt]});let i=e;return i})(),z1={provide:Vn,useExisting:Nt(()=>X),multi:!0};function B1(){let i=ii()?ii().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var U1=new Q(""),X=(()=>{let e=class e extends Vp{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!B1())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}};e.\u0275fac=function(r){return new(r||e)(C(cn),C(_t),C(U1,8))},e.\u0275dir=Ce({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&E("input",function(a){return o._handleInput(a.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(a){return o._compositionEnd(a.target.value)})},features:[Ct([z1]),xt]});let i=e;return i})();function Pn(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function Lp(i){return i!=null&&typeof i.length=="number"}var _o=new Q(""),na=new Q(""),q1=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ge=class{static min(e){return $1(e)}static max(e){return H1(e)}static required(e){return jp(e)}static requiredTrue(e){return G1(e)}static email(e){return W1(e)}static minLength(e){return K1(e)}static maxLength(e){return J1(e)}static pattern(e){return Q1(e)}static nullValidator(e){return Ws(e)}static compose(e){return Hp(e)}static composeAsync(e){return Gp(e)}};function $1(i){return e=>{if(Pn(e.value)||Pn(i))return null;let n=parseFloat(e.value);return!isNaN(n)&&n<i?{min:{min:i,actual:e.value}}:null}}function H1(i){return e=>{if(Pn(e.value)||Pn(i))return null;let n=parseFloat(e.value);return!isNaN(n)&&n>i?{max:{max:i,actual:e.value}}:null}}function jp(i){return Pn(i.value)?{required:!0}:null}function G1(i){return i.value===!0?null:{required:!0}}function W1(i){return Pn(i.value)||q1.test(i.value)?null:{email:!0}}function K1(i){return e=>Pn(e.value)||!Lp(e.value)?null:e.value.length<i?{minlength:{requiredLength:i,actualLength:e.value.length}}:null}function J1(i){return e=>Lp(e.value)&&e.value.length>i?{maxlength:{requiredLength:i,actualLength:e.value.length}}:null}function Q1(i){if(!i)return Ws;let e,n;return typeof i=="string"?(n="",i.charAt(0)!=="^"&&(n+="^"),n+=i,i.charAt(i.length-1)!=="$"&&(n+="$"),e=new RegExp(n)):(n=i.toString(),e=i),t=>{if(Pn(t.value))return null;let r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}function Ws(i){return null}function zp(i){return i!=null}function Bp(i){return hs(i)?Te(i):i}function Up(i){let e={};return i.forEach(n=>{e=n!=null?k(k({},e),n):e}),Object.keys(e).length===0?null:e}function qp(i,e){return e.map(n=>n(i))}function X1(i){return!i.validate}function $p(i){return i.map(e=>X1(e)?e:n=>e.validate(n))}function Hp(i){if(!i)return null;let e=i.filter(zp);return e.length==0?null:function(n){return Up(qp(n,e))}}function wc(i){return i!=null?Hp($p(i)):null}function Gp(i){if(!i)return null;let e=i.filter(zp);return e.length==0?null:function(n){let t=qp(n,e).map(Bp);return cu(t).pipe(G(Up))}}function Sc(i){return i!=null?Gp($p(i)):null}function Ip(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function Wp(i){return i._rawValidators}function Kp(i){return i._rawAsyncValidators}function yc(i){return i?Array.isArray(i)?i:[i]:[]}function Ks(i,e){return Array.isArray(i)?i.includes(e):i===e}function Tp(i,e){let n=yc(e);return yc(i).forEach(r=>{Ks(n,r)||n.push(r)}),n}function Dp(i,e){return yc(e).filter(n=>!Ks(i,n))}var Js=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=wc(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Sc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},fn=class extends Js{get formDirective(){return null}get path(){return null}},ci=class extends Js{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Qs=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},Y1={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},GI=H(k({},Y1),{"[class.ng-submitted]":"isSubmitted"}),Y=(()=>{let e=class e extends Qs{constructor(t){super(t)}};e.\u0275fac=function(r){return new(r||e)(C(ci,2))},e.\u0275dir=Ce({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&$t("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[xt]});let i=e;return i})(),ae=(()=>{let e=class e extends Qs{constructor(t){super(t)}};e.\u0275fac=function(r){return new(r||e)(C(fn,10))},e.\u0275dir=Ce({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){r&2&&$t("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[xt]});let i=e;return i})();var fo="VALID",Gs="INVALID",ir="PENDING",mo="DISABLED",Fn=class{},Xs=class extends Fn{constructor(e,n){super(),this.value=e,this.source=n}},vo=class extends Fn{constructor(e,n){super(),this.pristine=e,this.source=n}},yo=class extends Fn{constructor(e,n){super(),this.touched=e,this.source=n}},rr=class extends Fn{constructor(e,n){super(),this.status=e,this.source=n}},bc=class extends Fn{constructor(e){super(),this.source=e}},_c=class extends Fn{constructor(e){super(),this.source=e}};function Ec(i){return(ia(i)?i.validators:i)||null}function Z1(i){return Array.isArray(i)?wc(i):i||null}function Mc(i,e){return(ia(e)?e.asyncValidators:i)||null}function eb(i){return Array.isArray(i)?Sc(i):i||null}function ia(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function Jp(i,e,n){let t=i.controls;if(!(e?Object.keys(t):t).length)throw new ce(1e3,"");if(!t[n])throw new ce(1001,"")}function Qp(i,e,n){i._forEachChild((t,r)=>{if(n[r]===void 0)throw new ce(1002,"")})}var or=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=qi(()=>this.statusReactive()),this.statusReactive=Li(void 0),this._pristine=qi(()=>this.pristineReactive()),this.pristineReactive=Li(!0),this._touched=qi(()=>this.touchedReactive()),this.touchedReactive=Li(!1),this._events=new Be,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return un(this.statusReactive)}set status(e){un(()=>this.statusReactive.set(e))}get valid(){return this.status===fo}get invalid(){return this.status===Gs}get pending(){return this.status==ir}get disabled(){return this.status===mo}get enabled(){return this.status!==mo}get pristine(){return un(this.pristineReactive)}set pristine(e){un(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return un(this.touchedReactive)}set touched(e){un(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Tp(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Tp(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Dp(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Dp(e,this._rawAsyncValidators))}hasValidator(e){return Ks(this._rawValidators,e)}hasAsyncValidator(e){return Ks(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let n=this.touched===!1;this.touched=!0;let t=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(H(k({},e),{sourceControl:t})),n&&e.emitEvent!==!1&&this._events.next(new yo(!0,t))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){let n=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let t=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:t})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t),n&&e.emitEvent!==!1&&this._events.next(new yo(!1,t))}markAsDirty(e={}){let n=this.pristine===!0;this.pristine=!1;let t=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(H(k({},e),{sourceControl:t})),n&&e.emitEvent!==!1&&this._events.next(new vo(!1,t))}markAsPristine(e={}){let n=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let t=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),n&&e.emitEvent!==!1&&this._events.next(new vo(!0,t))}markAsPending(e={}){this.status=ir;let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new rr(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(H(k({},e),{sourceControl:n}))}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=mo,this.errors=null,this._forEachChild(r=>{r.disable(H(k({},e),{onlySelf:!0}))}),this._updateValue();let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Xs(this.value,t)),this._events.next(new rr(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(H(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=fo,this._forEachChild(t=>{t.enable(H(k({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(H(k({},e),{skipPristineCheck:n}),this),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let t=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===fo||this.status===ir)&&this._runAsyncValidator(t,e.emitEvent)}let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Xs(this.value,n)),this._events.next(new rr(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(H(k({},e),{sourceControl:n}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mo:fo}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=ir,this._hasOwnPendingAsyncValidator={emitEvent:n!==!1};let t=Bp(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1,this,n.shouldHaveEmitted)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((t,r)=>t&&t._find(r),this)}getError(e,n){let t=n?this.get(n):this;return t&&t.errors?t.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,t){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||t)&&this._events.next(new rr(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,t)}_initObservables(){this.valueChanges=new We,this.statusChanges=new We}_calculateStatus(){return this._allControlsDisabled()?mo:this.errors?Gs:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ir)?ir:this._anyControlsHaveStatus(Gs)?Gs:fo}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){let t=!this._anyControlsDirty(),r=this.pristine!==t;this.pristine=t,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),r&&this._events.next(new vo(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new yo(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){ia(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Z1(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=eb(this._rawAsyncValidators)}},Et=class extends or{constructor(e,n,t){super(Ec(n),Mc(t,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,t={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Qp(this,!0,e),Object.keys(e).forEach(t=>{Jp(this,!0,t),this.controls[t].setValue(e[t],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(t=>{let r=this.controls[t];r&&r.patchValue(e[t],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((t,r)=>{t.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,t)=>(e[t]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,t)=>t._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let t=this.controls[n];t&&e(t,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,t]of Object.entries(this.controls))if(this.contains(n)&&e(t))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,t,r)=>((t.enabled||this.disabled)&&(n[r]=t.value),n))}_reduceChildren(e,n){let t=e;return this._forEachChild((r,o)=>{t=n(t,r,o)}),t}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var xc=class extends Et{};var xo=new Q("CallSetDisabledState",{providedIn:"root",factory:()=>ra}),ra="always";function Xp(i,e){return[...e.path,i]}function Ys(i,e,n=ra){kc(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),nb(i,e),rb(i,e),ib(i,e),tb(i,e)}function Np(i,e,n=!0){let t=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(t),e.valueAccessor.registerOnTouched(t)),ea(i,e),i&&(e._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function Zs(i,e){i.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function tb(i,e){if(e.valueAccessor.setDisabledState){let n=t=>{e.valueAccessor.setDisabledState(t)};i.registerOnDisabledChange(n),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(n)})}}function kc(i,e){let n=Wp(i);e.validator!==null?i.setValidators(Ip(n,e.validator)):typeof n=="function"&&i.setValidators([n]);let t=Kp(i);e.asyncValidator!==null?i.setAsyncValidators(Ip(t,e.asyncValidator)):typeof t=="function"&&i.setAsyncValidators([t]);let r=()=>i.updateValueAndValidity();Zs(e._rawValidators,r),Zs(e._rawAsyncValidators,r)}function ea(i,e){let n=!1;if(i!==null){if(e.validator!==null){let r=Wp(i);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.validator);o.length!==r.length&&(n=!0,i.setValidators(o))}}if(e.asyncValidator!==null){let r=Kp(i);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==e.asyncValidator);o.length!==r.length&&(n=!0,i.setAsyncValidators(o))}}}let t=()=>{};return Zs(e._rawValidators,t),Zs(e._rawAsyncValidators,t),n}function nb(i,e){e.valueAccessor.registerOnChange(n=>{i._pendingValue=n,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&Yp(i,e)})}function ib(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&Yp(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function Yp(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function rb(i,e){let n=(t,r)=>{e.valueAccessor.writeValue(t),r&&e.viewToModelUpdate(t)};i.registerOnChange(n),e._registerOnDestroy(()=>{i._unregisterOnChange(n)})}function Zp(i,e){i==null,kc(i,e)}function ob(i,e){return ea(i,e)}function ef(i,e){if(!i.hasOwnProperty("model"))return!1;let n=i.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function sb(i){return Object.getPrototypeOf(i.constructor)===ta}function tf(i,e){i._syncPendingControls(),e.forEach(n=>{let t=n.control;t.updateOn==="submit"&&t._pendingChange&&(n.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function nf(i,e){if(!e)return null;Array.isArray(e);let n,t,r;return e.forEach(o=>{o.constructor===X?n=o:sb(o)?t=o:r=o}),r||t||n||null}function ab(i,e){let n=i.indexOf(e);n>-1&&i.splice(n,1)}var lb={provide:fn,useExisting:Nt(()=>Mt)},go=Promise.resolve(),Mt=(()=>{let e=class e extends fn{get submitted(){return un(this.submittedReactive)}constructor(t,r,o){super(),this.callSetDisabledState=o,this._submitted=qi(()=>this.submittedReactive()),this.submittedReactive=Li(!1),this._directives=new Set,this.ngSubmit=new We,this.form=new Et({},wc(t),Sc(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){go.then(()=>{let r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),Ys(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){go.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){go.then(()=>{let r=this._findContainer(t.path),o=new Et({});Zp(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){go.then(()=>{let r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){go.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),tf(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}};e.\u0275fac=function(r){return new(r||e)(C(_o,10),C(na,10),C(xo,8))},e.\u0275dir=Ce({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){r&1&&E("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ct([lb]),xt]});let i=e;return i})();function Op(i,e){let n=i.indexOf(e);n>-1&&i.splice(n,1)}function Rp(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var se=class extends or{constructor(e=null,n,t){super(Ec(n),Mc(t,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ia(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Rp(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(t=>t(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Op(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Op(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Rp(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var cb=i=>i instanceof se;var db={provide:ci,useExisting:Nt(()=>Re)},Ap=Promise.resolve(),Re=(()=>{let e=class e extends ci{constructor(t,r,o,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new se,this._registered=!1,this.name="",this.update=new We,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=nf(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),ef(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ys(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Ap.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,o=r!==0&&ni(r);Ap.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?Xp(t,this._parent):[t]}};e.\u0275fac=function(r){return new(r||e)(C(fn,9),C(_o,10),C(na,10),C(Vn,10),C(Rr,8),C(xo,8))},e.\u0275dir=Ce({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ct([db]),xt,Bt]});let i=e;return i})(),le=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ce({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let i=e;return i})();var rf=new Q("");var ub={provide:fn,useExisting:Nt(()=>Me)},Me=(()=>{let e=class e extends fn{get submitted(){return un(this._submittedReactive)}set submitted(t){this._submittedReactive.set(t)}constructor(t,r,o){super(),this.callSetDisabledState=o,this._submitted=qi(()=>this._submittedReactive()),this._submittedReactive=Li(!1),this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new We,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ea(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){let r=this.form.get(t.path);return Ys(r,t,this.callSetDisabledState),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){Np(t.control||null,t,!1),ab(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this._submittedReactive.set(!0),tf(this.form,this.directives),this.ngSubmit.emit(t),this.form._events.next(new bc(this.control)),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this._submittedReactive.set(!1),this.form._events.next(new _c(this.form))}_updateDomValue(){this.directives.forEach(t=>{let r=t.control,o=this.form.get(t.path);r!==o&&(Np(r||null,t),cb(o)&&(Ys(o,t,this.callSetDisabledState),t.control=o))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){let r=this.form.get(t.path);Zp(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){let r=this.form.get(t.path);r&&ob(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){kc(this.form,this),this._oldForm&&ea(this._oldForm,this)}_checkFormPresent(){this.form}};e.\u0275fac=function(r){return new(r||e)(C(_o,10),C(na,10),C(xo,8))},e.\u0275dir=Ce({type:e,selectors:[["","formGroup",""]],hostBindings:function(r,o){r&1&&E("submit",function(a){return o.onSubmit(a)})("reset",function(){return o.onReset()})},inputs:{form:[0,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ct([ub]),xt,Bt]});let i=e;return i})();var hb={provide:ci,useExisting:Nt(()=>ke)},ke=(()=>{let e=class e extends ci{set isDisabled(t){}constructor(t,r,o,s,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.name=null,this.update=new We,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=nf(this,s)}ngOnChanges(t){this._added||this._setUpControl(),ef(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return Xp(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}};e._ngModelWarningSentOnce=!1,e.\u0275fac=function(r){return new(r||e)(C(fn,13),C(_o,10),C(na,10),C(Vn,10),C(rf,8))},e.\u0275dir=Ce({type:e,selectors:[["","formControlName",""]],inputs:{name:[0,"formControlName","name"],isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Ct([hb]),xt,Bt]});let i=e;return i})(),pb={provide:Vn,useExisting:Nt(()=>Ln),multi:!0};function of(i,e){return i==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function fb(i){return i.split(":")[0]}var Ln=(()=>{let e=class e extends ta{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),o=of(r,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=fb(t);return this._optionMap.has(r)?this._optionMap.get(r):t}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=ln(e)))(o||e)}})(),e.\u0275dir=Ce({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){r&1&&E("change",function(a){return o.onChange(a.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ct([pb]),xt]});let i=e;return i})(),jn=(()=>{let e=class e{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(of(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(C(_t),C(cn),C(Ln,9))},e.\u0275dir=Ce({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let i=e;return i})(),mb={provide:Vn,useExisting:Nt(()=>sf),multi:!0};function Pp(i,e){return i==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function gb(i){return i.split(":")[0]}var sf=(()=>{let e=class e extends ta{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let o=t.map(s=>this._getOptionId(s));r=(s,a)=>{s._setSelected(o.indexOf(a.toString())>-1)}}else r=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let o=[],s=r.selectedOptions;if(s!==void 0){let a=s;for(let l=0;l<a.length;l++){let c=a[l],h=this._getOptionValue(c.value);o.push(h)}}else{let a=r.options;for(let l=0;l<a.length;l++){let c=a[l];if(c.selected){let h=this._getOptionValue(c.value);o.push(h)}}}this.value=o,t(o)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=gb(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=ln(e)))(o||e)}})(),e.\u0275dir=Ce({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){r&1&&E("change",function(a){return o.onChange(a.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ct([mb]),xt]});let i=e;return i})(),zn=(()=>{let e=class e{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Pp(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Pp(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(C(_t),C(cn),C(sf,9))},e.\u0275dir=Ce({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let i=e;return i})();var vb=(()=>{let e=class e{constructor(){this._validator=Ws}ngOnChanges(t){if(this.inputName in t){let r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Ws,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return t!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=Ce({type:e,features:[Bt]});let i=e;return i})();var yb={provide:_o,useExisting:Nt(()=>lt),multi:!0};var lt=(()=>{let e=class e extends vb{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=ni,this.createValidator=t=>jp}enabled(t){return t}};e.\u0275fac=(()=>{let t;return function(o){return(t||(t=ln(e)))(o||e)}})(),e.\u0275dir=Ce({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,o){r&2&&ji("required",o._enabled?"":null)},inputs:{required:"required"},features:[Ct([yb]),xt]});let i=e;return i})();var af=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ge({type:e}),e.\u0275inj=He({});let i=e;return i})(),Cc=class extends or{constructor(e,n,t){super(Ec(n),Mc(t,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,t={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:t.emitEvent})}removeAt(e,n={}){let t=this._adjustIndex(e);t<0&&(t=0),this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){Qp(this,!1,e),e.forEach((t,r)=>{Jp(this,!1,r),this.at(r).setValue(t,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((t,r)=>{this.at(r)&&this.at(r).patchValue(t,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((t,r)=>{t.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,t)=>t._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,t)=>{e(n,t)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function Fp(i){return!!i&&(i.asyncValidators!==void 0||i.validators!==void 0||i.updateOn!==void 0)}var Je=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let t=new e;return t.useNonNullable=!0,t}group(t,r=null){let o=this._reduceControls(t),s={};return Fp(r)?s=r:r!==null&&(s.validators=r.validator,s.asyncValidators=r.asyncValidator),new Et(o,s)}record(t,r=null){let o=this._reduceControls(t);return new xc(o,r)}control(t,r,o){let s={};return this.useNonNullable?(Fp(r)?s=r:(s.validators=r,s.asyncValidators=o),new se(t,H(k({},s),{nonNullable:!0}))):new se(t,r,o)}array(t,r,o){let s=t.map(a=>this._createControl(a));return new Cc(s,r,o)}_reduceControls(t){let r={};return Object.keys(t).forEach(o=>{r[o]=this._createControl(t[o])}),r}_createControl(t){if(t instanceof se)return t;if(t instanceof or)return t;if(Array.isArray(t)){let r=t[0],o=t.length>1?t[1]:null,s=t.length>2?t[2]:null;return this.control(r,o,s)}else return this.control(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var ve=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:[{provide:xo,useValue:t.callSetDisabledState??ra}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ge({type:e}),e.\u0275inj=He({imports:[af]});let i=e;return i})(),oe=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:[{provide:rf,useValue:t.warnOnNgModelWithFormControl??"always"},{provide:xo,useValue:t.callSetDisabledState??ra}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ge({type:e}),e.\u0275inj=He({imports:[af]});let i=e;return i})();var lf=i=>typeof i>"u"||i===null,bb=i=>i.replace(/[A-Z]/g,e=>`-${e.toLowerCase()}`),_b=i=>{let e={};return Object.keys(i).forEach(n=>{i[n]&&(e[n]=i[n])}),e},oa=i=>{let e=_b(i);return Object.entries(e).map(([n,t])=>`${bb(n)}:${t}`).join(";")},sr=class extends Error{constructor(e){super(e),this.name=this.constructor.name}},Ic=()=>{let i=Date.now().toString(36),e=Math.random().toString(36).substring(2,7);return`${i}${e}`},cf=(i,e,n)=>Math.min(Math.max(i,e),n);function Qe(i){this.content=i}Qe.prototype={constructor:Qe,find:function(i){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===i)return e;return-1},get:function(i){var e=this.find(i);return e==-1?void 0:this.content[e+1]},update:function(i,e,n){var t=n&&n!=i?this.remove(n):this,r=t.find(i),o=t.content.slice();return r==-1?o.push(n||i,e):(o[r+1]=e,n&&(o[r]=n)),new Qe(o)},remove:function(i){var e=this.find(i);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Qe(n)},addToStart:function(i,e){return new Qe([i,e].concat(this.remove(i).content))},addToEnd:function(i,e){var n=this.remove(i).content.slice();return n.push(i,e),new Qe(n)},addBefore:function(i,e,n){var t=this.remove(e),r=t.content.slice(),o=t.find(i);return r.splice(o==-1?r.length:o,0,e,n),new Qe(r)},forEach:function(i){for(var e=0;e<this.content.length;e+=2)i(this.content[e],this.content[e+1])},prepend:function(i){return i=Qe.from(i),i.size?new Qe(i.content.concat(this.subtract(i).content)):this},append:function(i){return i=Qe.from(i),i.size?new Qe(this.subtract(i).content.concat(i.content)):this},subtract:function(i){var e=this;i=Qe.from(i);for(var n=0;n<i.content.length;n+=2)e=e.remove(i.content[n]);return e},toObject:function(){var i={};return this.forEach(function(e,n){i[e]=n}),i},get size(){return this.content.length>>1}};Qe.from=function(i){if(i instanceof Qe)return i;var e=[];if(i)for(var n in i)e.push(n,i[n]);return new Qe(e)};var Tc=Qe;function bf(i,e,n){for(let t=0;;t++){if(t==i.childCount||t==e.childCount)return i.childCount==e.childCount?null:n;let r=i.child(t),o=e.child(t);if(r==o){n+=r.nodeSize;continue}if(!r.sameMarkup(o))return n;if(r.isText&&r.text!=o.text){for(let s=0;r.text[s]==o.text[s];s++)n++;return n}if(r.content.size||o.content.size){let s=bf(r.content,o.content,n+1);if(s!=null)return s}n+=r.nodeSize}}function _f(i,e,n,t){for(let r=i.childCount,o=e.childCount;;){if(r==0||o==0)return r==o?null:{a:n,b:t};let s=i.child(--r),a=e.child(--o),l=s.nodeSize;if(s==a){n-=l,t-=l;continue}if(!s.sameMarkup(a))return{a:n,b:t};if(s.isText&&s.text!=a.text){let c=0,h=Math.min(s.text.length,a.text.length);for(;c<h&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,n--,t--;return{a:n,b:t}}if(s.content.size||a.content.size){let c=_f(s.content,a.content,n-1,t-1);if(c)return c}n-=l,t-=l}}var T=class i{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let t=0;t<e.length;t++)this.size+=e[t].nodeSize}nodesBetween(e,n,t,r=0,o){for(let s=0,a=0;a<n;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&t(l,r+a,o||null,s)!==!1&&l.content.size){let h=a+1;l.nodesBetween(Math.max(0,e-h),Math.min(l.content.size,n-h),t,r+h)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,t,r){let o="",s=!0;return this.nodesBetween(e,n,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,n-l):a.isLeaf?r?typeof r=="function"?r(a):r:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&t&&(s?s=!1:o+=t),o+=c},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,t=e.firstChild,r=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(t)&&(r[r.length-1]=n.withText(n.text+t.text),o=1);o<e.content.length;o++)r.push(e.content[o]);return new i(r,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let t=[],r=0;if(n>e)for(let o=0,s=0;s<n;o++){let a=this.content[o],l=s+a.nodeSize;l>e&&((s<e||l>n)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,n-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,n-s-1))),t.push(a),r+=a.nodeSize),s=l}return new i(t,r)}cutByIndex(e,n){return e==n?i.empty:e==0&&n==this.content.length?this:new i(this.content.slice(e,n))}replaceChild(e,n){let t=this.content[e];if(t==n)return this;let r=this.content.slice(),o=this.size+n.nodeSize-t.nodeSize;return r[e]=n,new i(r,o)}addToStart(e){return new i([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new i(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,t=0;n<this.content.length;n++){let r=this.content[n];e(r,t,n),t+=r.nodeSize}}findDiffStart(e,n=0){return bf(this,e,n)}findDiffEnd(e,n=this.size,t=e.size){return _f(this,e,n,t)}findIndex(e,n=-1){if(e==0)return sa(0,e);if(e==this.size)return sa(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let t=0,r=0;;t++){let o=this.child(t),s=r+o.nodeSize;if(s>=e)return s==e||n>0?sa(t+1,s):sa(t,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return i.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new i(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return i.empty;let n,t=0;for(let r=0;r<e.length;r++){let o=e[r];t+=o.nodeSize,r&&o.isText&&e[r-1].sameMarkup(o)?(n||(n=e.slice(0,r)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new i(n||e,t)}static from(e){if(!e)return i.empty;if(e instanceof i)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new i([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}};T.empty=new T([],0);var Dc={index:0,offset:0};function sa(i,e){return Dc.index=i,Dc.offset=e,Dc}function la(i,e){if(i===e)return!0;if(!(i&&typeof i=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(i);if(Array.isArray(e)!=n)return!1;if(n){if(i.length!=e.length)return!1;for(let t=0;t<i.length;t++)if(!la(i[t],e[t]))return!1}else{for(let t in i)if(!(t in e)||!la(i[t],e[t]))return!1;for(let t in e)if(!(t in i))return!1}return!0}var he=(()=>{class i{constructor(n,t){this.type=n,this.attrs=t}addToSet(n){let t,r=!1;for(let o=0;o<n.length;o++){let s=n[o];if(this.eq(s))return n;if(this.type.excludes(s.type))t||(t=n.slice(0,o));else{if(s.type.excludes(this.type))return n;!r&&s.type.rank>this.type.rank&&(t||(t=n.slice(0,o)),t.push(this),r=!0),t&&t.push(s)}}return t||(t=n.slice()),r||t.push(this),t}removeFromSet(n){for(let t=0;t<n.length;t++)if(this.eq(n[t]))return n.slice(0,t).concat(n.slice(t+1));return n}isInSet(n){for(let t=0;t<n.length;t++)if(this.eq(n[t]))return!0;return!1}eq(n){return this==n||this.type==n.type&&la(this.attrs,n.attrs)}toJSON(){let n={type:this.type.name};for(let t in this.attrs){n.attrs=this.attrs;break}return n}static fromJSON(n,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=n.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let o=r.create(t.attrs);return r.checkAttrs(o.attrs),o}static sameSet(n,t){if(n==t)return!0;if(n.length!=t.length)return!1;for(let r=0;r<n.length;r++)if(!n[r].eq(t[r]))return!1;return!0}static setFrom(n){if(!n||Array.isArray(n)&&n.length==0)return i.none;if(n instanceof i)return[n];let t=n.slice();return t.sort((r,o)=>r.type.rank-o.type.rank),t}}return i.none=[],i})(),hi=class extends Error{},O=class i{constructor(e,n,t){this.content=e,this.openStart=n,this.openEnd=t}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let t=Cf(this.content,e+this.openStart,n);return t&&new i(t,this.openStart,this.openEnd)}removeBetween(e,n){return new i(xf(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return i.empty;let t=n.openStart||0,r=n.openEnd||0;if(typeof t!="number"||typeof r!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new i(T.fromJSON(e,n.content),t,r)}static maxOpen(e,n=!0){let t=0,r=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)t++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)r++;return new i(e,t,r)}};O.empty=new O(T.empty,0,0);function xf(i,e,n){let{index:t,offset:r}=i.findIndex(e),o=i.maybeChild(t),{index:s,offset:a}=i.findIndex(n);if(r==e||o.isText){if(a!=n&&!i.child(s).isText)throw new RangeError("Removing non-flat range");return i.cut(0,e).append(i.cut(n))}if(t!=s)throw new RangeError("Removing non-flat range");return i.replaceChild(t,o.copy(xf(o.content,e-r-1,n-r-1)))}function Cf(i,e,n,t){let{index:r,offset:o}=i.findIndex(e),s=i.maybeChild(r);if(o==e||s.isText)return t&&!t.canReplace(r,r,n)?null:i.cut(0,e).append(n).append(i.cut(e));let a=Cf(s.content,e-o-1,n);return a&&i.replaceChild(r,s.copy(a))}function xb(i,e,n){if(n.openStart>i.depth)throw new hi("Inserted content deeper than insertion position");if(i.depth-n.openStart!=e.depth-n.openEnd)throw new hi("Inconsistent open depths");return wf(i,e,n,0)}function wf(i,e,n,t){let r=i.index(t),o=i.node(t);if(r==e.index(t)&&t<i.depth-n.openStart){let s=wf(i,e,n,t+1);return o.copy(o.content.replaceChild(r,s))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&i.depth==t&&e.depth==t){let s=i.parent,a=s.content;return ui(s,a.cut(0,i.parentOffset).append(n.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=Cb(n,i);return ui(o,Ef(i,s,a,e,t))}else return ui(o,ca(i,e,t))}function Sf(i,e){if(!e.type.compatibleContent(i.type))throw new hi("Cannot join "+e.type.name+" onto "+i.type.name)}function Oc(i,e,n){let t=i.node(n);return Sf(t,e.node(n)),t}function di(i,e){let n=e.length-1;n>=0&&i.isText&&i.sameMarkup(e[n])?e[n]=i.withText(e[n].text+i.text):e.push(i)}function Co(i,e,n,t){let r=(e||i).node(n),o=0,s=e?e.index(n):r.childCount;i&&(o=i.index(n),i.depth>n?o++:i.textOffset&&(di(i.nodeAfter,t),o++));for(let a=o;a<s;a++)di(r.child(a),t);e&&e.depth==n&&e.textOffset&&di(e.nodeBefore,t)}function ui(i,e){return i.type.checkContent(e),i.copy(e)}function Ef(i,e,n,t,r){let o=i.depth>r&&Oc(i,e,r+1),s=t.depth>r&&Oc(n,t,r+1),a=[];return Co(null,i,r,a),o&&s&&e.index(r)==n.index(r)?(Sf(o,s),di(ui(o,Ef(i,e,n,t,r+1)),a)):(o&&di(ui(o,ca(i,e,r+1)),a),Co(e,n,r,a),s&&di(ui(s,ca(n,t,r+1)),a)),Co(t,null,r,a),new T(a)}function ca(i,e,n){let t=[];if(Co(null,i,n,t),i.depth>n){let r=Oc(i,e,n+1);di(ui(r,ca(i,e,n+1)),t)}return Co(e,null,n,t),new T(t)}function Cb(i,e){let n=e.depth-i.openStart,r=e.node(n).copy(i.content);for(let o=n-1;o>=0;o--)r=e.node(o).copy(T.from(r));return{start:r.resolveNoCache(i.openStart+n),end:r.resolveNoCache(r.content.size-i.openEnd-n)}}var da=class i{constructor(e,n,t){this.pos=e,this.path=n,this.parentOffset=t,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let t=this.pos-this.path[this.path.length-1],r=e.child(n);return t?e.child(n).cut(t):r}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let t=this.path[n*3],r=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)r+=t.child(o).nodeSize;return r}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return he.none;if(this.textOffset)return e.child(n).marks;let t=e.maybeChild(n-1),r=e.maybeChild(n);if(!t){let a=t;t=r,r=a}let o=t.marks;for(var s=0;s<o.length;s++)o[s].type.spec.inclusive===!1&&(!r||!o[s].isInSet(r.marks))&&(o=o[s--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let t=n.marks,r=e.parent.maybeChild(e.index());for(var o=0;o<t.length;o++)t[o].type.spec.inclusive===!1&&(!r||!t[o].isInSet(r.marks))&&(t=t[o--].removeFromSet(t));return t}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let t=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);t>=0;t--)if(e.pos<=this.end(t)&&(!n||n(this.node(t))))return new pi(this,e,t);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let t=[],r=0,o=n;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(o),c=o-l;if(t.push(s,a,r+l),!c||(s=s.child(a),s.isText))break;o=c-1,r+=l+1}return new i(n,t,o)}static resolveCached(e,n){let t=df.get(e);if(t)for(let o=0;o<t.elts.length;o++){let s=t.elts[o];if(s.pos==n)return s}else df.set(e,t=new Rc);let r=t.elts[t.i]=i.resolve(e,n);return t.i=(t.i+1)%wb,r}},Rc=class{constructor(){this.elts=[],this.i=0}},wb=12,df=new WeakMap,pi=class{constructor(e,n,t){this.$from=e,this.$to=n,this.depth=t}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}},Sb=Object.create(null),Jt=class i{constructor(e,n,t,r=he.none){this.type=e,this.attrs=n,this.marks=r,this.content=t||T.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,t,r=0){this.content.nodesBetween(e,n,t,r,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,t,r){return this.content.textBetween(e,n,t,r)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,t){return this.type==e&&la(this.attrs,n||e.defaultAttrs||Sb)&&he.sameSet(this.marks,t||he.none)}copy(e=null){return e==this.content?this:new i(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new i(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,t=!1){if(e==n)return O.empty;let r=this.resolve(e),o=this.resolve(n),s=t?0:r.sharedDepth(n),a=r.start(s),c=r.node(s).content.cut(r.pos-a,o.pos-a);return new O(c,r.depth-s,o.depth-s)}replace(e,n,t){return xb(this.resolve(e),this.resolve(n),t)}nodeAt(e){for(let n=this;;){let{index:t,offset:r}=n.content.findIndex(e);if(n=n.maybeChild(t),!n)return null;if(r==e||n.isText)return n;e-=r+1}}childAfter(e){let{index:n,offset:t}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:t}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:t}=this.content.findIndex(e);if(t<e)return{node:this.content.child(n),index:n,offset:t};let r=this.content.child(n-1);return{node:r,index:n-1,offset:t-r.nodeSize}}resolve(e){return da.resolveCached(this,e)}resolveNoCache(e){return da.resolve(this,e)}rangeHasMark(e,n,t){let r=!1;return n>e&&this.nodesBetween(e,n,o=>(t.isInSet(o.marks)&&(r=!0),!r)),r}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Mf(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,t=T.empty,r=0,o=t.childCount){let s=this.contentMatchAt(e).matchFragment(t,r,o),a=s&&s.matchFragment(this.content,n);if(!a||!a.validEnd)return!1;for(let l=r;l<o;l++)if(!this.type.allowsMarks(t.child(l).marks))return!1;return!0}canReplaceWith(e,n,t,r){if(r&&!this.type.allowsMarks(r))return!1;let o=this.contentMatchAt(e).matchType(t),s=o&&o.matchFragment(this.content,n);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=he.none;for(let n=0;n<this.marks.length;n++){let t=this.marks[n];t.type.checkAttrs(t.attrs),e=t.addToSet(e)}if(!he.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let t;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");t=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,t)}let r=T.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,r,t);return o.type.checkAttrs(o.attrs),o}};Jt.prototype.text=void 0;var Ac=class i extends Jt{constructor(e,n,t,r){if(super(e,n,null,r),!t)throw new RangeError("Empty text nodes are not allowed");this.text=t}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Mf(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new i(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new i(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}};function Mf(i,e){for(let n=i.length-1;n>=0;n--)e=i[n].type.name+"("+e+")";return e}var fi=class i{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let t=new Pc(e,n);if(t.next==null)return i.empty;let r=kf(t);t.next&&t.err("Unexpected trailing text");let o=Nb(Db(r));return Ob(o,t),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,t=e.childCount){let r=this;for(let o=n;r&&o<t;o++)r=r.matchType(e.child(o).type);return r}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let t=0;t<e.next.length;t++)if(this.next[n].type==e.next[t].type)return!0;return!1}fillBefore(e,n=!1,t=0){let r=[this];function o(s,a){let l=s.matchFragment(e,t);if(l&&(!n||l.validEnd))return T.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:h,next:f}=s.next[c];if(!(h.isText||h.hasRequiredAttrs())&&r.indexOf(f)==-1){r.push(f);let m=o(f,a.concat(h));if(m)return m}}return null}return o(this,[])}findWrapping(e){for(let t=0;t<this.wrapCache.length;t+=2)if(this.wrapCache[t]==e)return this.wrapCache[t+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),t=[{match:this,type:null,via:null}];for(;t.length;){let r=t.shift(),o=r.match;if(o.matchType(e)){let s=[];for(let a=r;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<o.next.length;s++){let{type:a,next:l}=o.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in n)&&(!r.type||l.validEnd)&&(t.push({match:a.contentMatch,type:a,via:r}),n[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(t){e.push(t);for(let r=0;r<t.next.length;r++)e.indexOf(t.next[r].next)==-1&&n(t.next[r].next)}return n(this),e.map((t,r)=>{let o=r+(t.validEnd?"*":" ")+" ";for(let s=0;s<t.next.length;s++)o+=(s?", ":"")+t.next[s].type.name+"->"+e.indexOf(t.next[s].next);return o}).join(`
`)}};fi.empty=new fi(!0);var Pc=class{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}};function kf(i){let e=[];do e.push(Eb(i));while(i.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function Eb(i){let e=[];do e.push(Mb(i));while(i.next&&i.next!=")"&&i.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function Mb(i){let e=Tb(i);for(;;)if(i.eat("+"))e={type:"plus",expr:e};else if(i.eat("*"))e={type:"star",expr:e};else if(i.eat("?"))e={type:"opt",expr:e};else if(i.eat("{"))e=kb(i,e);else break;return e}function uf(i){/\D/.test(i.next)&&i.err("Expected number, got '"+i.next+"'");let e=Number(i.next);return i.pos++,e}function kb(i,e){let n=uf(i),t=n;return i.eat(",")&&(i.next!="}"?t=uf(i):t=-1),i.eat("}")||i.err("Unclosed braced range"),{type:"range",min:n,max:t,expr:e}}function Ib(i,e){let n=i.nodeTypes,t=n[e];if(t)return[t];let r=[];for(let o in n){let s=n[o];s.groups.indexOf(e)>-1&&r.push(s)}return r.length==0&&i.err("No node type or group '"+e+"' found"),r}function Tb(i){if(i.eat("(")){let e=kf(i);return i.eat(")")||i.err("Missing closing paren"),e}else if(/\W/.test(i.next))i.err("Unexpected token '"+i.next+"'");else{let e=Ib(i,i.next).map(n=>(i.inline==null?i.inline=n.isInline:i.inline!=n.isInline&&i.err("Mixing inline and block content"),{type:"name",value:n}));return i.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Db(i){let e=[[]];return r(o(i,0),n()),e;function n(){return e.push([])-1}function t(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function r(s,a){s.forEach(l=>l.to=a)}function o(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(o(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=o(s.exprs[l],a);if(l==s.exprs.length-1)return c;r(c,a=n())}else if(s.type=="star"){let l=n();return t(a,l),r(o(s.expr,l),l),[t(l)]}else if(s.type=="plus"){let l=n();return r(o(s.expr,a),l),r(o(s.expr,l),l),[t(l)]}else{if(s.type=="opt")return[t(a)].concat(o(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let h=n();r(o(s.expr,l),h),l=h}if(s.max==-1)r(o(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let h=n();t(l,h),r(o(s.expr,l),h),l=h}return[t(l)]}else{if(s.type=="name")return[t(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function If(i,e){return e-i}function hf(i,e){let n=[];return t(e),n.sort(If);function t(r){let o=i[r];if(o.length==1&&!o[0].term)return t(o[0].to);n.push(r);for(let s=0;s<o.length;s++){let{term:a,to:l}=o[s];!a&&n.indexOf(l)==-1&&t(l)}}}function Nb(i){let e=Object.create(null);return n(hf(i,0));function n(t){let r=[];t.forEach(s=>{i[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let h=0;h<r.length;h++)r[h][0]==a&&(c=r[h][1]);hf(i,l).forEach(h=>{c||r.push([a,c=[]]),c.indexOf(h)==-1&&c.push(h)})})});let o=e[t.join(",")]=new fi(t.indexOf(i.length-1)>-1);for(let s=0;s<r.length;s++){let a=r[s][1].sort(If);o.next.push({type:r[s][0],next:e[a.join(",")]||n(a)})}return o}}function Ob(i,e){for(let n=0,t=[i];n<t.length;n++){let r=t[n],o=!r.validEnd,s=[];for(let a=0;a<r.next.length;a++){let{type:l,next:c}=r.next[a];s.push(l.name),o&&!(l.isText||l.hasRequiredAttrs())&&(o=!1),t.indexOf(c)==-1&&t.push(c)}o&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Tf(i){let e=Object.create(null);for(let n in i){let t=i[n];if(!t.hasDefault)return null;e[n]=t.default}return e}function Df(i,e){let n=Object.create(null);for(let t in i){let r=e&&e[t];if(r===void 0){let o=i[t];if(o.hasDefault)r=o.default;else throw new RangeError("No value supplied for attribute "+t)}n[t]=r}return n}function Nf(i,e,n,t){for(let r in e)if(!(r in i))throw new RangeError(`Unsupported attribute ${r} for ${n} of type ${r}`);for(let r in i){let o=i[r];o.validate&&o.validate(e[r])}}function Of(i,e){let n=Object.create(null);if(e)for(let t in e)n[t]=new Fc(i,t,e[t]);return n}var ua=class i{constructor(e,n,t){this.name=e,this.schema=n,this.spec=t,this.markSet=null,this.groups=t.group?t.group.split(" "):[],this.attrs=Of(e,t.attrs),this.defaultAttrs=Tf(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(t.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==fi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Df(this.attrs,e)}create(e=null,n,t){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Jt(this,this.computeAttrs(e),T.from(n),he.setFrom(t))}createChecked(e=null,n,t){return n=T.from(n),this.checkContent(n),new Jt(this,this.computeAttrs(e),n,he.setFrom(t))}createAndFill(e=null,n,t){if(e=this.computeAttrs(e),n=T.from(n),n.size){let s=this.contentMatch.fillBefore(n);if(!s)return null;n=s.append(n)}let r=this.contentMatch.matchFragment(n),o=r&&r.fillBefore(T.empty,!0);return o?new Jt(this,e,n.append(o),he.setFrom(t)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let t=0;t<e.childCount;t++)if(!this.allowsMarks(e.child(t).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Nf(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let t=0;t<e.length;t++)this.allowsMarkType(e[t].type)?n&&n.push(e[t]):n||(n=e.slice(0,t));return n?n.length?n:he.none:e}static compile(e,n){let t=Object.create(null);e.forEach((o,s)=>t[o]=new i(o,n,s));let r=n.spec.topNode||"doc";if(!t[r])throw new RangeError("Schema is missing its top node type ('"+r+"')");if(!t.text)throw new RangeError("Every schema needs a 'text' type");for(let o in t.text.attrs)throw new RangeError("The text node type should not have attributes");return t}};function Rb(i,e,n){let t=n.split("|");return r=>{let o=r===null?"null":typeof r;if(t.indexOf(o)<0)throw new RangeError(`Expected value of type ${t} for attribute ${e} on type ${i}, got ${o}`)}}var Fc=class{constructor(e,n,t){this.hasDefault=Object.prototype.hasOwnProperty.call(t,"default"),this.default=t.default,this.validate=typeof t.validate=="string"?Rb(e,n,t.validate):t.validate}get isRequired(){return!this.hasDefault}},So=class i{constructor(e,n,t,r){this.name=e,this.rank=n,this.schema=t,this.spec=r,this.attrs=Of(e,r.attrs),this.excluded=null;let o=Tf(this.attrs);this.instance=o?new he(this,o):null}create(e=null){return!e&&this.instance?this.instance:new he(this,Df(this.attrs,e))}static compile(e,n){let t=Object.create(null),r=0;return e.forEach((o,s)=>t[o]=new i(o,r++,n,s)),t}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Nf(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}},ha=class{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let r in e)n[r]=e[r];n.nodes=Tc.from(e.nodes),n.marks=Tc.from(e.marks||{}),this.nodes=ua.compile(this.spec.nodes,this),this.marks=So.compile(this.spec.marks,this);let t=Object.create(null);for(let r in this.nodes){if(r in this.marks)throw new RangeError(r+" can not be both a node and a mark");let o=this.nodes[r],s=o.spec.content||"",a=o.spec.marks;if(o.contentMatch=t[s]||(t[s]=fi.parse(s,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=a=="_"?null:a?pf(this,a.split(" ")):a==""||!o.inlineContent?[]:null}for(let r in this.marks){let o=this.marks[r],s=o.spec.excludes;o.excluded=s==null?[o]:s==""?[]:pf(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,t,r){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof ua){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,t,r)}text(e,n){let t=this.nodes.text;return new Ac(t,t.defaultAttrs,e,he.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeFromJSON(e){return Jt.fromJSON(this,e)}markFromJSON(e){return he.fromJSON(this,e)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}};function pf(i,e){let n=[];for(let t=0;t<e.length;t++){let r=e[t],o=i.marks[r],s=o;if(o)n.push(o);else for(let a in i.marks){let l=i.marks[a];(r=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(r)>-1)&&n.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[t]+"'")}return n}function Ab(i){return i.tag!=null}function Pb(i){return i.style!=null}var Bn=class i{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let t=this.matchedStyles=[];n.forEach(r=>{if(Ab(r))this.tags.push(r);else if(Pb(r)){let o=/[^=]*/.exec(r.style)[0];t.indexOf(o)<0&&t.push(o),this.styles.push(r)}}),this.normalizeLists=!this.tags.some(r=>{if(!/^(ul|ol)\b/.test(r.tag)||!r.node)return!1;let o=e.nodes[r.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let t=new ma(this,n,!1);return t.addAll(e,he.none,n.from,n.to),t.finish()}parseSlice(e,n={}){let t=new ma(this,n,!0);return t.addAll(e,he.none,n.from,n.to),O.maxOpen(t.finish())}matchTag(e,n,t){for(let r=t?this.tags.indexOf(t)+1:0;r<this.tags.length;r++){let o=this.tags[r];if(Lb(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let s=o.getAttrs(e);if(s===!1)continue;o.attrs=s||void 0}return o}}}matchStyle(e,n,t,r){for(let o=r?this.styles.indexOf(r)+1:0;o<this.styles.length;o++){let s=this.styles[o],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!t.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=n))){if(s.getAttrs){let l=s.getAttrs(n);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let n=[];function t(r){let o=r.priority==null?50:r.priority,s=0;for(;s<n.length;s++){let a=n[s];if((a.priority==null?50:a.priority)<o)break}n.splice(s,0,r)}for(let r in e.marks){let o=e.marks[r].spec.parseDOM;o&&o.forEach(s=>{t(s=mf(s)),s.mark||s.ignore||s.clearMark||(s.mark=r)})}for(let r in e.nodes){let o=e.nodes[r].spec.parseDOM;o&&o.forEach(s=>{t(s=mf(s)),s.node||s.ignore||s.mark||(s.node=r)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new i(e,i.schemaRules(e)))}},Rf={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Fb={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Af={ol:!0,ul:!0},pa=1,fa=2,wo=4;function ff(i,e,n){return e!=null?(e?pa:0)|(e==="full"?fa:0):i&&i.whitespace=="pre"?pa|fa:n&~wo}var ar=class{constructor(e,n,t,r,o,s){this.type=e,this.attrs=n,this.marks=t,this.solid=r,this.options=s,this.content=[],this.activeMarks=he.none,this.match=o||(s&wo?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(T.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let t=this.type.contentMatch,r;return(r=t.findWrapping(e.type))?(this.match=t,r):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&pa)){let t=this.content[this.content.length-1],r;if(t&&t.isText&&(r=/[ \t\r\n\u000c]+$/.exec(t.text))){let o=t;t.text.length==r[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-r[0].length))}}let n=T.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(T.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Rf.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}},ma=class{constructor(e,n,t){this.parser=e,this.options=n,this.isOpen=t,this.open=0;let r=n.topNode,o,s=ff(null,n.preserveWhitespace,0)|(t?wo:0);r?o=new ar(r.type,r.attrs,he.none,!0,n.topMatch||r.type.contentMatch,s):t?o=new ar(null,null,he.none,!0,null,s):o=new ar(e.schema.topNodeType,null,he.none,!0,null,s),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let t=e.nodeValue,r=this.top;if(r.options&fa||r.inlineContext(e)||/[^ \t\r\n\u000c]/.test(t)){if(r.options&pa)r.options&fa?t=t.replace(/\r\n?/g,`
`):t=t.replace(/\r?\n|\r/g," ");else if(t=t.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(t)&&this.open==this.nodes.length-1){let o=r.content[r.content.length-1],s=e.previousSibling;(!o||s&&s.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(t=t.slice(1))}t&&this.insertNode(this.parser.schema.text(t),n),this.findInText(e)}else this.findInside(e)}addElement(e,n,t){let r=e.nodeName.toLowerCase(),o;Af.hasOwnProperty(r)&&this.parser.normalizeLists&&Vb(e);let s=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(o=this.parser.matchTag(e,this,t));if(s?s.ignore:Fb.hasOwnProperty(r))this.findInside(e),this.ignoreFallback(e,n);else if(!s||s.skip||s.closeParent){s&&s.closeParent?this.open=Math.max(0,this.open-1):s&&s.skip.nodeType&&(e=s.skip);let a,l=this.top,c=this.needsBlock;if(Rf.hasOwnProperty(r))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),a=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);return}let h=s&&s.skip?n:this.readStyles(e,n);h&&this.addAll(e,h),a&&this.sync(l),this.needsBlock=c}else{let a=this.readStyles(e,n);a&&this.addElementByRule(e,s,a,s.consuming===!1?o:void 0)}}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n)}readStyles(e,n){let t=e.style;if(t&&t.length)for(let r=0;r<this.parser.matchedStyles.length;r++){let o=this.parser.matchedStyles[r],s=t.getPropertyValue(o);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(o,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?n=n.filter(c=>!l.clearMark(c)):n=n.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return n}addElementByRule(e,n,t,r){let o,s;if(n.node)if(s=this.parser.schema.nodes[n.node],s.isLeaf)this.insertNode(s.create(n.attrs),t)||this.leafFallback(e,t);else{let l=this.enter(s,n.attrs||null,t,n.preserveWhitespace);l&&(o=!0,t=l)}else{let l=this.parser.schema.marks[n.mark];t=t.concat(l.create(n.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(r)this.addElement(e,t,r);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,t));else{let l=e;typeof n.contentElement=="string"?l=e.querySelector(n.contentElement):typeof n.contentElement=="function"?l=n.contentElement(e):n.contentElement&&(l=n.contentElement),this.findAround(e,l,!0),this.addAll(l,t)}o&&this.sync(a)&&this.open--}addAll(e,n,t,r){let o=t||0;for(let s=t?e.childNodes[t]:e.firstChild,a=r==null?null:e.childNodes[r];s!=a;s=s.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(s,n);this.findAtPoint(e,o)}findPlace(e,n){let t,r;for(let o=this.open;o>=0;o--){let s=this.nodes[o],a=s.findWrapping(e);if(a&&(!t||t.length>a.length)&&(t=a,r=s,!a.length)||s.solid)break}if(!t)return null;this.sync(r);for(let o=0;o<t.length;o++)n=this.enterInner(t[o],null,n,!1);return n}insertNode(e,n){if(e.isInline&&this.needsBlock&&!this.top.type){let r=this.textblockFromContext();r&&(n=this.enterInner(r,null,n))}let t=this.findPlace(e,n);if(t){this.closeExtra();let r=this.top;r.match&&(r.match=r.match.matchType(e.type));let o=he.none;for(let s of t.concat(e.marks))(r.type?r.type.allowsMarkType(s.type):gf(s.type,e.type))&&(o=s.addToSet(o));return r.content.push(e.mark(o)),!0}return!1}enter(e,n,t,r){let o=this.findPlace(e.create(n),t);return o&&(o=this.enterInner(e,n,t,!0,r)),o}enterInner(e,n,t,r=!1,o){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=ff(e,o,s.options);s.options&wo&&s.content.length==0&&(a|=wo);let l=he.none;return t=t.filter(c=>(s.type?s.type.allowsMarkType(c.type):gf(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new ar(e,n,l,r,null,a)),this.open++,t}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(e){for(let n=this.open;n>=0;n--)if(this.nodes[n]==e)return this.open=n,!0;return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let t=this.nodes[n].content;for(let r=t.length-1;r>=0;r--)e+=t[r].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&this.find[t].offset==n&&(this.find[t].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,t){if(e!=n&&this.find)for(let r=0;r<this.find.length;r++)this.find[r].pos==null&&e.nodeType==1&&e.contains(this.find[r].node)&&n.compareDocumentPosition(this.find[r].node)&(t?2:4)&&(this.find[r].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),t=this.options.context,r=!this.isOpen&&(!t||t.parent.type==this.nodes[0].type),o=-(t?t.depth+1:0)+(r?0:1),s=(a,l)=>{for(;a>=0;a--){let c=n[a];if(c==""){if(a==n.length-1||a==0)continue;for(;l>=o;l--)if(s(a-1,l))return!0;return!1}else{let h=l>0||l==0&&r?this.nodes[l].type:t&&l>=o?t.node(l-o).type:null;if(!h||h.name!=c&&h.groups.indexOf(c)==-1)return!1;l--}}return!0};return s(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let t=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(t&&t.isTextblock&&t.defaultAttrs)return t}for(let n in this.parser.schema.nodes){let t=this.parser.schema.nodes[n];if(t.isTextblock&&t.defaultAttrs)return t}}};function Vb(i){for(let e=i.firstChild,n=null;e;e=e.nextSibling){let t=e.nodeType==1?e.nodeName.toLowerCase():null;t&&Af.hasOwnProperty(t)&&n?(n.appendChild(e),e=n):t=="li"?n=e:t&&(n=null)}}function Lb(i,e){return(i.matches||i.msMatchesSelector||i.webkitMatchesSelector||i.mozMatchesSelector).call(i,e)}function mf(i){let e={};for(let n in i)e[n]=i[n];return e}function gf(i,e){let n=e.schema.nodes;for(let t in n){let r=n[t];if(!r.allowsMarkType(i))continue;let o=[],s=a=>{o.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:h}=a.edge(l);if(c==e||o.indexOf(h)<0&&s(h))return!0}};if(s(r.contentMatch))return!0}}var mn=class i{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},t){t||(t=Nc(n).createDocumentFragment());let r=t,o=[];return e.forEach(s=>{if(o.length||s.marks.length){let a=0,l=0;for(;a<o.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(o[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<o.length;)r=o.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],h=this.serializeMark(c,s.isInline,n);h&&(o.push([c,r]),r.appendChild(h.dom),r=h.contentDOM||h.dom)}}r.appendChild(this.serializeNodeInner(s,n))}),t}serializeNodeInner(e,n){let{dom:t,contentDOM:r}=aa(Nc(n),this.nodes[e.type.name](e),null,e.attrs);if(r){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,r)}return t}serializeNode(e,n={}){let t=this.serializeNodeInner(e,n);for(let r=e.marks.length-1;r>=0;r--){let o=this.serializeMark(e.marks[r],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(t),t=o.dom)}return t}serializeMark(e,n,t={}){let r=this.marks[e.type.name];return r&&aa(Nc(t),r(e,n),null,e.attrs)}static renderSpec(e,n,t=null,r){return aa(e,n,t,r)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new i(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=vf(e.nodes);return n.text||(n.text=t=>t.text),n}static marksFromSchema(e){return vf(e.marks)}};function vf(i){let e={};for(let n in i){let t=i[n].spec.toDOM;t&&(e[n]=t)}return e}function Nc(i){return i.document||window.document}var yf=new WeakMap;function jb(i){let e=yf.get(i);return e===void 0&&yf.set(i,e=zb(i)),e}function zb(i){let e=null;function n(t){if(t&&typeof t=="object")if(Array.isArray(t))if(typeof t[0]=="string")e||(e=[]),e.push(t);else for(let r=0;r<t.length;r++)n(t[r]);else for(let r in t)n(t[r])}return n(i),e}function aa(i,e,n,t){if(typeof e=="string")return{dom:i.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let r=e[0],o;if(typeof r!="string")throw new RangeError("Invalid array passed to renderSpec");if(t&&(o=jb(t))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=r.indexOf(" ");s>0&&(n=r.slice(0,s),r=r.slice(s+1));let a,l=n?i.createElementNS(n,r):i.createElement(r),c=e[1],h=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){h=2;for(let f in c)if(c[f]!=null){let m=f.indexOf(" ");m>0?l.setAttributeNS(f.slice(0,m),f.slice(m+1),c[f]):l.setAttribute(f,c[f])}}for(let f=h;f<e.length;f++){let m=e[f];if(m===0){if(f<e.length-1||f>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:b,contentDOM:v}=aa(i,m,n,t);if(l.appendChild(b),v){if(a)throw new RangeError("Multiple content holes");a=v}}}return{dom:l,contentDOM:a}}var Vf=65535,Lf=Math.pow(2,16);function Bb(i,e){return i+e*Lf}function Pf(i){return i&Vf}function Ub(i){return(i-(i&Vf))/Lf}var jf=1,zf=2,ga=4,Bf=8,ko=class{constructor(e,n,t){this.pos=e,this.delInfo=n,this.recover=t}get deleted(){return(this.delInfo&Bf)>0}get deletedBefore(){return(this.delInfo&(jf|ga))>0}get deletedAfter(){return(this.delInfo&(zf|ga))>0}get deletedAcross(){return(this.delInfo&ga)>0}},gn=class i{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&i.empty)return i.empty}recover(e){let n=0,t=Pf(e);if(!this.inverted)for(let r=0;r<t;r++)n+=this.ranges[r*3+2]-this.ranges[r*3+1];return this.ranges[t*3]+n+Ub(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,t){let r=0,o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+o],h=this.ranges[a+s],f=l+c;if(e<=f){let m=c?e==l?-1:e==f?1:n:n,b=l+r+(m<0?0:h);if(t)return b;let v=e==(n<0?l:f)?null:Bb(a/3,e-l),w=e==l?zf:e==f?jf:ga;return(n<0?e!=l:e!=f)&&(w|=Bf),new ko(b,w,v)}r+=h-c}return t?e+r:new ko(e+r,0,null)}touches(e,n){let t=0,r=Pf(n),o=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?t:0);if(l>e)break;let c=this.ranges[a+o],h=l+c;if(e<=h&&a==r*3)return!0;t+=this.ranges[a+s]-c}return!1}forEach(e){let n=this.inverted?2:1,t=this.inverted?1:2;for(let r=0,o=0;r<this.ranges.length;r+=3){let s=this.ranges[r],a=s-(this.inverted?o:0),l=s+(this.inverted?0:o),c=this.ranges[r+n],h=this.ranges[r+t];e(a,a+c,l,l+h),o+=h-c}}invert(){return new i(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?i.empty:new i(e<0?[0,-e,0]:[0,0,e])}};gn.empty=new gn([]);var Io=class i{constructor(e=[],n,t=0,r=e.length){this.maps=e,this.mirror=n,this.from=t,this.to=r}slice(e=0,n=this.maps.length){return new i(this.maps,this.mirror,e,n)}copy(){return new i(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(e,n){this.to=this.maps.push(e),n!=null&&this.setMirror(this.maps.length-1,n)}appendMapping(e){for(let n=0,t=this.maps.length;n<e.maps.length;n++){let r=e.getMirror(n);this.appendMap(e.maps[n],r!=null&&r<n?t+r:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,t=this.maps.length+e.maps.length;n>=0;n--){let r=e.getMirror(n);this.appendMap(e.maps[n].invert(),r!=null&&r>n?t-r-1:void 0)}}invert(){let e=new i;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let t=this.from;t<this.to;t++)e=this.maps[t].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,t){let r=0;for(let o=this.from;o<this.to;o++){let s=this.maps[o],a=s.mapResult(e,n);if(a.recover!=null){let l=this.getMirror(o);if(l!=null&&l>o&&l<this.to){o=l,e=this.maps[l].recover(a.recover);continue}}r|=a.delInfo,e=a.pos}return t?e:new ko(e,r,null)}},Vc=Object.create(null),je=class{getMap(){return gn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let t=Vc[n.stepType];if(!t)throw new RangeError(`No step type ${n.stepType} defined`);return t.fromJSON(e,n)}static jsonID(e,n){if(e in Vc)throw new RangeError("Duplicate use of step JSON ID "+e);return Vc[e]=n,n.prototype.jsonID=e,n}},Ue=class i{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new i(e,null)}static fail(e){return new i(null,e)}static fromReplace(e,n,t,r){try{return i.ok(e.replace(n,t,r))}catch(o){if(o instanceof hi)return i.fail(o.message);throw o}}};function Uc(i,e,n){let t=[];for(let r=0;r<i.childCount;r++){let o=i.child(r);o.content.size&&(o=o.copy(Uc(o.content,e,o))),o.isInline&&(o=e(o,n,r)),t.push(o)}return T.fromArray(t)}var To=class i extends je{constructor(e,n,t){super(),this.from=e,this.to=n,this.mark=t}apply(e){let n=e.slice(this.from,this.to),t=e.resolve(this.from),r=t.node(t.sharedDepth(this.to)),o=new O(Uc(n.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),r),n.openStart,n.openEnd);return Ue.fromReplace(e,this.from,this.to,o)}invert(){return new mi(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),t=e.mapResult(this.to,-1);return n.deleted&&t.deleted||n.pos>=t.pos?null:new i(n.pos,t.pos,this.mark)}merge(e){return e instanceof i&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new i(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new i(n.from,n.to,e.markFromJSON(n.mark))}};je.jsonID("addMark",To);var mi=class i extends je{constructor(e,n,t){super(),this.from=e,this.to=n,this.mark=t}apply(e){let n=e.slice(this.from,this.to),t=new O(Uc(n.content,r=>r.mark(this.mark.removeFromSet(r.marks)),e),n.openStart,n.openEnd);return Ue.fromReplace(e,this.from,this.to,t)}invert(){return new To(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),t=e.mapResult(this.to,-1);return n.deleted&&t.deleted||n.pos>=t.pos?null:new i(n.pos,t.pos,this.mark)}merge(e){return e instanceof i&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new i(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new i(n.from,n.to,e.markFromJSON(n.mark))}};je.jsonID("removeMark",mi);var Do=class i extends je{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ue.fail("No node at mark step's position");let t=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ue.fromReplace(e,this.pos,this.pos+1,new O(T.from(t),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let t=this.mark.addToSet(n.marks);if(t.length==n.marks.length){for(let r=0;r<n.marks.length;r++)if(!n.marks[r].isInSet(t))return new i(this.pos,n.marks[r]);return new i(this.pos,this.mark)}}return new No(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new i(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new i(n.pos,e.markFromJSON(n.mark))}};je.jsonID("addNodeMark",Do);var No=class i extends je{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ue.fail("No node at mark step's position");let t=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ue.fromReplace(e,this.pos,this.pos+1,new O(T.from(t),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Do(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new i(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new i(n.pos,e.markFromJSON(n.mark))}};je.jsonID("removeNodeMark",No);var kt=class i extends je{constructor(e,n,t,r=!1){super(),this.from=e,this.to=n,this.slice=t,this.structure=r}apply(e){return this.structure&&zc(e,this.from,this.to)?Ue.fail("Structure replace would overwrite content"):Ue.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new gn([this.from,this.to-this.from,this.slice.size])}invert(e){return new i(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),t=e.mapResult(this.to,-1);return n.deletedAcross&&t.deletedAcross?null:new i(n.pos,Math.max(n.pos,t.pos),this.slice)}merge(e){if(!(e instanceof i)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?O.empty:new O(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new i(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?O.empty:new O(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new i(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new i(n.from,n.to,O.fromJSON(e,n.slice),!!n.structure)}};je.jsonID("replace",kt);var ze=class i extends je{constructor(e,n,t,r,o,s,a=!1){super(),this.from=e,this.to=n,this.gapFrom=t,this.gapTo=r,this.slice=o,this.insert=s,this.structure=a}apply(e){if(this.structure&&(zc(e,this.from,this.gapFrom)||zc(e,this.gapTo,this.to)))return Ue.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ue.fail("Gap is not a flat range");let t=this.slice.insertAt(this.insert,n.content);return t?Ue.fromReplace(e,this.from,this.to,t):Ue.fail("Content does not fit in gap")}getMap(){return new gn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new i(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),t=e.mapResult(this.to,-1),r=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?t.pos:e.map(this.gapTo,1);return n.deletedAcross&&t.deletedAcross||r<n.pos||o>t.pos?null:new i(n.pos,t.pos,r,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new i(n.from,n.to,n.gapFrom,n.gapTo,O.fromJSON(e,n.slice),n.insert,!!n.structure)}};je.jsonID("replaceAround",ze);function zc(i,e,n){let t=i.resolve(e),r=n-e,o=t.depth;for(;r>0&&o>0&&t.indexAfter(o)==t.node(o).childCount;)o--,r--;if(r>0){let s=t.node(o).maybeChild(t.indexAfter(o));for(;r>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,r--}}return!1}function qb(i,e,n,t){let r=[],o=[],s,a;i.doc.nodesBetween(e,n,(l,c,h)=>{if(!l.isInline)return;let f=l.marks;if(!t.isInSet(f)&&h.type.allowsMarkType(t.type)){let m=Math.max(c,e),b=Math.min(c+l.nodeSize,n),v=t.addToSet(f);for(let w=0;w<f.length;w++)f[w].isInSet(v)||(s&&s.to==m&&s.mark.eq(f[w])?s.to=b:r.push(s=new mi(m,b,f[w])));a&&a.to==m?a.to=b:o.push(a=new To(m,b,t))}}),r.forEach(l=>i.step(l)),o.forEach(l=>i.step(l))}function $b(i,e,n,t){let r=[],o=0;i.doc.nodesBetween(e,n,(s,a)=>{if(!s.isInline)return;o++;let l=null;if(t instanceof So){let c=s.marks,h;for(;h=t.isInSet(c);)(l||(l=[])).push(h),c=h.removeFromSet(c)}else t?t.isInSet(s.marks)&&(l=[t]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,n);for(let h=0;h<l.length;h++){let f=l[h],m;for(let b=0;b<r.length;b++){let v=r[b];v.step==o-1&&f.eq(r[b].style)&&(m=v)}m?(m.to=c,m.step=o):r.push({style:f,from:Math.max(a,e),to:c,step:o})}}}),r.forEach(s=>i.step(new mi(s.from,s.to,s.style)))}function Uf(i,e,n,t=n.contentMatch,r=!0){let o=i.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<o.childCount;l++){let c=o.child(l),h=a+c.nodeSize,f=t.matchType(c.type);if(!f)s.push(new kt(a,h,O.empty));else{t=f;for(let m=0;m<c.marks.length;m++)n.allowsMarkType(c.marks[m].type)||i.step(new mi(a,h,c.marks[m]));if(r&&c.isText&&n.whitespace!="pre"){let m,b=/\r?\n|\r/g,v;for(;m=b.exec(c.text);)v||(v=new O(T.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),s.push(new kt(a+m.index,a+m.index+m[0].length,v))}}a=h}if(!t.validEnd){let l=t.fillBefore(T.empty,!0);i.replace(a,a,new O(l,0,0))}for(let l=s.length-1;l>=0;l--)i.step(s[l])}function Hb(i,e,n){return(e==0||i.canReplace(e,i.childCount))&&(n==i.childCount||i.canReplace(0,n))}function gi(i){let n=i.parent.content.cutByIndex(i.startIndex,i.endIndex);for(let t=i.depth;;--t){let r=i.$from.node(t),o=i.$from.index(t),s=i.$to.indexAfter(t);if(t<i.depth&&r.canReplace(o,s,n))return t;if(t==0||r.type.spec.isolating||!Hb(r,o,s))break}return null}function Gb(i,e,n){let{$from:t,$to:r,depth:o}=e,s=t.before(o+1),a=r.after(o+1),l=s,c=a,h=T.empty,f=0;for(let v=o,w=!1;v>n;v--)w||t.index(v)>0?(w=!0,h=T.from(t.node(v).copy(h)),f++):l--;let m=T.empty,b=0;for(let v=o,w=!1;v>n;v--)w||r.after(v+1)<r.end(v)?(w=!0,m=T.from(r.node(v).copy(m)),b++):c++;i.step(new ze(l,c,s,a,new O(h.append(m),f,b),h.size-f,!0))}function cr(i,e,n=null,t=i){let r=Wb(i,e),o=r&&Kb(t,e);return o?r.map(Ff).concat({type:e,attrs:n}).concat(o.map(Ff)):null}function Ff(i){return{type:i,attrs:null}}function Wb(i,e){let{parent:n,startIndex:t,endIndex:r}=i,o=n.contentMatchAt(t).findWrapping(e);if(!o)return null;let s=o.length?o[0]:e;return n.canReplaceWith(t,r,s)?o:null}function Kb(i,e){let{parent:n,startIndex:t,endIndex:r}=i,o=n.child(t),s=e.contentMatch.findWrapping(o.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=t;l&&c<r;c++)l=l.matchType(n.child(c).type);return!l||!l.validEnd?null:s}function Jb(i,e,n){let t=T.empty;for(let s=n.length-1;s>=0;s--){if(t.size){let a=n[s].type.contentMatch.matchFragment(t);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}t=T.from(n[s].type.create(n[s].attrs,t))}let r=e.start,o=e.end;i.step(new ze(r,o,r,o,new O(t,0,0),n.length,!0))}function Qb(i,e,n,t,r){if(!t.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=i.steps.length;i.doc.nodesBetween(e,n,(s,a)=>{let l=typeof r=="function"?r(s):r;if(s.isTextblock&&!s.hasMarkup(t,l)&&Zb(i.doc,i.mapping.slice(o).map(a),t)){let c=null;if(t.schema.linebreakReplacement){let b=t.whitespace=="pre",v=!!t.contentMatch.matchType(t.schema.linebreakReplacement);b&&!v?c=!1:!b&&v&&(c=!0)}c===!1&&Yb(i,s,a,o),Uf(i,i.mapping.slice(o).map(a,1),t,void 0,c===null);let h=i.mapping.slice(o),f=h.map(a,1),m=h.map(a+s.nodeSize,1);return i.step(new ze(f,m,f+1,m-1,new O(T.from(t.create(l,null,s.marks)),0,0),1,!0)),c===!0&&Xb(i,s,a,o),!1}})}function Xb(i,e,n,t){e.forEach((r,o)=>{if(r.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(r.text);){let l=i.mapping.slice(t).map(n+1+o+s.index);i.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function Yb(i,e,n,t){e.forEach((r,o)=>{if(r.type==r.type.schema.linebreakReplacement){let s=i.mapping.slice(t).map(n+1+o);i.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function Zb(i,e,n){let t=i.resolve(e),r=t.index();return t.parent.canReplaceWith(r,r+1,n)}function e_(i,e,n,t,r){let o=i.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let s=n.create(t,null,r||o.marks);if(o.isLeaf)return i.replaceWith(e,e+o.nodeSize,s);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);i.step(new ze(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new O(T.from(s),0,0),1,!0))}function Un(i,e,n=1,t){let r=i.resolve(e),o=r.depth-n,s=t&&t[t.length-1]||r.parent;if(o<0||r.parent.type.spec.isolating||!r.parent.canReplace(r.index(),r.parent.childCount)||!s.type.validContent(r.parent.content.cutByIndex(r.index(),r.parent.childCount)))return!1;for(let c=r.depth-1,h=n-2;c>o;c--,h--){let f=r.node(c),m=r.index(c);if(f.type.spec.isolating)return!1;let b=f.content.cutByIndex(m,f.childCount),v=t&&t[h+1];v&&(b=b.replaceChild(0,v.type.create(v.attrs)));let w=t&&t[h]||f;if(!f.canReplace(m+1,f.childCount)||!w.type.validContent(b))return!1}let a=r.indexAfter(o),l=t&&t[0];return r.node(o).canReplaceWith(a,a,l?l.type:r.node(o+1).type)}function t_(i,e,n=1,t){let r=i.doc.resolve(e),o=T.empty,s=T.empty;for(let a=r.depth,l=r.depth-n,c=n-1;a>l;a--,c--){o=T.from(r.node(a).copy(o));let h=t&&t[c];s=T.from(h?h.type.create(h.attrs,s):r.node(a).copy(s))}i.step(new kt(e,e,new O(o.append(s),n,n),!0))}function vi(i,e){let n=i.resolve(e),t=n.index();return n_(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(t,t+1)}function n_(i,e){return!!(i&&e&&!i.isLeaf&&i.canAppend(e))}function i_(i,e,n){let t=new kt(e-n,e+n,O.empty,!0);i.step(t)}function r_(i,e,n){let t=i.resolve(e);if(t.parent.canReplaceWith(t.index(),t.index(),n))return e;if(t.parentOffset==0)for(let r=t.depth-1;r>=0;r--){let o=t.index(r);if(t.node(r).canReplaceWith(o,o,n))return t.before(r+1);if(o>0)return null}if(t.parentOffset==t.parent.content.size)for(let r=t.depth-1;r>=0;r--){let o=t.indexAfter(r);if(t.node(r).canReplaceWith(o,o,n))return t.after(r+1);if(o<t.node(r).childCount)return null}return null}function qf(i,e,n){let t=i.resolve(e);if(!n.content.size)return e;let r=n.content;for(let o=0;o<n.openStart;o++)r=r.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let s=t.depth;s>=0;s--){let a=s==t.depth?0:t.pos<=(t.start(s+1)+t.end(s+1))/2?-1:1,l=t.index(s)+(a>0?1:0),c=t.node(s),h=!1;if(o==1)h=c.canReplace(l,l,r);else{let f=c.contentMatchAt(l).findWrapping(r.firstChild.type);h=f&&c.canReplaceWith(l,l,f[0])}if(h)return a==0?t.pos:a<0?t.before(s+1):t.after(s+1)}return null}function _a(i,e,n=e,t=O.empty){if(e==n&&!t.size)return null;let r=i.resolve(e),o=i.resolve(n);return $f(r,o,t)?new kt(e,n,t):new Bc(r,o,t).fit()}function $f(i,e,n){return!n.openStart&&!n.openEnd&&i.start()==e.start()&&i.parent.canReplace(i.index(),e.index(),n.content)}var Bc=class{constructor(e,n,t){this.$from=e,this.$to=n,this.unplaced=t,this.frontier=[],this.placed=T.empty;for(let r=0;r<=e.depth;r++){let o=e.node(r);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(r))})}for(let r=e.depth;r>0;r--)this.placed=T.from(e.node(r).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,t=this.$from,r=this.close(e<0?this.$to:t.doc.resolve(e));if(!r)return null;let o=this.placed,s=t.depth,a=r.depth;for(;s&&a&&o.childCount==1;)o=o.firstChild.content,s--,a--;let l=new O(o,s,a);return e>-1?new ze(t.pos,e,this.$to.pos,this.$to.end(),l,n):l.size||t.pos!=this.$to.pos?new kt(t.pos,r.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,t=0,r=this.unplaced.openEnd;t<e;t++){let o=n.firstChild;if(n.childCount>1&&(r=0),o.type.spec.isolating&&r<=t){e=t;break}n=o.content}for(let n=1;n<=2;n++)for(let t=n==1?e:this.unplaced.openStart;t>=0;t--){let r,o=null;t?(o=Lc(this.unplaced.content,t-1).firstChild,r=o.content):r=this.unplaced.content;let s=r.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],h,f=null;if(n==1&&(s?c.matchType(s.type)||(f=c.fillBefore(T.from(s),!1)):o&&l.compatibleContent(o.type)))return{sliceDepth:t,frontierDepth:a,parent:o,inject:f};if(n==2&&s&&(h=c.findWrapping(s.type)))return{sliceDepth:t,frontierDepth:a,parent:o,wrap:h};if(o&&c.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:t}=this.unplaced,r=Lc(e,n);return!r.childCount||r.firstChild.isLeaf?!1:(this.unplaced=new O(e,n+1,Math.max(t,r.size+n>=e.size-t?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:t}=this.unplaced,r=Lc(e,n);if(r.childCount<=1&&n>0){let o=e.size-n<=n+r.size;this.unplaced=new O(Eo(e,n-1,1),n-1,o?n-1:t)}else this.unplaced=new O(Eo(e,n,1),n,t)}placeNodes({sliceDepth:e,frontierDepth:n,parent:t,inject:r,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let w=0;w<o.length;w++)this.openFrontierNode(o[w]);let s=this.unplaced,a=t?t.content:s.content,l=s.openStart-e,c=0,h=[],{match:f,type:m}=this.frontier[n];if(r){for(let w=0;w<r.childCount;w++)h.push(r.child(w));f=f.matchFragment(r)}let b=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let w=a.child(c),S=f.matchType(w.type);if(!S)break;c++,(c>1||l==0||w.content.size)&&(f=S,h.push(Hf(w.mark(m.allowedMarks(w.marks)),c==1?l:0,c==a.childCount?b:-1)))}let v=c==a.childCount;v||(b=-1),this.placed=Mo(this.placed,n,T.from(h)),this.frontier[n].match=f,v&&b<0&&t&&t.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let w=0,S=a;w<b;w++){let I=S.lastChild;this.frontier.push({type:I.type,match:I.contentMatchAt(I.childCount)}),S=I.content}this.unplaced=v?e==0?O.empty:new O(Eo(s.content,e-1,1),e-1,b<0?s.openEnd:e-1):new O(Eo(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!jc(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:t}=this.$to,r=this.$to.after(t);for(;t>1&&r==this.$to.end(--t);)++r;return r}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:t,type:r}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),s=jc(e,n,r,t,o);if(s){for(let a=n-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],h=jc(e,a,c,l,!0);if(!h||h.childCount)continue e}return{depth:n,fit:s,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Mo(this.placed,n.depth,n.fit)),e=n.move;for(let t=n.depth+1;t<=e.depth;t++){let r=e.node(t),o=r.type.contentMatch.fillBefore(r.content,!0,e.index(t));this.openFrontierNode(r.type,r.attrs,o)}return e}openFrontierNode(e,n=null,t){let r=this.frontier[this.depth];r.match=r.match.matchType(e),this.placed=Mo(this.placed,this.depth,T.from(e.create(n,t))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(T.empty,!0);n.childCount&&(this.placed=Mo(this.placed,this.frontier.length,n))}};function Eo(i,e,n){return e==0?i.cutByIndex(n,i.childCount):i.replaceChild(0,i.firstChild.copy(Eo(i.firstChild.content,e-1,n)))}function Mo(i,e,n){return e==0?i.append(n):i.replaceChild(i.childCount-1,i.lastChild.copy(Mo(i.lastChild.content,e-1,n)))}function Lc(i,e){for(let n=0;n<e;n++)i=i.firstChild.content;return i}function Hf(i,e,n){if(e<=0)return i;let t=i.content;return e>1&&(t=t.replaceChild(0,Hf(t.firstChild,e-1,t.childCount==1?n-1:0))),e>0&&(t=i.type.contentMatch.fillBefore(t).append(t),n<=0&&(t=t.append(i.type.contentMatch.matchFragment(t).fillBefore(T.empty,!0)))),i.copy(t)}function jc(i,e,n,t,r){let o=i.node(e),s=r?i.indexAfter(e):i.index(e);if(s==o.childCount&&!n.compatibleContent(o.type))return null;let a=t.fillBefore(o.content,!0,s);return a&&!o_(n,o.content,s)?a:null}function o_(i,e,n){for(let t=n;t<e.childCount;t++)if(!i.allowsMarks(e.child(t).marks))return!0;return!1}function s_(i){return i.spec.defining||i.spec.definingForContent}function a_(i,e,n,t){if(!t.size)return i.deleteRange(e,n);let r=i.doc.resolve(e),o=i.doc.resolve(n);if($f(r,o,t))return i.step(new kt(e,n,t));let s=Wf(r,i.doc.resolve(n));s[s.length-1]==0&&s.pop();let a=-(r.depth+1);s.unshift(a);for(let m=r.depth,b=r.pos-1;m>0;m--,b--){let v=r.node(m).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;s.indexOf(m)>-1?a=m:r.before(m)==b&&s.splice(1,0,-m)}let l=s.indexOf(a),c=[],h=t.openStart;for(let m=t.content,b=0;;b++){let v=m.firstChild;if(c.push(v),b==t.openStart)break;m=v.content}for(let m=h-1;m>=0;m--){let b=c[m],v=s_(b.type);if(v&&!b.sameMarkup(r.node(Math.abs(a)-1)))h=m;else if(v||!b.type.isTextblock)break}for(let m=t.openStart;m>=0;m--){let b=(m+h+1)%(t.openStart+1),v=c[b];if(v)for(let w=0;w<s.length;w++){let S=s[(w+l)%s.length],I=!0;S<0&&(I=!1,S=-S);let Z=r.node(S-1),fe=r.index(S-1);if(Z.canReplaceWith(fe,fe,v.type,v.marks))return i.replace(r.before(S),I?o.after(S):n,new O(Gf(t.content,0,t.openStart,b),b,t.openEnd))}}let f=i.steps.length;for(let m=s.length-1;m>=0&&(i.replace(e,n,t),!(i.steps.length>f));m--){let b=s[m];b<0||(e=r.before(b),n=o.after(b))}}function Gf(i,e,n,t,r){if(e<n){let o=i.firstChild;i=i.replaceChild(0,o.copy(Gf(o.content,e+1,n,t,o)))}if(e>t){let o=r.contentMatchAt(0),s=o.fillBefore(i).append(i);i=s.append(o.matchFragment(s).fillBefore(T.empty,!0))}return i}function l_(i,e,n,t){if(!t.isInline&&e==n&&i.doc.resolve(e).parent.content.size){let r=r_(i.doc,e,t.type);r!=null&&(e=n=r)}i.replaceRange(e,n,new O(T.from(t),0,0))}function c_(i,e,n){let t=i.doc.resolve(e),r=i.doc.resolve(n),o=Wf(t,r);for(let s=0;s<o.length;s++){let a=o[s],l=s==o.length-1;if(l&&a==0||t.node(a).type.contentMatch.validEnd)return i.delete(t.start(a),r.end(a));if(a>0&&(l||t.node(a-1).canReplace(t.index(a-1),r.indexAfter(a-1))))return i.delete(t.before(a),r.after(a))}for(let s=1;s<=t.depth&&s<=r.depth;s++)if(e-t.start(s)==t.depth-s&&n>t.end(s)&&r.end(s)-n!=r.depth-s)return i.delete(t.before(s),n);i.delete(e,n)}function Wf(i,e){let n=[],t=Math.min(i.depth,e.depth);for(let r=t;r>=0;r--){let o=i.start(r);if(o<i.pos-(i.depth-r)||e.end(r)>e.pos+(e.depth-r)||i.node(r).type.spec.isolating||e.node(r).type.spec.isolating)break;(o==e.start(r)||r==i.depth&&r==e.depth&&i.parent.inlineContent&&e.parent.inlineContent&&r&&e.start(r-1)==o-1)&&n.push(r)}return n}var va=class i extends je{constructor(e,n,t){super(),this.pos=e,this.attr=n,this.value=t}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ue.fail("No node at attribute step's position");let t=Object.create(null);for(let o in n.attrs)t[o]=n.attrs[o];t[this.attr]=this.value;let r=n.type.create(t,null,n.marks);return Ue.fromReplace(e,this.pos,this.pos+1,new O(T.from(r),0,n.isLeaf?0:1))}getMap(){return gn.empty}invert(e){return new i(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new i(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new i(n.pos,n.attr,n.value)}};je.jsonID("attr",va);var ya=class i extends je{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let r in e.attrs)n[r]=e.attrs[r];n[this.attr]=this.value;let t=e.type.create(n,e.content,e.marks);return Ue.ok(t)}getMap(){return gn.empty}invert(e){return new i(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new i(n.attr,n.value)}};je.jsonID("docAttr",ya);var lr=class extends Error{};lr=function i(e){let n=Error.call(this,e);return n.__proto__=i.prototype,n};lr.prototype=Object.create(Error.prototype);lr.prototype.constructor=lr;lr.prototype.name="TransformError";var ba=class{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Io}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new lr(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,t=O.empty){let r=_a(this.doc,e,n,t);return r&&this.step(r),this}replaceWith(e,n,t){return this.replace(e,n,new O(T.from(t),0,0))}delete(e,n){return this.replace(e,n,O.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,t){return a_(this,e,n,t),this}replaceRangeWith(e,n,t){return l_(this,e,n,t),this}deleteRange(e,n){return c_(this,e,n),this}lift(e,n){return Gb(this,e,n),this}join(e,n=1){return i_(this,e,n),this}wrap(e,n){return Jb(this,e,n),this}setBlockType(e,n=e,t,r=null){return Qb(this,e,n,t,r),this}setNodeMarkup(e,n,t=null,r){return e_(this,e,n,t,r),this}setNodeAttribute(e,n,t){return this.step(new va(e,n,t)),this}setDocAttribute(e,n){return this.step(new ya(e,n)),this}addNodeMark(e,n){return this.step(new Do(e,n)),this}removeNodeMark(e,n){if(!(n instanceof he)){let t=this.doc.nodeAt(e);if(!t)throw new RangeError("No node at position "+e);if(n=n.isInSet(t.marks),!n)return this}return this.step(new No(e,n)),this}split(e,n=1,t){return t_(this,e,n,t),this}addMark(e,n,t){return qb(this,e,n,t),this}removeMark(e,n,t){return $b(this,e,n,t),this}clearIncompatible(e,n,t){return Uf(this,e,n,t),this}};var qc=Object.create(null),J=class{constructor(e,n,t){this.$anchor=e,this.$head=n,this.ranges=t||[new ur(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=O.empty){let t=n.content.lastChild,r=null;for(let a=0;a<n.openEnd;a++)r=t,t=t.lastChild;let o=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],h=e.mapping.slice(o);e.replaceRange(h.map(l.pos),h.map(c.pos),a?O.empty:n),a==0&&Qf(e,o,(t?t.isInline:r&&r.isTextblock)?-1:1)}}replaceWith(e,n){let t=e.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){let{$from:s,$to:a}=r[o],l=e.mapping.slice(t),c=l.map(s.pos),h=l.map(a.pos);o?e.deleteRange(c,h):(e.replaceRangeWith(c,h,n),Qf(e,t,n.isInline?-1:1))}}static findFrom(e,n,t=!1){let r=e.parent.inlineContent?new ue(e):dr(e.node(0),e.parent,e.pos,e.index(),n,t);if(r)return r;for(let o=e.depth-1;o>=0;o--){let s=n<0?dr(e.node(0),e.node(o),e.before(o+1),e.index(o),n,t):dr(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,t);if(s)return s}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new It(e.node(0))}static atStart(e){return dr(e,e,0,0,1)||new It(e)}static atEnd(e){return dr(e,e,e.content.size,e.childCount,-1)||new It(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let t=qc[n.type];if(!t)throw new RangeError(`No selection type ${n.type} defined`);return t.fromJSON(e,n)}static jsonID(e,n){if(e in qc)throw new RangeError("Duplicate use of selection JSON ID "+e);return qc[e]=n,n.prototype.jsonID=e,n}getBookmark(){return ue.between(this.$anchor,this.$head).getBookmark()}};J.prototype.visible=!0;var ur=class{constructor(e,n){this.$from=e,this.$to=n}},Kf=!1;function Jf(i){!Kf&&!i.parent.inlineContent&&(Kf=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+i.parent.type.name+")"))}var ue=class i extends J{constructor(e,n=e){Jf(e),Jf(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let t=e.resolve(n.map(this.head));if(!t.parent.inlineContent)return J.near(t);let r=e.resolve(n.map(this.anchor));return new i(r.parent.inlineContent?r:t,t)}replace(e,n=O.empty){if(super.replace(e,n),n==O.empty){let t=this.$from.marksAcross(this.$to);t&&e.ensureMarks(t)}}eq(e){return e instanceof i&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ca(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new i(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,t=n){let r=e.resolve(n);return new this(r,t==n?r:e.resolve(t))}static between(e,n,t){let r=e.pos-n.pos;if((!t||r)&&(t=r>=0?1:-1),!n.parent.inlineContent){let o=J.findFrom(n,t,!0)||J.findFrom(n,-t,!0);if(o)n=o.$head;else return J.near(n,t)}return e.parent.inlineContent||(r==0?e=n:(e=(J.findFrom(e,-t,!0)||J.findFrom(e,t,!0)).$anchor,e.pos<n.pos!=r<0&&(e=n))),new i(e,n)}};J.jsonID("text",ue);var Ca=class i{constructor(e,n){this.anchor=e,this.head=n}map(e){return new i(e.map(this.anchor),e.map(this.head))}resolve(e){return ue.between(e.resolve(this.anchor),e.resolve(this.head))}},B=class i extends J{constructor(e){let n=e.nodeAfter,t=e.node(0).resolve(e.pos+n.nodeSize);super(e,t),this.node=n}map(e,n){let{deleted:t,pos:r}=n.mapResult(this.anchor),o=e.resolve(r);return t?J.near(o):new i(o)}content(){return new O(T.from(this.node),0,0)}eq(e){return e instanceof i&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Hc(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new i(e.resolve(n.anchor))}static create(e,n){return new i(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}};B.prototype.visible=!1;J.jsonID("node",B);var Hc=class i{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:t}=e.mapResult(this.anchor);return n?new Ca(t,t):new i(t)}resolve(e){let n=e.resolve(this.anchor),t=n.nodeAfter;return t&&B.isSelectable(t)?new B(n):J.near(n)}},It=class i extends J{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=O.empty){if(n==O.empty){e.delete(0,e.doc.content.size);let t=J.atStart(e.doc);t.eq(e.selection)||e.setSelection(t)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new i(e)}map(e){return new i(e)}eq(e){return e instanceof i}getBookmark(){return d_}};J.jsonID("all",It);var d_={map(){return this},resolve(i){return new It(i)}};function dr(i,e,n,t,r,o=!1){if(e.inlineContent)return ue.create(i,n);for(let s=t-(r>0?0:1);r>0?s<e.childCount:s>=0;s+=r){let a=e.child(s);if(a.isAtom){if(!o&&B.isSelectable(a))return B.create(i,n-(r<0?a.nodeSize:0))}else{let l=dr(i,a,n+r,r<0?a.childCount:0,r,o);if(l)return l}n+=a.nodeSize*r}return null}function Qf(i,e,n){let t=i.steps.length-1;if(t<e)return;let r=i.steps[t];if(!(r instanceof kt||r instanceof ze))return;let o=i.mapping.maps[t],s;o.forEach((a,l,c,h)=>{s==null&&(s=h)}),i.setSelection(J.near(i.doc.resolve(s),n))}var Xf=1,xa=2,Yf=4,Gc=class extends ba{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Xf)&~xa,this.storedMarks=null,this}get selectionSet(){return(this.updated&Xf)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=xa,this}ensureMarks(e){return he.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&xa)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~xa,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let t=this.selection;return n&&(e=e.mark(this.storedMarks||(t.empty?t.$from.marks():t.$from.marksAcross(t.$to)||he.none))),t.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,t){let r=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(r.text(e),!0):this.deleteSelection();{if(t==null&&(t=n),t=t??n,!e)return this.deleteRange(n,t);let o=this.storedMarks;if(!o){let s=this.doc.resolve(n);o=t==n?s.marks():s.marksAcross(this.doc.resolve(t))}return this.replaceRangeWith(n,t,r.text(e,o)),this.selection.empty||this.setSelection(J.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Yf,this}get scrolledIntoView(){return(this.updated&Yf)>0}};function Zf(i,e){return!e||!i?i:i.bind(e)}var yi=class{constructor(e,n,t){this.name=e,this.init=Zf(n.init,t),this.apply=Zf(n.apply,t)}},u_=[new yi("doc",{init(i){return i.doc||i.schema.topNodeType.createAndFill()},apply(i){return i.doc}}),new yi("selection",{init(i,e){return i.selection||J.atStart(e.doc)},apply(i){return i.selection}}),new yi("storedMarks",{init(i){return i.storedMarks||null},apply(i,e,n,t){return t.selection.$cursor?i.storedMarks:null}}),new yi("scrollToSelection",{init(){return 0},apply(i,e){return i.scrolledIntoView?e+1:e}})],Oo=class{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=u_.slice(),n&&n.forEach(t=>{if(this.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");this.plugins.push(t),this.pluginsByKey[t.key]=t,t.spec.state&&this.fields.push(new yi(t.key,t.spec.state,t))})}},wa=class i{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let t=0;t<this.config.plugins.length;t++)if(t!=n){let r=this.config.plugins[t];if(r.spec.filterTransaction&&!r.spec.filterTransaction.call(r,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],t=this.applyInner(e),r=null;for(;;){let o=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=r?r[s].n:0,c=r?r[s].state:this,h=l<n.length&&a.spec.appendTransaction.call(a,l?n.slice(l):n,c,t);if(h&&t.filterTransaction(h,s)){if(h.setMeta("appendedTransaction",e),!r){r=[];for(let f=0;f<this.config.plugins.length;f++)r.push(f<s?{state:t,n:n.length}:{state:this,n:0})}n.push(h),t=t.applyInner(h),o=!0}r&&(r[s]={state:t,n:n.length})}}if(!o)return{state:t,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new i(this.config),t=this.config.fields;for(let r=0;r<t.length;r++){let o=t[r];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new Gc(this)}static create(e){let n=new Oo(e.doc?e.doc.type.schema:e.schema,e.plugins),t=new i(n);for(let r=0;r<n.fields.length;r++)t[n.fields[r].name]=n.fields[r].init(e,t);return t}reconfigure(e){let n=new Oo(this.schema,e.plugins),t=n.fields,r=new i(n);for(let o=0;o<t.length;o++){let s=t[o].name;r[s]=this.hasOwnProperty(s)?this[s]:t[o].init(e,r)}return r}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(t=>t.toJSON())),e&&typeof e=="object")for(let t in e){if(t=="doc"||t=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let r=e[t],o=r.spec.state;o&&o.toJSON&&(n[t]=o.toJSON.call(r,this[r.key]))}return n}static fromJSON(e,n,t){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let r=new Oo(e.schema,e.plugins),o=new i(r);return r.fields.forEach(s=>{if(s.name=="doc")o.doc=Jt.fromJSON(e.schema,n.doc);else if(s.name=="selection")o.selection=J.fromJSON(o.doc,n.selection);else if(s.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(t)for(let a in t){let l=t[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,a)){o[s.name]=c.fromJSON.call(l,e,n[a],o);return}}o[s.name]=s.init(e,o)}}),o}};function em(i,e,n){for(let t in i){let r=i[t];r instanceof Function?r=r.bind(e):t=="handleDOMEvents"&&(r=em(r,e,{})),n[t]=r}return n}var Xe=class{constructor(e){this.spec=e,this.props={},e.props&&em(e.props,this,this.props),this.key=e.key?e.key.key:tm("plugin")}getState(e){return e[this.key]}},$c=Object.create(null);function tm(i){return i in $c?i+"$"+ ++$c[i]:($c[i]=0,i+"$")}var Tt=class{constructor(e="key"){this.key=tm(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}};var qe=function(i){for(var e=0;;e++)if(i=i.previousSibling,!i)return e},Fo=function(i){let e=i.assignedSlot||i.parentNode;return e&&e.nodeType==11?e.host:e},Xc=null,yn=function(i,e,n){let t=Xc||(Xc=document.createRange());return t.setEnd(i,n??i.nodeValue.length),t.setStart(i,e||0),t},h_=function(){Xc=null},Ei=function(i,e,n,t){return n&&(nm(i,e,n,t,-1)||nm(i,e,n,t,1))},p_=/^(img|br|input|textarea|hr)$/i;function nm(i,e,n,t,r){for(;;){if(i==n&&e==t)return!0;if(e==(r<0?0:Qt(i))){let o=i.parentNode;if(!o||o.nodeType!=1||zo(i)||p_.test(i.nodeName)||i.contentEditable=="false")return!1;e=qe(i)+(r<0?0:1),i=o}else if(i.nodeType==1){if(i=i.childNodes[e+(r<0?-1:0)],i.contentEditable=="false")return!1;e=r<0?Qt(i):0}else return!1}}function Qt(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function f_(i,e){for(;;){if(i.nodeType==3&&e)return i;if(i.nodeType==1&&e>0){if(i.contentEditable=="false")return null;i=i.childNodes[e-1],e=Qt(i)}else if(i.parentNode&&!zo(i))e=qe(i),i=i.parentNode;else return null}}function m_(i,e){for(;;){if(i.nodeType==3&&e<i.nodeValue.length)return i;if(i.nodeType==1&&e<i.childNodes.length){if(i.contentEditable=="false")return null;i=i.childNodes[e],e=0}else if(i.parentNode&&!zo(i))e=qe(i)+1,i=i.parentNode;else return null}}function g_(i,e,n){for(let t=e==0,r=e==Qt(i);t||r;){if(i==n)return!0;let o=qe(i);if(i=i.parentNode,!i)return!1;t=t&&o==0,r=r&&o==Qt(i)}}function zo(i){let e;for(let n=i;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==i||e.contentDOM==i)}var Aa=function(i){return i.focusNode&&Ei(i.focusNode,i.focusOffset,i.anchorNode,i.anchorOffset)};function bi(i,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=i,n.key=n.code=e,n}function v_(i){let e=i.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function y_(i,e,n){if(i.caretPositionFromPoint)try{let t=i.caretPositionFromPoint(e,n);if(t)return{node:t.offsetNode,offset:t.offset}}catch{}if(i.caretRangeFromPoint){let t=i.caretRangeFromPoint(e,n);if(t)return{node:t.startContainer,offset:t.startOffset}}}var Xt=typeof navigator<"u"?navigator:null,im=typeof document<"u"?document:null,Kn=Xt&&Xt.userAgent||"",Yc=/Edge\/(\d+)/.exec(Kn),Pm=/MSIE \d/.exec(Kn),Zc=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Kn),mt=!!(Pm||Zc||Yc),Gn=Pm?document.documentMode:Zc?+Zc[1]:Yc?+Yc[1]:0,zt=!mt&&/gecko\/(\d+)/i.test(Kn);zt&&+(/Firefox\/(\d+)/.exec(Kn)||[0,0])[1];var ed=!mt&&/Chrome\/(\d+)/.exec(Kn),Ze=!!ed,Fm=ed?+ed[1]:0,dt=!mt&&!!Xt&&/Apple Computer/.test(Xt.vendor),gr=dt&&(/Mobile\/\w+/.test(Kn)||!!Xt&&Xt.maxTouchPoints>2),At=gr||(Xt?/Mac/.test(Xt.platform):!1),b_=Xt?/Win/.test(Xt.platform):!1,jt=/Android \d/.test(Kn),Bo=!!im&&"webkitFontSmoothing"in im.documentElement.style,__=Bo?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function x_(i){let e=i.defaultView&&i.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:i.documentElement.clientWidth,top:0,bottom:i.documentElement.clientHeight}}function vn(i,e){return typeof i=="number"?i:i[e]}function C_(i){let e=i.getBoundingClientRect(),n=e.width/i.offsetWidth||1,t=e.height/i.offsetHeight||1;return{left:e.left,right:e.left+i.clientWidth*n,top:e.top,bottom:e.top+i.clientHeight*t}}function rm(i,e,n){let t=i.someProp("scrollThreshold")||0,r=i.someProp("scrollMargin")||5,o=i.dom.ownerDocument;for(let s=n||i.dom;s;s=Fo(s)){if(s.nodeType!=1)continue;let a=s,l=a==o.body,c=l?x_(o):C_(a),h=0,f=0;if(e.top<c.top+vn(t,"top")?f=-(c.top-e.top+vn(r,"top")):e.bottom>c.bottom-vn(t,"bottom")&&(f=e.bottom-e.top>c.bottom-c.top?e.top+vn(r,"top")-c.top:e.bottom-c.bottom+vn(r,"bottom")),e.left<c.left+vn(t,"left")?h=-(c.left-e.left+vn(r,"left")):e.right>c.right-vn(t,"right")&&(h=e.right-c.right+vn(r,"right")),h||f)if(l)o.defaultView.scrollBy(h,f);else{let m=a.scrollLeft,b=a.scrollTop;f&&(a.scrollTop+=f),h&&(a.scrollLeft+=h);let v=a.scrollLeft-m,w=a.scrollTop-b;e={left:e.left-v,top:e.top-w,right:e.right-v,bottom:e.bottom-w}}if(l||/^(fixed|sticky)$/.test(getComputedStyle(s).position))break}}function w_(i){let e=i.dom.getBoundingClientRect(),n=Math.max(0,e.top),t,r;for(let o=(e.left+e.right)/2,s=n+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=i.root.elementFromPoint(o,s);if(!a||a==i.dom||!i.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=n-20){t=a,r=l.top;break}}return{refDOM:t,refTop:r,stack:Vm(i.dom)}}function Vm(i){let e=[],n=i.ownerDocument;for(let t=i;t&&(e.push({dom:t,top:t.scrollTop,left:t.scrollLeft}),i!=n);t=Fo(t));return e}function S_({refDOM:i,refTop:e,stack:n}){let t=i?i.getBoundingClientRect().top:0;Lm(n,t==0?0:t-e)}function Lm(i,e){for(let n=0;n<i.length;n++){let{dom:t,top:r,left:o}=i[n];t.scrollTop!=r+e&&(t.scrollTop=r+e),t.scrollLeft!=o&&(t.scrollLeft=o)}}var hr=null;function E_(i){if(i.setActive)return i.setActive();if(hr)return i.focus(hr);let e=Vm(i);i.focus(hr==null?{get preventScroll(){return hr={preventScroll:!0},!0}}:void 0),hr||(hr=!1,Lm(e,0))}function jm(i,e){let n,t=2e8,r,o=0,s=e.top,a=e.top,l,c;for(let h=i.firstChild,f=0;h;h=h.nextSibling,f++){let m;if(h.nodeType==1)m=h.getClientRects();else if(h.nodeType==3)m=yn(h).getClientRects();else continue;for(let b=0;b<m.length;b++){let v=m[b];if(v.top<=s&&v.bottom>=a){s=Math.max(v.bottom,s),a=Math.min(v.top,a);let w=v.left>e.left?v.left-e.left:v.right<e.left?e.left-v.right:0;if(w<t){n=h,t=w,r=w&&n.nodeType==3?{left:v.right<e.left?v.right:v.left,top:e.top}:e,h.nodeType==1&&w&&(o=f+(e.left>=(v.left+v.right)/2?1:0));continue}}else v.top>e.top&&!l&&v.left<=e.left&&v.right>=e.left&&(l=h,c={left:Math.max(v.left,Math.min(v.right,e.left)),top:v.top});!n&&(e.left>=v.right&&e.top>=v.top||e.left>=v.left&&e.top>=v.bottom)&&(o=f+1)}}return!n&&l&&(n=l,r=c,t=0),n&&n.nodeType==3?M_(n,r):!n||t&&n.nodeType==1?{node:i,offset:o}:jm(n,r)}function M_(i,e){let n=i.nodeValue.length,t=document.createRange();for(let r=0;r<n;r++){t.setEnd(i,r+1),t.setStart(i,r);let o=qn(t,1);if(o.top!=o.bottom&&gd(e,o))return{node:i,offset:r+(e.left>=(o.left+o.right)/2?1:0)}}return{node:i,offset:0}}function gd(i,e){return i.left>=e.left-1&&i.left<=e.right+1&&i.top>=e.top-1&&i.top<=e.bottom+1}function k_(i,e){let n=i.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<i.getBoundingClientRect().left?n:i}function I_(i,e,n){let{node:t,offset:r}=jm(e,n),o=-1;if(t.nodeType==1&&!t.firstChild){let s=t.getBoundingClientRect();o=s.left!=s.right&&n.left>(s.left+s.right)/2?1:-1}return i.docView.posFromDOM(t,r,o)}function T_(i,e,n,t){let r=-1;for(let o=e,s=!1;o!=i.dom;){let a=i.docView.nearestDesc(o,!0);if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)){let l=a.dom.getBoundingClientRect();if(a.node.isBlock&&a.parent&&(!s&&l.left>t.left||l.top>t.top?r=a.posBefore:(!s&&l.right<t.left||l.bottom<t.top)&&(r=a.posAfter),s=!0),!a.contentDOM&&r<0&&!a.node.isText)return(a.node.isBlock?t.top<(l.top+l.bottom)/2:t.left<(l.left+l.right)/2)?a.posBefore:a.posAfter}o=a.dom.parentNode}return r>-1?r:i.docView.posFromDOM(e,n,-1)}function zm(i,e,n){let t=i.childNodes.length;if(t&&n.top<n.bottom)for(let r=Math.max(0,Math.min(t-1,Math.floor(t*(e.top-n.top)/(n.bottom-n.top))-2)),o=r;;){let s=i.childNodes[o];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(gd(e,c))return zm(s,e,c)}}if((o=(o+1)%t)==r)break}return i}function D_(i,e){let n=i.dom.ownerDocument,t,r=0,o=y_(n,e.left,e.top);o&&({node:t,offset:r}=o);let s=(i.root.elementFromPoint?i.root:n).elementFromPoint(e.left,e.top),a;if(!s||!i.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=i.dom.getBoundingClientRect();if(!gd(e,c)||(s=zm(i.dom,e,c),!s))return null}if(dt)for(let c=s;t&&c;c=Fo(c))c.draggable&&(t=void 0);if(s=k_(s,e),t){if(zt&&t.nodeType==1&&(r=Math.min(r,t.childNodes.length),r<t.childNodes.length)){let h=t.childNodes[r],f;h.nodeName=="IMG"&&(f=h.getBoundingClientRect()).right<=e.left&&f.bottom>e.top&&r++}let c;Bo&&r&&t.nodeType==1&&(c=t.childNodes[r-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&r--,t==i.dom&&r==t.childNodes.length-1&&t.lastChild.nodeType==1&&e.top>t.lastChild.getBoundingClientRect().bottom?a=i.state.doc.content.size:(r==0||t.nodeType!=1||t.childNodes[r-1].nodeName!="BR")&&(a=T_(i,t,r,e))}a==null&&(a=I_(i,s,e));let l=i.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function om(i){return i.top<i.bottom||i.left<i.right}function qn(i,e){let n=i.getClientRects();if(n.length){let t=n[e<0?0:n.length-1];if(om(t))return t}return Array.prototype.find.call(n,om)||i.getBoundingClientRect()}var N_=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Bm(i,e,n){let{node:t,offset:r,atom:o}=i.docView.domFromPos(e,n<0?-1:1),s=Bo||zt;if(t.nodeType==3)if(s&&(N_.test(t.nodeValue)||(n<0?!r:r==t.nodeValue.length))){let l=qn(yn(t,r,r),n);if(zt&&r&&/\s/.test(t.nodeValue[r-1])&&r<t.nodeValue.length){let c=qn(yn(t,r-1,r-1),-1);if(c.top==l.top){let h=qn(yn(t,r,r+1),-1);if(h.top!=l.top)return Ro(h,h.left<c.left)}}return l}else{let l=r,c=r,h=n<0?1:-1;return n<0&&!r?(c++,h=-1):n>=0&&r==t.nodeValue.length?(l--,h=1):n<0?l--:c++,Ro(qn(yn(t,l,c),h),h<0)}if(!i.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&r&&(n<0||r==Qt(t))){let l=t.childNodes[r-1];if(l.nodeType==1)return Wc(l.getBoundingClientRect(),!1)}if(o==null&&r<Qt(t)){let l=t.childNodes[r];if(l.nodeType==1)return Wc(l.getBoundingClientRect(),!0)}return Wc(t.getBoundingClientRect(),n>=0)}if(o==null&&r&&(n<0||r==Qt(t))){let l=t.childNodes[r-1],c=l.nodeType==3?yn(l,Qt(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ro(qn(c,1),!1)}if(o==null&&r<Qt(t)){let l=t.childNodes[r];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?yn(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return Ro(qn(c,-1),!0)}return Ro(qn(t.nodeType==3?yn(t):t,-n),n>=0)}function Ro(i,e){if(i.width==0)return i;let n=e?i.left:i.right;return{top:i.top,bottom:i.bottom,left:n,right:n}}function Wc(i,e){if(i.height==0)return i;let n=e?i.top:i.bottom;return{top:n,bottom:n,left:i.left,right:i.right}}function Um(i,e,n){let t=i.state,r=i.root.activeElement;t!=e&&i.updateState(e),r!=i.dom&&i.focus();try{return n()}finally{t!=e&&i.updateState(t),r!=i.dom&&r&&r.focus()}}function O_(i,e,n){let t=e.selection,r=n=="up"?t.$from:t.$to;return Um(i,e,()=>{let{node:o}=i.docView.domFromPos(r.pos,n=="up"?-1:1);for(;;){let a=i.docView.nearestDesc(o,!0);if(!a)break;if(a.node.isBlock){o=a.contentDOM||a.dom;break}o=a.dom.parentNode}let s=Bm(i,r.pos,1);for(let a=o.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=yn(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let h=l[c];if(h.bottom>h.top+1&&(n=="up"?s.top-h.top>(h.bottom-s.top)*2:h.bottom-s.bottom>(s.bottom-h.top)*2))return!1}}return!0})}var R_=/[\u0590-\u08ac]/;function A_(i,e,n){let{$head:t}=e.selection;if(!t.parent.isTextblock)return!1;let r=t.parentOffset,o=!r,s=r==t.parent.content.size,a=i.domSelection();return a?!R_.test(t.parent.textContent)||!a.modify?n=="left"||n=="backward"?o:s:Um(i,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:h,anchorOffset:f}=i.domSelectionRange(),m=a.caretBidiLevel;a.modify("move",n,"character");let b=t.depth?i.docView.domAfterPos(t.before()):i.dom,{focusNode:v,focusOffset:w}=i.domSelectionRange(),S=v&&!b.contains(v.nodeType==1?v:v.parentNode)||l==v&&c==w;try{a.collapse(h,f),l&&(l!=h||c!=f)&&a.extend&&a.extend(l,c)}catch{}return m!=null&&(a.caretBidiLevel=m),S}):t.pos==t.start()||t.pos==t.end()}var sm=null,am=null,lm=!1;function P_(i,e,n){return sm==e&&am==n?lm:(sm=e,am=n,lm=n=="up"||n=="down"?O_(i,e,n):A_(i,e,n))}var Pt=0,cm=1,_i=2,Yt=3,Mi=class{constructor(e,n,t,r){this.parent=e,this.children=n,this.dom=t,this.contentDOM=r,this.dirty=Pt,t.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,t){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,t=this.posAtStart;;n++){let r=this.children[n];if(r==e)return t;t+=r.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,t){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(t<0){let o,s;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(s)+s.size:this.posAtStart}else{let o,s;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((s=o.pmViewDesc)&&s.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(s):this.posAtEnd}let r;if(e==this.dom&&this.contentDOM)r=n>qe(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))r=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){r=!1;break}if(o.previousSibling)break}if(r==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){r=!0;break}if(o.nextSibling)break}}return r??t>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let t=!0,r=e;r;r=r.parentNode){let o=this.getDesc(r),s;if(o&&(!n||o.node))if(t&&(s=o.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))t=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let t=n;t;t=t.parent)if(t==this)return n}posFromDOM(e,n,t){for(let r=e;r;r=r.parentNode){let o=this.getDesc(r);if(o)return o.localPosFromDOM(e,n,t)}return-1}descAt(e){for(let n=0,t=0;n<this.children.length;n++){let r=this.children[n],o=t+r.size;if(t==e&&o!=t){for(;!r.border&&r.children.length;)r=r.children[0];return r}if(e<o)return r.descAt(e-t-r.border);t=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let t=0,r=0;for(let o=0;t<this.children.length;t++){let s=this.children[t],a=o+s.size;if(a>e||s instanceof Ma){r=e-o;break}o=a}if(r)return this.children[t].domFromPos(r-this.children[t].border,n);for(let o;t&&!(o=this.children[t-1]).size&&o instanceof Sa&&o.side>=0;t--);if(n<=0){let o,s=!0;for(;o=t?this.children[t-1]:null,!(!o||o.dom.parentNode==this.contentDOM);t--,s=!1);return o&&n&&s&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?qe(o.dom)+1:0}}else{let o,s=!0;for(;o=t<this.children.length?this.children[t]:null,!(!o||o.dom.parentNode==this.contentDOM);t++,s=!1);return o&&s&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?qe(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,t=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let r=-1,o=-1;for(let s=t,a=0;;a++){let l=this.children[a],c=s+l.size;if(r==-1&&e<=c){let h=s+l.border;if(e>=h&&n<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,n,h);e=s;for(let f=a;f>0;f--){let m=this.children[f-1];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(1)){r=qe(m.dom)+1;break}e-=m.size}r==-1&&(r=0)}if(r>-1&&(c>n||a==this.children.length-1)){n=c;for(let h=a+1;h<this.children.length;h++){let f=this.children[h];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(-1)){o=qe(f.dom);break}n+=f.size}o==-1&&(o=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:n,fromOffset:r,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:t}=this.domFromPos(e,0);if(n.nodeType!=1||t==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[t]}setSelection(e,n,t,r=!1){let o=Math.min(e,n),s=Math.max(e,n);for(let m=0,b=0;m<this.children.length;m++){let v=this.children[m],w=b+v.size;if(o>b&&s<w)return v.setSelection(e-b-v.border,n-b-v.border,t,r);b=w}let a=this.domFromPos(e,e?-1:1),l=n==e?a:this.domFromPos(n,n?-1:1),c=t.getSelection(),h=!1;if((zt||dt)&&e==n){let{node:m,offset:b}=a;if(m.nodeType==3){if(h=!!(b&&m.nodeValue[b-1]==`
`),h&&b==m.nodeValue.length)for(let v=m,w;v;v=v.parentNode){if(w=v.nextSibling){w.nodeName=="BR"&&(a=l={node:w.parentNode,offset:qe(w)+1});break}let S=v.pmViewDesc;if(S&&S.node&&S.node.isBlock)break}}else{let v=m.childNodes[b-1];h=v&&(v.nodeName=="BR"||v.contentEditable=="false")}}if(zt&&c.focusNode&&c.focusNode!=l.node&&c.focusNode.nodeType==1){let m=c.focusNode.childNodes[c.focusOffset];m&&m.contentEditable=="false"&&(r=!0)}if(!(r||h&&dt)&&Ei(a.node,a.offset,c.anchorNode,c.anchorOffset)&&Ei(l.node,l.offset,c.focusNode,c.focusOffset))return;let f=!1;if((c.extend||e==n)&&!h){c.collapse(a.node,a.offset);try{e!=n&&c.extend(l.node,l.offset),f=!0}catch{}}if(!f){if(e>n){let b=a;a=l,l=b}let m=document.createRange();m.setEnd(l.node,l.offset),m.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(m)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let t=0,r=0;r<this.children.length;r++){let o=this.children[r],s=t+o.size;if(t==s?e<=s&&n>=t:e<s&&n>t){let a=t+o.border,l=s-o.border;if(e>=a&&n<=l){this.dirty=e==t||n==s?_i:cm,e==a&&n==l&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Yt:o.markDirty(e-a,n-a);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?_i:Yt}t=s}this.dirty=_i}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let t=e==1?_i:cm;n.dirty<t&&(n.dirty=t)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}},Sa=class extends Mi{constructor(e,n,t,r){let o,s=n.type.toDOM;if(typeof s=="function"&&(s=s(t,()=>{if(!o)return r;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==Pt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}},td=class extends Mi{constructor(e,n,t,r){super(e,[],n,null),this.textDOM=t,this.text=r}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}},vr=class i extends Mi{constructor(e,n,t,r){super(e,[],t,r),this.mark=n}static create(e,n,t,r){let o=r.nodeViews[n.type.name],s=o&&o(n,r,t);return(!s||!s.dom)&&(s=mn.renderSpec(document,n.type.spec.toDOM(n,t),null,n.attrs)),new i(e,n,s.dom,s.contentDOM||s.dom)}parseRule(){return this.dirty&Yt||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Yt&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Pt){let t=this.parent;for(;!t.node;)t=t.parent;t.dirty<this.dirty&&(t.dirty=this.dirty),this.dirty=Pt}}slice(e,n,t){let r=i.create(this.parent,this.mark,!0,t),o=this.children,s=this.size;n<s&&(o=sd(o,n,s,t)),e>0&&(o=sd(o,0,e,t));for(let a=0;a<o.length;a++)o[a].parent=r;return r.children=o,r}},Wn=class i extends Mi{constructor(e,n,t,r,o,s,a,l,c){super(e,[],o,s),this.node=n,this.outerDeco=t,this.innerDeco=r,this.nodeDOM=a}static create(e,n,t,r,o,s){let a=o.nodeViews[n.type.name],l,c=a&&a(n,o,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},t,r),h=c&&c.dom,f=c&&c.contentDOM;if(n.isText){if(!h)h=document.createTextNode(n.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:f}=mn.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!f&&!n.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),n.type.spec.draggable&&(h.draggable=!0));let m=h;return h=Hm(h,t,n),c?l=new nd(e,n,t,r,h,f||null,m,c,o,s+1):n.isText?new Ea(e,n,t,r,h,m,o):new i(e,n,t,r,h,f||null,m,o,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let t=this.children[n];if(this.dom.contains(t.dom.parentNode)){e.contentElement=t.dom.parentNode;break}}e.contentElement||(e.getContent=()=>T.empty)}return e}matchesNode(e,n,t){return this.dirty==Pt&&e.eq(this.node)&&rd(n,this.outerDeco)&&t.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let t=this.node.inlineContent,r=n,o=e.composing?this.localCompositionInfo(e,n):null,s=o&&o.pos>-1?o:null,a=o&&o.pos<0,l=new od(this,s&&s.node,e);j_(this.node,this.innerDeco,(c,h,f)=>{c.spec.marks?l.syncToMarks(c.spec.marks,t,e):c.type.side>=0&&!f&&l.syncToMarks(h==this.node.childCount?he.none:this.node.child(h).marks,t,e),l.placeWidget(c,e,r)},(c,h,f,m)=>{l.syncToMarks(c.marks,t,e);let b;l.findNodeMatch(c,h,f,m)||a&&e.state.selection.from>r&&e.state.selection.to<r+c.nodeSize&&(b=l.findIndexWithChild(o.node))>-1&&l.updateNodeAt(c,h,f,b,e)||l.updateNextNode(c,h,f,e,m,r)||l.addNode(c,h,f,e,r),r+=c.nodeSize}),l.syncToMarks([],t,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==_i)&&(s&&this.protectLocalComposition(e,s),qm(this.contentDOM,this.children,e),gr&&z_(this.dom))}localCompositionInfo(e,n){let{from:t,to:r}=e.state.selection;if(!(e.state.selection instanceof ue)||t<n||r>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let s=o.nodeValue,a=B_(this.node.content,s,t-n,r-n);return a<0?null:{node:o,pos:a,text:s}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:t,text:r}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let s=new td(this,o,n,r);e.input.compositionNodes.push(s),this.children=sd(this.children,t,t+r.length,e,s)}update(e,n,t,r){return this.dirty==Yt||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,t,r),!0)}updateInner(e,n,t,r){this.updateOuterDeco(n),this.node=e,this.innerDeco=t,this.contentDOM&&this.updateChildren(r,this.posAtStart),this.dirty=Pt}updateOuterDeco(e){if(rd(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,t=this.dom;this.dom=$m(this.dom,this.nodeDOM,id(this.outerDeco,this.node,n),id(e,this.node,n)),this.dom!=t&&(t.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}};function dm(i,e,n,t,r){Hm(t,e,i);let o=new Wn(void 0,i,e,n,t,t,t,r,0);return o.contentDOM&&o.updateChildren(r,0),o}var Ea=class i extends Wn{constructor(e,n,t,r,o,s,a){super(e,n,t,r,o,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,t,r){return this.dirty==Yt||this.dirty!=Pt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Pt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,r.trackWrites==this.nodeDOM&&(r.trackWrites=null)),this.node=e,this.dirty=Pt,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,t){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,t)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,t){let r=this.node.cut(e,n),o=document.createTextNode(r.text);return new i(this.parent,r,this.outerDeco,this.innerDeco,o,o,t)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Yt)}get domAtom(){return!1}isText(e){return this.node.text==e}},Ma=class extends Mi{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Pt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}},nd=class extends Wn{constructor(e,n,t,r,o,s,a,l,c,h){super(e,n,t,r,o,s,a,c,h),this.spec=l}update(e,n,t,r){if(this.dirty==Yt)return!1;if(this.spec.update){let o=this.spec.update(e,n,t);return o&&this.updateInner(e,n,t,r),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,t,r)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,t,r){this.spec.setSelection?this.spec.setSelection(e,n,t):super.setSelection(e,n,t,r)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}};function qm(i,e,n){let t=i.firstChild,r=!1;for(let o=0;o<e.length;o++){let s=e[o],a=s.dom;if(a.parentNode==i){for(;a!=t;)t=um(t),r=!0;t=t.nextSibling}else r=!0,i.insertBefore(a,t);if(s instanceof vr){let l=t?t.previousSibling:i.lastChild;qm(s.contentDOM,s.children,n),t=l?l.nextSibling:i.firstChild}}for(;t;)t=um(t),r=!0;r&&n.trackWrites==i&&(n.trackWrites=null)}var Ao=function(i){i&&(this.nodeName=i)};Ao.prototype=Object.create(null);var xi=[new Ao];function id(i,e,n){if(i.length==0)return xi;let t=n?xi[0]:new Ao,r=[t];for(let o=0;o<i.length;o++){let s=i[o].type.attrs;if(s){s.nodeName&&r.push(t=new Ao(s.nodeName));for(let a in s){let l=s[a];l!=null&&(n&&r.length==1&&r.push(t=new Ao(e.isInline?"span":"div")),a=="class"?t.class=(t.class?t.class+" ":"")+l:a=="style"?t.style=(t.style?t.style+";":"")+l:a!="nodeName"&&(t[a]=l))}}}return r}function $m(i,e,n,t){if(n==xi&&t==xi)return e;let r=e;for(let o=0;o<t.length;o++){let s=t[o],a=n[o];if(o){let l;a&&a.nodeName==s.nodeName&&r!=i&&(l=r.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(r),a=xi[0]),r=l}F_(r,a||xi[0],s)}return r}function F_(i,e,n){for(let t in e)t!="class"&&t!="style"&&t!="nodeName"&&!(t in n)&&i.removeAttribute(t);for(let t in n)t!="class"&&t!="style"&&t!="nodeName"&&n[t]!=e[t]&&i.setAttribute(t,n[t]);if(e.class!=n.class){let t=e.class?e.class.split(" ").filter(Boolean):[],r=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<t.length;o++)r.indexOf(t[o])==-1&&i.classList.remove(t[o]);for(let o=0;o<r.length;o++)t.indexOf(r[o])==-1&&i.classList.add(r[o]);i.classList.length==0&&i.removeAttribute("class")}if(e.style!=n.style){if(e.style){let t=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,r;for(;r=t.exec(e.style);)i.style.removeProperty(r[1])}n.style&&(i.style.cssText+=n.style)}}function Hm(i,e,n){return $m(i,i,xi,id(e,n,i.nodeType!=1))}function rd(i,e){if(i.length!=e.length)return!1;for(let n=0;n<i.length;n++)if(!i[n].type.eq(e[n].type))return!1;return!0}function um(i){let e=i.nextSibling;return i.parentNode.removeChild(i),e}var od=class{constructor(e,n,t){this.lock=n,this.view=t,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=V_(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let t=e;t<n;t++)this.top.children[t].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,t){let r=0,o=this.stack.length>>1,s=Math.min(o,e.length);for(;r<s&&(r==o-1?this.top:this.stack[r+1<<1]).matchesMark(e[r])&&e[r].type.spec.spanning!==!1;)r++;for(;r<o;)this.destroyRest(),this.top.dirty=Pt,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[o])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=vr.create(this.top,e[o],n,t);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,t,r){let o=-1,s;if(r>=this.preMatch.index&&(s=this.preMatch.matches[r-this.preMatch.index]).parent==this.top&&s.matchesNode(e,n,t))o=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,n,t)&&!this.preMatch.matched.has(c)){o=a;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,t,r,o){let s=this.top.children[r];return s.dirty==Yt&&s.dom==s.contentDOM&&(s.dirty=_i),s.update(e,n,t,o)?(this.destroyBetween(this.index,r),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let t=e.pmViewDesc;if(t){for(let r=this.index;r<this.top.children.length;r++)if(this.top.children[r]==t)return r}return-1}e=n}}updateNextNode(e,n,t,r,o,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Wn){let c=this.preMatch.matched.get(l);if(c!=null&&c!=o)return!1;let h=l.dom,f,m=this.isLocked(h)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=Yt&&rd(n,l.outerDeco));if(!m&&l.update(e,n,t,r))return this.destroyBetween(this.index,a),l.dom!=h&&(this.changed=!0),this.index++,!0;if(!m&&(f=this.recreateWrapper(l,e,n,t,r,s)))return this.top.children[this.index]=f,f.contentDOM&&(f.dirty=_i,f.updateChildren(r,s+1),f.dirty=Pt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,t,r,o,s){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content))return null;let a=Wn.create(this.top,n,t,r,o,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,n,t,r,o){let s=Wn.create(this.top,e,n,t,r,o);s.contentDOM&&s.updateChildren(r,o+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,n,t){let r=this.index<this.top.children.length?this.top.children[this.index]:null;if(r&&r.matchesWidget(e)&&(e==r.widget||!r.widget.type.toDOM.parentNode))this.index++;else{let o=new Sa(this.top,e,n,t);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof vr;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof Ea)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((dt||Ze)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let t=document.createElement(e);e=="IMG"&&(t.className="ProseMirror-separator",t.alt=""),e=="BR"&&(t.className="ProseMirror-trailingBreak");let r=new Ma(this.top,[],t,null);n!=this.top?n.children.push(r):n.children.splice(this.index++,0,r),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}};function V_(i,e){let n=e,t=n.children.length,r=i.childCount,o=new Map,s=[];e:for(;r>0;){let a;for(;;)if(t){let c=n.children[t-1];if(c instanceof vr)n=c,t=c.children.length;else{a=c,t--;break}}else{if(n==e)break e;t=n.parent.children.indexOf(n),n=n.parent}let l=a.node;if(l){if(l!=i.child(r-1))break;--r,o.set(a,r),s.push(a)}}return{index:r,matched:o,matches:s.reverse()}}function L_(i,e){return i.type.side-e.type.side}function j_(i,e,n,t){let r=e.locals(i),o=0;if(r.length==0){for(let c=0;c<i.childCount;c++){let h=i.child(c);t(h,r,e.forChild(o,h),c),o+=h.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let h,f;for(;s<r.length&&r[s].to==o;){let S=r[s++];S.widget&&(h?(f||(f=[h])).push(S):h=S)}if(h)if(f){f.sort(L_);for(let S=0;S<f.length;S++)n(f[S],c,!!l)}else n(h,c,!!l);let m,b;if(l)b=-1,m=l,l=null;else if(c<i.childCount)b=c,m=i.child(c++);else break;for(let S=0;S<a.length;S++)a[S].to<=o&&a.splice(S--,1);for(;s<r.length&&r[s].from<=o&&r[s].to>o;)a.push(r[s++]);let v=o+m.nodeSize;if(m.isText){let S=v;s<r.length&&r[s].from<S&&(S=r[s].from);for(let I=0;I<a.length;I++)a[I].to<S&&(S=a[I].to);S<v&&(l=m.cut(S-o),m=m.cut(0,S-o),v=S,b=-1)}else for(;s<r.length&&r[s].to<v;)s++;let w=m.isInline&&!m.isLeaf?a.filter(S=>!S.inline):a.slice();t(m,w,e.forChild(o,m),b),o=v}}function z_(i){if(i.nodeName=="UL"||i.nodeName=="OL"){let e=i.style.cssText;i.style.cssText=e+"; list-style: square !important",window.getComputedStyle(i).listStyle,i.style.cssText=e}}function B_(i,e,n,t){for(let r=0,o=0;r<i.childCount&&o<=t;){let s=i.child(r++),a=o;if(o+=s.nodeSize,!s.isText)continue;let l=s.text;for(;r<i.childCount;){let c=i.child(r++);if(o+=c.nodeSize,!c.isText)break;l+=c.text}if(o>=n){if(o>=t&&l.slice(t-e.length-a,t-a)==e)return t-e.length;let c=a<t?l.lastIndexOf(e,t-a-1):-1;if(c>=0&&c+e.length+a>=n)return a+c;if(n==t&&l.length>=t+e.length-a&&l.slice(t-a,t-a+e.length)==e)return t}}return-1}function sd(i,e,n,t,r){let o=[];for(let s=0,a=0;s<i.length;s++){let l=i[s],c=a,h=a+=l.size;c>=n||h<=e?o.push(l):(c<e&&o.push(l.slice(0,e-c,t)),r&&(o.push(r),r=void 0),h>n&&o.push(l.slice(n-c,l.size,t)))}return o}function vd(i,e=null){let n=i.domSelectionRange(),t=i.state.doc;if(!n.focusNode)return null;let r=i.docView.nearestDesc(n.focusNode),o=r&&r.size==0,s=i.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(s<0)return null;let a=t.resolve(s),l,c;if(Aa(n)){for(l=a;r&&!r.node;)r=r.parent;let h=r.node;if(r&&h.isAtom&&B.isSelectable(h)&&r.parent&&!(h.isInline&&g_(n.focusNode,n.focusOffset,r.dom))){let f=r.posBefore;c=new B(s==f?a:t.resolve(f))}}else{let h=i.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(h<0)return null;l=t.resolve(h)}if(!c){let h=e=="pointer"||i.state.selection.head<a.pos&&!o?1:-1;c=yd(i,l,a,h)}return c}function Gm(i){return i.editable?i.hasFocus():Km(i)&&document.activeElement&&document.activeElement.contains(i.dom)}function bn(i,e=!1){let n=i.state.selection;if(Wm(i,n),!!Gm(i)){if(!e&&i.input.mouseDown&&i.input.mouseDown.allowDefault&&Ze){let t=i.domSelectionRange(),r=i.domObserver.currentSelection;if(t.anchorNode&&r.anchorNode&&Ei(t.anchorNode,t.anchorOffset,r.anchorNode,r.anchorOffset)){i.input.mouseDown.delayedSelectionSync=!0,i.domObserver.setCurSelection();return}}if(i.domObserver.disconnectSelection(),i.cursorWrapper)q_(i);else{let{anchor:t,head:r}=n,o,s;hm&&!(n instanceof ue)&&(n.$from.parent.inlineContent||(o=pm(i,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(s=pm(i,n.to))),i.docView.setSelection(t,r,i.root,e),hm&&(o&&fm(o),s&&fm(s)),n.visible?i.dom.classList.remove("ProseMirror-hideselection"):(i.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&U_(i))}i.domObserver.setCurSelection(),i.domObserver.connectSelection()}}var hm=dt||Ze&&Fm<63;function pm(i,e){let{node:n,offset:t}=i.docView.domFromPos(e,0),r=t<n.childNodes.length?n.childNodes[t]:null,o=t?n.childNodes[t-1]:null;if(dt&&r&&r.contentEditable=="false")return Kc(r);if((!r||r.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(r)return Kc(r);if(o)return Kc(o)}}function Kc(i){return i.contentEditable="true",dt&&i.draggable&&(i.draggable=!1,i.wasDraggable=!0),i}function fm(i){i.contentEditable="false",i.wasDraggable&&(i.draggable=!0,i.wasDraggable=null)}function U_(i){let e=i.dom.ownerDocument;e.removeEventListener("selectionchange",i.input.hideSelectionGuard);let n=i.domSelectionRange(),t=n.anchorNode,r=n.anchorOffset;e.addEventListener("selectionchange",i.input.hideSelectionGuard=()=>{(n.anchorNode!=t||n.anchorOffset!=r)&&(e.removeEventListener("selectionchange",i.input.hideSelectionGuard),setTimeout(()=>{(!Gm(i)||i.state.selection.visible)&&i.dom.classList.remove("ProseMirror-hideselection")},20))})}function q_(i){let e=i.domSelection(),n=document.createRange();if(!e)return;let t=i.cursorWrapper.dom,r=t.nodeName=="IMG";r?n.setStart(t.parentNode,qe(t)+1):n.setStart(t,0);let o=i.state.selection;if(o.empty)n.collapse(!0);else{let s=i.domAtPos(o.to);n.setEnd(s.node,s.offset)}e.removeAllRanges(),e.addRange(n),!r&&!i.state.selection.visible&&mt&&Gn<=11&&(t.disabled=!0,t.disabled=!1)}function Wm(i,e){if(e instanceof B){let n=i.docView.descAt(e.from);n!=i.lastSelectedViewDesc&&(mm(i),n&&n.selectNode(),i.lastSelectedViewDesc=n)}else mm(i)}function mm(i){i.lastSelectedViewDesc&&(i.lastSelectedViewDesc.parent&&i.lastSelectedViewDesc.deselectNode(),i.lastSelectedViewDesc=void 0)}function yd(i,e,n,t){return i.someProp("createSelectionBetween",r=>r(i,e,n))||ue.between(e,n,t)}function gm(i){return i.editable&&!i.hasFocus()?!1:Km(i)}function Km(i){let e=i.domSelectionRange();if(!e.anchorNode)return!1;try{return i.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(i.editable||i.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function $_(i){let e=i.docView.domFromPos(i.state.selection.anchor,0),n=i.domSelectionRange();return Ei(e.node,e.offset,n.anchorNode,n.anchorOffset)}function ad(i,e){let{$anchor:n,$head:t}=i.selection,r=e>0?n.max(t):n.min(t),o=r.parent.inlineContent?r.depth?i.doc.resolve(e>0?r.after():r.before()):null:r;return o&&J.findFrom(o,e)}function $n(i,e){return i.dispatch(i.state.tr.setSelection(e).scrollIntoView()),!0}function vm(i,e,n){let t=i.state.selection;if(t instanceof ue)if(n.indexOf("s")>-1){let{$head:r}=t,o=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let s=i.state.doc.resolve(r.pos+o.nodeSize*(e<0?-1:1));return $n(i,new ue(t.$anchor,s))}else if(t.empty){if(i.endOfTextblock(e>0?"forward":"backward")){let r=ad(i.state,e);return r&&r instanceof B?$n(i,r):!1}else if(!(At&&n.indexOf("m")>-1)){let r=t.$head,o=r.textOffset?null:e<0?r.nodeBefore:r.nodeAfter,s;if(!o||o.isText)return!1;let a=e<0?r.pos-o.nodeSize:r.pos;return o.isAtom||(s=i.docView.descAt(a))&&!s.contentDOM?B.isSelectable(o)?$n(i,new B(e<0?i.state.doc.resolve(r.pos-o.nodeSize):r)):Bo?$n(i,new ue(i.state.doc.resolve(e<0?a:a+o.nodeSize))):!1:!1}}else return!1;else{if(t instanceof B&&t.node.isInline)return $n(i,new ue(e>0?t.$to:t.$from));{let r=ad(i.state,e);return r?$n(i,r):!1}}}function ka(i){return i.nodeType==3?i.nodeValue.length:i.childNodes.length}function Po(i,e){let n=i.pmViewDesc;return n&&n.size==0&&(e<0||i.nextSibling||i.nodeName!="BR")}function pr(i,e){return e<0?H_(i):G_(i)}function H_(i){let e=i.domSelectionRange(),n=e.focusNode,t=e.focusOffset;if(!n)return;let r,o,s=!1;for(zt&&n.nodeType==1&&t<ka(n)&&Po(n.childNodes[t],-1)&&(s=!0);;)if(t>0){if(n.nodeType!=1)break;{let a=n.childNodes[t-1];if(Po(a,-1))r=n,o=--t;else if(a.nodeType==3)n=a,t=n.nodeValue.length;else break}}else{if(Jm(n))break;{let a=n.previousSibling;for(;a&&Po(a,-1);)r=n.parentNode,o=qe(a),a=a.previousSibling;if(a)n=a,t=ka(n);else{if(n=n.parentNode,n==i.dom)break;t=0}}}s?ld(i,n,t):r&&ld(i,r,o)}function G_(i){let e=i.domSelectionRange(),n=e.focusNode,t=e.focusOffset;if(!n)return;let r=ka(n),o,s;for(;;)if(t<r){if(n.nodeType!=1)break;let a=n.childNodes[t];if(Po(a,1))o=n,s=++t;else break}else{if(Jm(n))break;{let a=n.nextSibling;for(;a&&Po(a,1);)o=a.parentNode,s=qe(a)+1,a=a.nextSibling;if(a)n=a,t=0,r=ka(n);else{if(n=n.parentNode,n==i.dom)break;t=r=0}}}o&&ld(i,o,s)}function Jm(i){let e=i.pmViewDesc;return e&&e.node&&e.node.isBlock}function W_(i,e){for(;i&&e==i.childNodes.length&&!zo(i);)e=qe(i)+1,i=i.parentNode;for(;i&&e<i.childNodes.length;){let n=i.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;i=n,e=0}}function K_(i,e){for(;i&&!e&&!zo(i);)e=qe(i),i=i.parentNode;for(;i&&e;){let n=i.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;i=n,e=i.childNodes.length}}function ld(i,e,n){if(e.nodeType!=3){let o,s;(s=W_(e,n))?(e=s,n=0):(o=K_(e,n))&&(e=o,n=o.nodeValue.length)}let t=i.domSelection();if(!t)return;if(Aa(t)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),t.removeAllRanges(),t.addRange(o)}else t.extend&&t.extend(e,n);i.domObserver.setCurSelection();let{state:r}=i;setTimeout(()=>{i.state==r&&bn(i)},50)}function ym(i,e){let n=i.state.doc.resolve(e);if(!(Ze||b_)&&n.parent.inlineContent){let r=i.coordsAtPos(e);if(e>n.start()){let o=i.coordsAtPos(e-1),s=(o.top+o.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(o.left-r.left)>1)return o.left<r.left?"ltr":"rtl"}if(e<n.end()){let o=i.coordsAtPos(e+1),s=(o.top+o.bottom)/2;if(s>r.top&&s<r.bottom&&Math.abs(o.left-r.left)>1)return o.left>r.left?"ltr":"rtl"}}return getComputedStyle(i.dom).direction=="rtl"?"rtl":"ltr"}function bm(i,e,n){let t=i.state.selection;if(t instanceof ue&&!t.empty||n.indexOf("s")>-1||At&&n.indexOf("m")>-1)return!1;let{$from:r,$to:o}=t;if(!r.parent.inlineContent||i.endOfTextblock(e<0?"up":"down")){let s=ad(i.state,e);if(s&&s instanceof B)return $n(i,s)}if(!r.parent.inlineContent){let s=e<0?r:o,a=t instanceof It?J.near(s,e):J.findFrom(s,e);return a?$n(i,a):!1}return!1}function _m(i,e){if(!(i.state.selection instanceof ue))return!0;let{$head:n,$anchor:t,empty:r}=i.state.selection;if(!n.sameParent(t))return!0;if(!r)return!1;if(i.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let s=i.state.tr;return e<0?s.delete(n.pos-o.nodeSize,n.pos):s.delete(n.pos,n.pos+o.nodeSize),i.dispatch(s),!0}return!1}function xm(i,e,n){i.domObserver.stop(),e.contentEditable=n,i.domObserver.start()}function J_(i){if(!dt||i.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=i.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let t=e.firstChild;xm(i,t,"true"),setTimeout(()=>xm(i,t,"false"),20)}return!1}function Q_(i){let e="";return i.ctrlKey&&(e+="c"),i.metaKey&&(e+="m"),i.altKey&&(e+="a"),i.shiftKey&&(e+="s"),e}function X_(i,e){let n=e.keyCode,t=Q_(e);if(n==8||At&&n==72&&t=="c")return _m(i,-1)||pr(i,-1);if(n==46&&!e.shiftKey||At&&n==68&&t=="c")return _m(i,1)||pr(i,1);if(n==13||n==27)return!0;if(n==37||At&&n==66&&t=="c"){let r=n==37?ym(i,i.state.selection.from)=="ltr"?-1:1:-1;return vm(i,r,t)||pr(i,r)}else if(n==39||At&&n==70&&t=="c"){let r=n==39?ym(i,i.state.selection.from)=="ltr"?1:-1:1;return vm(i,r,t)||pr(i,r)}else{if(n==38||At&&n==80&&t=="c")return bm(i,-1,t)||pr(i,-1);if(n==40||At&&n==78&&t=="c")return J_(i)||bm(i,1,t)||pr(i,1);if(t==(At?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Qm(i,e){i.someProp("transformCopied",b=>{e=b(e,i)});let n=[],{content:t,openStart:r,openEnd:o}=e;for(;r>1&&o>1&&t.childCount==1&&t.firstChild.childCount==1;){r--,o--;let b=t.firstChild;n.push(b.type.name,b.attrs!=b.type.defaultAttrs?b.attrs:null),t=b.content}let s=i.someProp("clipboardSerializer")||mn.fromSchema(i.state.schema),a=ng(),l=a.createElement("div");l.appendChild(s.serializeFragment(t,{document:a}));let c=l.firstChild,h,f=0;for(;c&&c.nodeType==1&&(h=tg[c.nodeName.toLowerCase()]);){for(let b=h.length-1;b>=0;b--){let v=a.createElement(h[b]);for(;l.firstChild;)v.appendChild(l.firstChild);l.appendChild(v),f++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${r} ${o}${f?` -${f}`:""} ${JSON.stringify(n)}`);let m=i.someProp("clipboardTextSerializer",b=>b(e,i))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:m,slice:e}}function Xm(i,e,n,t,r){let o=r.parent.type.spec.code,s,a;if(!n&&!e)return null;let l=e&&(t||o||!n);if(l){if(i.someProp("transformPastedText",m=>{e=m(e,o||t,i)}),o)return e?new O(T.from(i.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):O.empty;let f=i.someProp("clipboardTextParser",m=>m(e,r,t,i));if(f)a=f;else{let m=r.marks(),{schema:b}=i.state,v=mn.fromSchema(b);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(w=>{let S=s.appendChild(document.createElement("p"));w&&S.appendChild(v.serializeNode(b.text(w,m)))})}}else i.someProp("transformPastedHTML",f=>{n=f(n,i)}),s=ex(n),Bo&&tx(s);let c=s&&s.querySelector("[data-pm-slice]"),h=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let f=+h[3];f>0;f--){let m=s.firstChild;for(;m&&m.nodeType!=1;)m=m.nextSibling;if(!m)break;s=m}if(a||(a=(i.someProp("clipboardParser")||i.someProp("domParser")||Bn.fromSchema(i.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||h),context:r,ruleFromNode(m){return m.nodeName=="BR"&&!m.nextSibling&&m.parentNode&&!Y_.test(m.parentNode.nodeName)?{ignore:!0}:null}})),h)a=nx(Cm(a,+h[1],+h[2]),h[4]);else if(a=O.maxOpen(Z_(a.content,r),!0),a.openStart||a.openEnd){let f=0,m=0;for(let b=a.content.firstChild;f<a.openStart&&!b.type.spec.isolating;f++,b=b.firstChild);for(let b=a.content.lastChild;m<a.openEnd&&!b.type.spec.isolating;m++,b=b.lastChild);a=Cm(a,f,m)}return i.someProp("transformPasted",f=>{a=f(a,i)}),a}var Y_=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Z_(i,e){if(i.childCount<2)return i;for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.index(n)),o,s=[];if(i.forEach(a=>{if(!s)return;let l=r.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&o.length&&Zm(l,o,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=eg(s[s.length-1],o.length));let h=Ym(a,l);s.push(h),r=r.matchType(h.type),o=l}}),s)return T.from(s)}return i}function Ym(i,e,n=0){for(let t=e.length-1;t>=n;t--)i=e[t].create(null,T.from(i));return i}function Zm(i,e,n,t,r){if(r<i.length&&r<e.length&&i[r]==e[r]){let o=Zm(i,e,n,t.lastChild,r+1);if(o)return t.copy(t.content.replaceChild(t.childCount-1,o));if(t.contentMatchAt(t.childCount).matchType(r==i.length-1?n.type:i[r+1]))return t.copy(t.content.append(T.from(Ym(n,i,r+1))))}}function eg(i,e){if(e==0)return i;let n=i.content.replaceChild(i.childCount-1,eg(i.lastChild,e-1)),t=i.contentMatchAt(i.childCount).fillBefore(T.empty,!0);return i.copy(n.append(t))}function cd(i,e,n,t,r,o){let s=e<0?i.firstChild:i.lastChild,a=s.content;return i.childCount>1&&(o=0),r<t-1&&(a=cd(a,e,n,t,r+1,o)),r>=n&&(a=e<0?s.contentMatchAt(0).fillBefore(a,o<=r).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(T.empty,!0))),i.replaceChild(e<0?0:i.childCount-1,s.copy(a))}function Cm(i,e,n){return e<i.openStart&&(i=new O(cd(i.content,-1,e,i.openStart,0,i.openEnd),e,i.openEnd)),n<i.openEnd&&(i=new O(cd(i.content,1,n,i.openEnd,0,0),i.openStart,n)),i}var tg={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]},wm=null;function ng(){return wm||(wm=document.implementation.createHTMLDocument("title"))}function ex(i){let e=/^(\s*<meta [^>]*>)*/.exec(i);e&&(i=i.slice(e[0].length));let n=ng().createElement("div"),t=/<([a-z][^>\s]+)/i.exec(i),r;if((r=t&&tg[t[1].toLowerCase()])&&(i=r.map(o=>"<"+o+">").join("")+i+r.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=i,r)for(let o=0;o<r.length;o++)n=n.querySelector(r[o])||n;return n}function tx(i){let e=i.querySelectorAll(Ze?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let t=e[n];t.childNodes.length==1&&t.textContent=="\xA0"&&t.parentNode&&t.parentNode.replaceChild(i.ownerDocument.createTextNode(" "),t)}}function nx(i,e){if(!i.size)return i;let n=i.content.firstChild.type.schema,t;try{t=JSON.parse(e)}catch{return i}let{content:r,openStart:o,openEnd:s}=i;for(let a=t.length-2;a>=0;a-=2){let l=n.nodes[t[a]];if(!l||l.hasRequiredAttrs())break;r=T.from(l.create(t[a+1],r)),o++,s++}return new O(r,o,s)}var ut={},ht={},ix={touchstart:!0,touchmove:!0},dd=class{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}};function rx(i){for(let e in ut){let n=ut[e];i.dom.addEventListener(e,i.input.eventHandlers[e]=t=>{sx(i,t)&&!bd(i,t)&&(i.editable||!(t.type in ht))&&n(i,t)},ix[e]?{passive:!0}:void 0)}dt&&i.dom.addEventListener("input",()=>null),ud(i)}function Hn(i,e){i.input.lastSelectionOrigin=e,i.input.lastSelectionTime=Date.now()}function ox(i){i.domObserver.stop();for(let e in i.input.eventHandlers)i.dom.removeEventListener(e,i.input.eventHandlers[e]);clearTimeout(i.input.composingTimeout),clearTimeout(i.input.lastIOSEnterFallbackTimeout)}function ud(i){i.someProp("handleDOMEvents",e=>{for(let n in e)i.input.eventHandlers[n]||i.dom.addEventListener(n,i.input.eventHandlers[n]=t=>bd(i,t))})}function bd(i,e){return i.someProp("handleDOMEvents",n=>{let t=n[e.type];return t?t(i,e)||e.defaultPrevented:!1})}function sx(i,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=i.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function ax(i,e){!bd(i,e)&&ut[e.type]&&(i.editable||!(e.type in ht))&&ut[e.type](i,e)}ht.keydown=(i,e)=>{let n=e;if(i.input.shiftKey=n.keyCode==16||n.shiftKey,!rg(i,n)&&(i.input.lastKeyCode=n.keyCode,i.input.lastKeyCodeTime=Date.now(),!(jt&&Ze&&n.keyCode==13)))if(n.keyCode!=229&&i.domObserver.forceFlush(),gr&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let t=Date.now();i.input.lastIOSEnter=t,i.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{i.input.lastIOSEnter==t&&(i.someProp("handleKeyDown",r=>r(i,bi(13,"Enter"))),i.input.lastIOSEnter=0)},200)}else i.someProp("handleKeyDown",t=>t(i,n))||X_(i,n)?n.preventDefault():Hn(i,"key")};ht.keyup=(i,e)=>{e.keyCode==16&&(i.input.shiftKey=!1)};ht.keypress=(i,e)=>{let n=e;if(rg(i,n)||!n.charCode||n.ctrlKey&&!n.altKey||At&&n.metaKey)return;if(i.someProp("handleKeyPress",r=>r(i,n))){n.preventDefault();return}let t=i.state.selection;if(!(t instanceof ue)||!t.$from.sameParent(t.$to)){let r=String.fromCharCode(n.charCode);!/[\r\n]/.test(r)&&!i.someProp("handleTextInput",o=>o(i,t.$from.pos,t.$to.pos,r))&&i.dispatch(i.state.tr.insertText(r).scrollIntoView()),n.preventDefault()}};function Pa(i){return{left:i.clientX,top:i.clientY}}function lx(i,e){let n=e.x-i.clientX,t=e.y-i.clientY;return n*n+t*t<100}function _d(i,e,n,t,r){if(t==-1)return!1;let o=i.state.doc.resolve(t);for(let s=o.depth+1;s>0;s--)if(i.someProp(e,a=>s>o.depth?a(i,n,o.nodeAfter,o.before(s),r,!0):a(i,n,o.node(s),o.before(s),r,!1)))return!0;return!1}function mr(i,e,n){if(i.focused||i.focus(),i.state.selection.eq(e))return;let t=i.state.tr.setSelection(e);n=="pointer"&&t.setMeta("pointer",!0),i.dispatch(t)}function cx(i,e){if(e==-1)return!1;let n=i.state.doc.resolve(e),t=n.nodeAfter;return t&&t.isAtom&&B.isSelectable(t)?(mr(i,new B(n),"pointer"),!0):!1}function dx(i,e){if(e==-1)return!1;let n=i.state.selection,t,r;n instanceof B&&(t=n.node);let o=i.state.doc.resolve(e);for(let s=o.depth+1;s>0;s--){let a=s>o.depth?o.nodeAfter:o.node(s);if(B.isSelectable(a)){t&&n.$from.depth>0&&s>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?r=o.before(n.$from.depth):r=o.before(s);break}}return r!=null?(mr(i,B.create(i.state.doc,r),"pointer"),!0):!1}function ux(i,e,n,t,r){return _d(i,"handleClickOn",e,n,t)||i.someProp("handleClick",o=>o(i,e,t))||(r?dx(i,n):cx(i,n))}function hx(i,e,n,t){return _d(i,"handleDoubleClickOn",e,n,t)||i.someProp("handleDoubleClick",r=>r(i,e,t))}function px(i,e,n,t){return _d(i,"handleTripleClickOn",e,n,t)||i.someProp("handleTripleClick",r=>r(i,e,t))||fx(i,n,t)}function fx(i,e,n){if(n.button!=0)return!1;let t=i.state.doc;if(e==-1)return t.inlineContent?(mr(i,ue.create(t,0,t.content.size),"pointer"),!0):!1;let r=t.resolve(e);for(let o=r.depth+1;o>0;o--){let s=o>r.depth?r.nodeAfter:r.node(o),a=r.before(o);if(s.inlineContent)mr(i,ue.create(t,a+1,a+1+s.content.size),"pointer");else if(B.isSelectable(s))mr(i,B.create(t,a),"pointer");else continue;return!0}}function xd(i){return Ia(i)}var ig=At?"metaKey":"ctrlKey";ut.mousedown=(i,e)=>{let n=e;i.input.shiftKey=n.shiftKey;let t=xd(i),r=Date.now(),o="singleClick";r-i.input.lastClick.time<500&&lx(n,i.input.lastClick)&&!n[ig]&&(i.input.lastClick.type=="singleClick"?o="doubleClick":i.input.lastClick.type=="doubleClick"&&(o="tripleClick")),i.input.lastClick={time:r,x:n.clientX,y:n.clientY,type:o};let s=i.posAtCoords(Pa(n));s&&(o=="singleClick"?(i.input.mouseDown&&i.input.mouseDown.done(),i.input.mouseDown=new hd(i,s,n,!!t)):(o=="doubleClick"?hx:px)(i,s.pos,s.inside,n)?n.preventDefault():Hn(i,"pointer"))};var hd=class{constructor(e,n,t,r){this.view=e,this.pos=n,this.event=t,this.flushed=r,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!t[ig],this.allowDefault=t.shiftKey;let o,s;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),s=n.inside;else{let h=e.state.doc.resolve(n.pos);o=h.parent,s=h.depth?h.before():0}let a=r?null:t.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(t.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||c instanceof B&&c.from<=s&&c.to>s)&&(this.mightDrag={node:o,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&zt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Hn(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>bn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Pa(e))),this.updateAllowDefault(e),this.allowDefault||!n?Hn(this.view,"pointer"):ux(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||dt&&this.mightDrag&&!this.mightDrag.node.isAtom||Ze&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(mr(this.view,J.near(this.view.state.doc.resolve(n.pos)),"pointer"),e.preventDefault()):Hn(this.view,"pointer")}move(e){this.updateAllowDefault(e),Hn(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}};ut.touchstart=i=>{i.input.lastTouch=Date.now(),xd(i),Hn(i,"pointer")};ut.touchmove=i=>{i.input.lastTouch=Date.now(),Hn(i,"pointer")};ut.contextmenu=i=>xd(i);function rg(i,e){return i.composing?!0:dt&&Math.abs(e.timeStamp-i.input.compositionEndedAt)<500?(i.input.compositionEndedAt=-2e8,!0):!1}var mx=jt?5e3:-1;ht.compositionstart=ht.compositionupdate=i=>{if(!i.composing){i.domObserver.flush();let{state:e}=i,n=e.selection.$to;if(e.selection instanceof ue&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(t=>t.type.spec.inclusive===!1)))i.markCursor=i.state.storedMarks||n.marks(),Ia(i,!0),i.markCursor=null;else if(Ia(i),zt&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let t=i.domSelectionRange();for(let r=t.focusNode,o=t.focusOffset;r&&r.nodeType==1&&o!=0;){let s=o<0?r.lastChild:r.childNodes[o-1];if(!s)break;if(s.nodeType==3){let a=i.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else r=s,o=-1}}i.input.composing=!0}og(i,mx)};ht.compositionend=(i,e)=>{i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=e.timeStamp,i.input.compositionPendingChanges=i.domObserver.pendingRecords().length?i.input.compositionID:0,i.input.compositionNode=null,i.input.compositionPendingChanges&&Promise.resolve().then(()=>i.domObserver.flush()),i.input.compositionID++,og(i,20))};function og(i,e){clearTimeout(i.input.composingTimeout),e>-1&&(i.input.composingTimeout=setTimeout(()=>Ia(i),e))}function sg(i){for(i.composing&&(i.input.composing=!1,i.input.compositionEndedAt=vx());i.input.compositionNodes.length>0;)i.input.compositionNodes.pop().markParentsDirty()}function gx(i){let e=i.domSelectionRange();if(!e.focusNode)return null;let n=f_(e.focusNode,e.focusOffset),t=m_(e.focusNode,e.focusOffset);if(n&&t&&n!=t){let r=t.pmViewDesc,o=i.domObserver.lastChangedTextNode;if(n==o||t==o)return o;if(!r||!r.isText(t.nodeValue))return t;if(i.input.compositionNode==t){let s=n.pmViewDesc;if(!(!s||!s.isText(n.nodeValue)))return t}}return n||t}function vx(){let i=document.createEvent("Event");return i.initEvent("event",!0,!0),i.timeStamp}function Ia(i,e=!1){if(!(jt&&i.domObserver.flushingSoon>=0)){if(i.domObserver.forceFlush(),sg(i),e||i.docView&&i.docView.dirty){let n=vd(i);return n&&!n.eq(i.state.selection)?i.dispatch(i.state.tr.setSelection(n)):i.updateState(i.state),!0}return!1}}function yx(i,e){if(!i.dom.parentNode)return;let n=i.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let t=getSelection(),r=document.createRange();r.selectNodeContents(e),i.dom.blur(),t.removeAllRanges(),t.addRange(r),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),i.focus()},50)}var Vo=mt&&Gn<15||gr&&__<604;ut.copy=ht.cut=(i,e)=>{let n=e,t=i.state.selection,r=n.type=="cut";if(t.empty)return;let o=Vo?null:n.clipboardData,s=t.content(),{dom:a,text:l}=Qm(i,s);o?(n.preventDefault(),o.clearData(),o.setData("text/html",a.innerHTML),o.setData("text/plain",l)):yx(i,a),r&&i.dispatch(i.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function bx(i){return i.openStart==0&&i.openEnd==0&&i.content.childCount==1?i.content.firstChild:null}function _x(i,e){if(!i.dom.parentNode)return;let n=i.input.shiftKey||i.state.selection.$from.parent.type.spec.code,t=i.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(t.contentEditable="true"),t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus();let r=i.input.shiftKey&&i.input.lastKeyCode!=45;setTimeout(()=>{i.focus(),t.parentNode&&t.parentNode.removeChild(t),n?Lo(i,t.value,null,r,e):Lo(i,t.textContent,t.innerHTML,r,e)},50)}function Lo(i,e,n,t,r){let o=Xm(i,e,n,t,i.state.selection.$from);if(i.someProp("handlePaste",l=>l(i,r,o||O.empty)))return!0;if(!o)return!1;let s=bx(o),a=s?i.state.tr.replaceSelectionWith(s,t):i.state.tr.replaceSelection(o);return i.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function ag(i){let e=i.getData("text/plain")||i.getData("Text");if(e)return e;let n=i.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ht.paste=(i,e)=>{let n=e;if(i.composing&&!jt)return;let t=Vo?null:n.clipboardData,r=i.input.shiftKey&&i.input.lastKeyCode!=45;t&&Lo(i,ag(t),t.getData("text/html"),r,n)?n.preventDefault():_x(i,n)};var Ta=class{constructor(e,n,t){this.slice=e,this.move=n,this.node=t}},lg=At?"altKey":"ctrlKey";ut.dragstart=(i,e)=>{let n=e,t=i.input.mouseDown;if(t&&t.done(),!n.dataTransfer)return;let r=i.state.selection,o=r.empty?null:i.posAtCoords(Pa(n)),s;if(!(o&&o.pos>=r.from&&o.pos<=(r instanceof B?r.to-1:r.to))){if(t&&t.mightDrag)s=B.create(i.state.doc,t.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let f=i.docView.nearestDesc(n.target,!0);f&&f.node.type.spec.draggable&&f!=i.docView&&(s=B.create(i.state.doc,f.posBefore))}}let a=(s||i.state.selection).content(),{dom:l,text:c,slice:h}=Qm(i,a);(!n.dataTransfer.files.length||!Ze||Fm>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Vo?"Text":"text/html",l.innerHTML),n.dataTransfer.effectAllowed="copyMove",Vo||n.dataTransfer.setData("text/plain",c),i.dragging=new Ta(h,!n[lg],s)};ut.dragend=i=>{let e=i.dragging;window.setTimeout(()=>{i.dragging==e&&(i.dragging=null)},50)};ht.dragover=ht.dragenter=(i,e)=>e.preventDefault();ht.drop=(i,e)=>{let n=e,t=i.dragging;if(i.dragging=null,!n.dataTransfer)return;let r=i.posAtCoords(Pa(n));if(!r)return;let o=i.state.doc.resolve(r.pos),s=t&&t.slice;s?i.someProp("transformPasted",v=>{s=v(s,i)}):s=Xm(i,ag(n.dataTransfer),Vo?null:n.dataTransfer.getData("text/html"),!1,o);let a=!!(t&&!n[lg]);if(i.someProp("handleDrop",v=>v(i,n,s||O.empty,a))){n.preventDefault();return}if(!s)return;n.preventDefault();let l=s?qf(i.state.doc,o.pos,s):o.pos;l==null&&(l=o.pos);let c=i.state.tr;if(a){let{node:v}=t;v?v.replace(c):c.deleteSelection()}let h=c.mapping.map(l),f=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,m=c.doc;if(f?c.replaceRangeWith(h,h,s.content.firstChild):c.replaceRange(h,h,s),c.doc.eq(m))return;let b=c.doc.resolve(h);if(f&&B.isSelectable(s.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new B(b));else{let v=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((w,S,I,Z)=>v=Z),c.setSelection(yd(i,b,c.doc.resolve(v)))}i.focus(),i.dispatch(c.setMeta("uiEvent","drop"))};ut.focus=i=>{i.input.lastFocus=Date.now(),i.focused||(i.domObserver.stop(),i.dom.classList.add("ProseMirror-focused"),i.domObserver.start(),i.focused=!0,setTimeout(()=>{i.docView&&i.hasFocus()&&!i.domObserver.currentSelection.eq(i.domSelectionRange())&&bn(i)},20))};ut.blur=(i,e)=>{let n=e;i.focused&&(i.domObserver.stop(),i.dom.classList.remove("ProseMirror-focused"),i.domObserver.start(),n.relatedTarget&&i.dom.contains(n.relatedTarget)&&i.domObserver.currentSelection.clear(),i.focused=!1)};ut.beforeinput=(i,e)=>{if(Ze&&jt&&e.inputType=="deleteContentBackward"){i.domObserver.flushSoon();let{domChangeCount:t}=i.input;setTimeout(()=>{if(i.input.domChangeCount!=t||(i.dom.blur(),i.focus(),i.someProp("handleKeyDown",o=>o(i,bi(8,"Backspace")))))return;let{$cursor:r}=i.state.selection;r&&r.pos>0&&i.dispatch(i.state.tr.delete(r.pos-1,r.pos).scrollIntoView())},50)}};for(let i in ht)ut[i]=ht[i];function jo(i,e){if(i==e)return!0;for(let n in i)if(i[n]!==e[n])return!1;for(let n in e)if(!(n in i))return!1;return!0}var Da=class i{constructor(e,n){this.toDOM=e,this.spec=n||wi,this.side=this.spec.side||0}map(e,n,t,r){let{pos:o,deleted:s}=e.mapResult(n.from+r,this.side<0?-1:1);return s?null:new Zt(o-t,o-t,this)}valid(){return!0}eq(e){return this==e||e instanceof i&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&jo(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}},Ci=class i{constructor(e,n){this.attrs=e,this.spec=n||wi}map(e,n,t,r){let o=e.map(n.from+r,this.spec.inclusiveStart?-1:1)-t,s=e.map(n.to+r,this.spec.inclusiveEnd?1:-1)-t;return o>=s?null:new Zt(o,s,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof i&&jo(this.attrs,e.attrs)&&jo(this.spec,e.spec)}static is(e){return e.type instanceof i}destroy(){}},pd=class i{constructor(e,n){this.attrs=e,this.spec=n||wi}map(e,n,t,r){let o=e.mapResult(n.from+r,1);if(o.deleted)return null;let s=e.mapResult(n.to+r,-1);return s.deleted||s.pos<=o.pos?null:new Zt(o.pos-t,s.pos-t,this)}valid(e,n){let{index:t,offset:r}=e.content.findIndex(n.from),o;return r==n.from&&!(o=e.child(t)).isText&&r+o.nodeSize==n.to}eq(e){return this==e||e instanceof i&&jo(this.attrs,e.attrs)&&jo(this.spec,e.spec)}destroy(){}},Zt=class i{constructor(e,n,t){this.from=e,this.to=n,this.type=t}copy(e,n){return new i(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,t){return this.type.map(e,this,n,t)}static widget(e,n,t){return new i(e,e,new Da(n,t))}static inline(e,n,t,r){return new i(e,n,new Ci(t,r))}static node(e,n,t,r){return new i(e,n,new pd(t,r))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ci}get widget(){return this.type instanceof Da}},fr=[],wi={},ct=class i{constructor(e,n){this.local=e.length?e:fr,this.children=n.length?n:fr}static create(e,n){return n.length?Oa(n,e,0,wi):Ye}find(e,n,t){let r=[];return this.findInner(e??0,n??1e9,r,0,t),r}findInner(e,n,t,r,o){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=n&&a.to>=e&&(!o||o(a.spec))&&t.push(a.copy(a.from+r,a.to+r))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<n&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,n-a,t,r+a,o)}}map(e,n,t){return this==Ye||e.maps.length==0?this:this.mapInner(e,n,0,0,t||wi)}mapInner(e,n,t,r,o){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,t,r);l&&l.type.valid(n,l)?(s||(s=[])).push(l):o.onRemove&&o.onRemove(this.local[a].spec)}return this.children.length?xx(this.children,s||[],e,n,t,r,o):s?new i(s.sort(Si),fr):Ye}add(e,n){return n.length?this==Ye?i.create(e,n):this.addInner(e,n,0):this}addInner(e,n,t){let r,o=0;e.forEach((a,l)=>{let c=l+t,h;if(h=dg(n,a,c)){for(r||(r=this.children.slice());o<r.length&&r[o]<l;)o+=3;r[o]==l?r[o+2]=r[o+2].addInner(a,h,c+1):r.splice(o,0,l,l+a.nodeSize,Oa(h,a,c+1,wi)),o+=3}});let s=cg(o?ug(n):n,-t);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new i(s.length?this.local.concat(s).sort(Si):this.local,r||this.children)}remove(e){return e.length==0||this==Ye?this:this.removeInner(e,0)}removeInner(e,n){let t=this.children,r=this.local;for(let o=0;o<t.length;o+=3){let s,a=t[o]+n,l=t[o+1]+n;for(let h=0,f;h<e.length;h++)(f=e[h])&&f.from>a&&f.to<l&&(e[h]=null,(s||(s=[])).push(f));if(!s)continue;t==this.children&&(t=this.children.slice());let c=t[o+2].removeInner(s,a+1);c!=Ye?t[o+2]=c:(t.splice(o,3),o-=3)}if(r.length){for(let o=0,s;o<e.length;o++)if(s=e[o])for(let a=0;a<r.length;a++)r[a].eq(s,n)&&(r==this.local&&(r=this.local.slice()),r.splice(a--,1))}return t==this.children&&r==this.local?this:r.length||t.length?new i(r,t):Ye}forChild(e,n){if(this==Ye)return this;if(n.isLeaf)return i.empty;let t,r;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(t=this.children[a+2]);break}let o=e+1,s=o+n.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>o&&l.type instanceof Ci){let c=Math.max(o,l.from)-o,h=Math.min(s,l.to)-o;c<h&&(r||(r=[])).push(l.copy(c,h))}}if(r){let a=new i(r.sort(Si),fr);return t?new Na([a,t]):a}return t||Ye}eq(e){if(this==e)return!0;if(!(e instanceof i)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Cd(this.localsInner(e))}localsInner(e){if(this==Ye)return fr;if(e.inlineContent||!this.local.some(Ci.is))return this.local;let n=[];for(let t=0;t<this.local.length;t++)this.local[t].type instanceof Ci||n.push(this.local[t]);return n}};ct.empty=new ct([],[]);ct.removeOverlap=Cd;var Ye=ct.empty,Na=class i{constructor(e){this.members=e}map(e,n){let t=this.members.map(r=>r.map(e,n,wi));return i.from(t)}forChild(e,n){if(n.isLeaf)return ct.empty;let t=[];for(let r=0;r<this.members.length;r++){let o=this.members[r].forChild(e,n);o!=Ye&&(o instanceof i?t=t.concat(o.members):t.push(o))}return i.from(t)}eq(e){if(!(e instanceof i)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,t=!0;for(let r=0;r<this.members.length;r++){let o=this.members[r].localsInner(e);if(o.length)if(!n)n=o;else{t&&(n=n.slice(),t=!1);for(let s=0;s<o.length;s++)n.push(o[s])}}return n?Cd(t?n:n.sort(Si)):fr}static from(e){switch(e.length){case 0:return Ye;case 1:return e[0];default:return new i(e.every(n=>n instanceof ct)?e:e.reduce((n,t)=>n.concat(t instanceof ct?t:t.members),[]))}}};function xx(i,e,n,t,r,o,s){let a=i.slice();for(let c=0,h=o;c<n.maps.length;c++){let f=0;n.maps[c].forEach((m,b,v,w)=>{let S=w-v-(b-m);for(let I=0;I<a.length;I+=3){let Z=a[I+1];if(Z<0||m>Z+h-f)continue;let fe=a[I]+h-f;b>=fe?a[I+1]=m<=fe?-2:-1:m>=h&&S&&(a[I]+=S,a[I+1]+=S)}f+=S}),h=n.maps[c].map(h,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let h=n.map(i[c]+o),f=h-r;if(f<0||f>=t.content.size){l=!0;continue}let m=n.map(i[c+1]+o,-1),b=m-r,{index:v,offset:w}=t.content.findIndex(f),S=t.maybeChild(v);if(S&&w==f&&w+S.nodeSize==b){let I=a[c+2].mapInner(n,S,h+1,i[c]+o+1,s);I!=Ye?(a[c]=f,a[c+1]=b,a[c+2]=I):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=Cx(a,i,e,n,r,o,s),h=Oa(c,t,0,s);e=h.local;for(let f=0;f<a.length;f+=3)a[f+1]<0&&(a.splice(f,3),f-=3);for(let f=0,m=0;f<h.children.length;f+=3){let b=h.children[f];for(;m<a.length&&a[m]<b;)m+=3;a.splice(m,0,h.children[f],h.children[f+1],h.children[f+2])}}return new ct(e.sort(Si),a)}function cg(i,e){if(!e||!i.length)return i;let n=[];for(let t=0;t<i.length;t++){let r=i[t];n.push(new Zt(r.from+e,r.to+e,r.type))}return n}function Cx(i,e,n,t,r,o,s){function a(l,c){for(let h=0;h<l.local.length;h++){let f=l.local[h].map(t,r,c);f?n.push(f):s.onRemove&&s.onRemove(l.local[h].spec)}for(let h=0;h<l.children.length;h+=3)a(l.children[h+2],l.children[h]+c+1)}for(let l=0;l<i.length;l+=3)i[l+1]==-1&&a(i[l+2],e[l]+o+1);return n}function dg(i,e,n){if(e.isLeaf)return null;let t=n+e.nodeSize,r=null;for(let o=0,s;o<i.length;o++)(s=i[o])&&s.from>n&&s.to<t&&((r||(r=[])).push(s),i[o]=null);return r}function ug(i){let e=[];for(let n=0;n<i.length;n++)i[n]!=null&&e.push(i[n]);return e}function Oa(i,e,n,t){let r=[],o=!1;e.forEach((a,l)=>{let c=dg(i,a,l+n);if(c){o=!0;let h=Oa(c,a,n+l+1,t);h!=Ye&&r.push(l,l+a.nodeSize,h)}});let s=cg(o?ug(i):i,-n).sort(Si);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(t.onRemove&&t.onRemove(s[a].spec),s.splice(a--,1));return s.length||r.length?new ct(s,r):Ye}function Si(i,e){return i.from-e.from||i.to-e.to}function Cd(i){let e=i;for(let n=0;n<e.length-1;n++){let t=e[n];if(t.from!=t.to)for(let r=n+1;r<e.length;r++){let o=e[r];if(o.from==t.from){o.to!=t.to&&(e==i&&(e=i.slice()),e[r]=o.copy(o.from,t.to),Sm(e,r+1,o.copy(t.to,o.to)));continue}else{o.from<t.to&&(e==i&&(e=i.slice()),e[n]=t.copy(t.from,o.from),Sm(e,r,t.copy(o.from,t.to)));break}}}return e}function Sm(i,e,n){for(;e<i.length&&Si(n,i[e])>0;)e++;i.splice(e,0,n)}function Jc(i){let e=[];return i.someProp("decorations",n=>{let t=n(i.state);t&&t!=Ye&&e.push(t)}),i.cursorWrapper&&e.push(ct.create(i.state.doc,[i.cursorWrapper.deco])),Na.from(e)}var wx={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},Sx=mt&&Gn<=11,fd=class{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}},md=class{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new fd,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(t=>{for(let r=0;r<t.length;r++)this.queue.push(t[r]);mt&&Gn<=11&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),Sx&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,wx)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(gm(this.view)){if(this.suppressingSelectionUpdates)return bn(this.view);if(mt&&Gn<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ei(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,t;for(let o=e.focusNode;o;o=Fo(o))n.add(o);for(let o=e.anchorNode;o;o=Fo(o))if(n.has(o)){t=o;break}let r=t&&this.view.docView.nearestDesc(t);if(r&&r.ignoreMutation({type:"selection",target:t.nodeType==3?t.parentNode:t}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let t=e.domSelectionRange(),r=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(t)&&gm(e)&&!this.ignoreSelectionChange(t),o=-1,s=-1,a=!1,l=[];if(e.editable)for(let h=0;h<n.length;h++){let f=this.registerMutation(n[h],l);f&&(o=o<0?f.from:Math.min(f.from,o),s=s<0?f.to:Math.max(f.to,s),f.typeOver&&(a=!0))}if(zt&&l.length){let h=l.filter(f=>f.nodeName=="BR");if(h.length==2){let[f,m]=h;f.parentNode&&f.parentNode.parentNode==m.parentNode?m.remove():f.remove()}else{let{focusNode:f}=this.currentSelection;for(let m of h){let b=m.parentNode;b&&b.nodeName=="LI"&&(!f||kx(e,f)!=b)&&m.remove()}}}let c=null;o<0&&r&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Aa(t)&&(c=vd(e))&&c.eq(J.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,bn(e),this.currentSelection.set(t),e.scrollToSelection()):(o>-1||r)&&(o>-1&&(e.docView.markDirty(o,s),Ex(e)),this.handleDOMChange(o,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(t)||bn(e),this.currentSelection.set(t))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let t=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(t==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!t||t.ignoreMutation(e))return null;if(e.type=="childList"){for(let h=0;h<e.addedNodes.length;h++){let f=e.addedNodes[h];n.push(f),f.nodeType==3&&(this.lastChangedTextNode=f)}if(t.contentDOM&&t.contentDOM!=t.dom&&!t.contentDOM.contains(e.target))return{from:t.posBefore,to:t.posAfter};let r=e.previousSibling,o=e.nextSibling;if(mt&&Gn<=11&&e.addedNodes.length)for(let h=0;h<e.addedNodes.length;h++){let{previousSibling:f,nextSibling:m}=e.addedNodes[h];(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(r=f),(!m||Array.prototype.indexOf.call(e.addedNodes,m)<0)&&(o=m)}let s=r&&r.parentNode==e.target?qe(r)+1:0,a=t.localPosFromDOM(e.target,s,-1),l=o&&o.parentNode==e.target?qe(o):e.target.childNodes.length,c=t.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:t.posAtStart-t.border,to:t.posAtEnd+t.border}:(this.lastChangedTextNode=e.target,{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}},Em=new WeakMap,Mm=!1;function Ex(i){if(!Em.has(i)&&(Em.set(i,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(i.dom).whiteSpace)!==-1)){if(i.requiresGeckoHackNode=zt,Mm)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Mm=!0}}function km(i,e){let n=e.startContainer,t=e.startOffset,r=e.endContainer,o=e.endOffset,s=i.domAtPos(i.state.selection.anchor);return Ei(s.node,s.offset,r,o)&&([n,t,r,o]=[r,o,n,t]),{anchorNode:n,anchorOffset:t,focusNode:r,focusOffset:o}}function Mx(i,e){if(e.getComposedRanges){let r=e.getComposedRanges(i.root)[0];if(r)return km(i,r)}let n;function t(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return i.dom.addEventListener("beforeinput",t,!0),document.execCommand("indent"),i.dom.removeEventListener("beforeinput",t,!0),n?km(i,n):null}function kx(i,e){for(let n=e.parentNode;n&&n!=i.dom;n=n.parentNode){let t=i.docView.nearestDesc(n,!0);if(t&&t.node.isBlock)return n}return null}function Ix(i,e,n){let{node:t,fromOffset:r,toOffset:o,from:s,to:a}=i.docView.parseRange(e,n),l=i.domSelectionRange(),c,h=l.anchorNode;if(h&&i.dom.contains(h.nodeType==1?h:h.parentNode)&&(c=[{node:h,offset:l.anchorOffset}],Aa(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Ze&&i.input.lastKeyCode===8)for(let S=o;S>r;S--){let I=t.childNodes[S-1],Z=I.pmViewDesc;if(I.nodeName=="BR"&&!Z){o=S;break}if(!Z||Z.size)break}let f=i.state.doc,m=i.someProp("domParser")||Bn.fromSchema(i.state.schema),b=f.resolve(s),v=null,w=m.parse(t,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:r,to:o,preserveWhitespace:b.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:Tx,context:b});if(c&&c[0].pos!=null){let S=c[0].pos,I=c[1]&&c[1].pos;I==null&&(I=S),v={anchor:S+s,head:I+s}}return{doc:w,sel:v,from:s,to:a}}function Tx(i){let e=i.pmViewDesc;if(e)return e.parseRule();if(i.nodeName=="BR"&&i.parentNode){if(dt&&/^(ul|ol)$/i.test(i.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(i.parentNode.lastChild==i||dt&&/^(tr|table)$/i.test(i.parentNode.nodeName))return{ignore:!0}}else if(i.nodeName=="IMG"&&i.getAttribute("mark-placeholder"))return{ignore:!0};return null}var Dx=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function Nx(i,e,n,t,r){let o=i.input.compositionPendingChanges||(i.composing?i.input.compositionID:0);if(i.input.compositionPendingChanges=0,e<0){let ne=i.input.lastSelectionTime>Date.now()-50?i.input.lastSelectionOrigin:null,wn=vd(i,ne);if(wn&&!i.state.selection.eq(wn)){if(Ze&&jt&&i.input.lastKeyCode===13&&Date.now()-100<i.input.lastKeyCodeTime&&i.someProp("handleKeyDown",$0=>$0(i,bi(13,"Enter"))))return;let Ko=i.state.tr.setSelection(wn);ne=="pointer"?Ko.setMeta("pointer",!0):ne=="key"&&Ko.scrollIntoView(),o&&Ko.setMeta("composition",o),i.dispatch(Ko)}return}let s=i.state.doc.resolve(e),a=s.sharedDepth(n);e=s.before(a+1),n=i.state.doc.resolve(n).after(a+1);let l=i.state.selection,c=Ix(i,e,n),h=i.state.doc,f=h.slice(c.from,c.to),m,b;i.input.lastKeyCode===8&&Date.now()-100<i.input.lastKeyCodeTime?(m=i.state.selection.to,b="end"):(m=i.state.selection.from,b="start"),i.input.lastKeyCode=null;let v=Ax(f.content,c.doc.content,c.from,m,b);if((gr&&i.input.lastIOSEnter>Date.now()-225||jt)&&r.some(ne=>ne.nodeType==1&&!Dx.test(ne.nodeName))&&(!v||v.endA>=v.endB)&&i.someProp("handleKeyDown",ne=>ne(i,bi(13,"Enter")))){i.input.lastIOSEnter=0;return}if(!v)if(t&&l instanceof ue&&!l.empty&&l.$head.sameParent(l.$anchor)&&!i.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))v={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let ne=Im(i,i.state.doc,c.sel);if(ne&&!ne.eq(i.state.selection)){let wn=i.state.tr.setSelection(ne);o&&wn.setMeta("composition",o),i.dispatch(wn)}}return}i.input.domChangeCount++,i.state.selection.from<i.state.selection.to&&v.start==v.endB&&i.state.selection instanceof ue&&(v.start>i.state.selection.from&&v.start<=i.state.selection.from+2&&i.state.selection.from>=c.from?v.start=i.state.selection.from:v.endA<i.state.selection.to&&v.endA>=i.state.selection.to-2&&i.state.selection.to<=c.to&&(v.endB+=i.state.selection.to-v.endA,v.endA=i.state.selection.to)),mt&&Gn<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>c.from&&c.doc.textBetween(v.start-c.from-1,v.start-c.from+1)==" \xA0"&&(v.start--,v.endA--,v.endB--);let w=c.doc.resolveNoCache(v.start-c.from),S=c.doc.resolveNoCache(v.endB-c.from),I=h.resolve(v.start),Z=w.sameParent(S)&&w.parent.inlineContent&&I.end()>=v.endA,fe;if((gr&&i.input.lastIOSEnter>Date.now()-225&&(!Z||r.some(ne=>ne.nodeName=="DIV"||ne.nodeName=="P"))||!Z&&w.pos<c.doc.content.size&&!w.sameParent(S)&&(fe=J.findFrom(c.doc.resolve(w.pos+1),1,!0))&&fe.head==S.pos)&&i.someProp("handleKeyDown",ne=>ne(i,bi(13,"Enter")))){i.input.lastIOSEnter=0;return}if(i.state.selection.anchor>v.start&&Rx(h,v.start,v.endA,w,S)&&i.someProp("handleKeyDown",ne=>ne(i,bi(8,"Backspace")))){jt&&Ze&&i.domObserver.suppressSelectionUpdates();return}Ze&&jt&&v.endB==v.start&&(i.input.lastAndroidDelete=Date.now()),jt&&!Z&&w.start()!=S.start()&&S.parentOffset==0&&w.depth==S.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==v.endA&&(v.endB-=2,S=c.doc.resolveNoCache(v.endB-c.from),setTimeout(()=>{i.someProp("handleKeyDown",function(ne){return ne(i,bi(13,"Enter"))})},20));let pe=v.start,vt=v.endA,xe,sn,Xn;if(Z){if(w.pos==S.pos)mt&&Gn<=11&&w.parentOffset==0&&(i.domObserver.suppressSelectionUpdates(),setTimeout(()=>bn(i),20)),xe=i.state.tr.delete(pe,vt),sn=h.resolve(v.start).marksAcross(h.resolve(v.endA));else if(v.endA==v.endB&&(Xn=Ox(w.parent.content.cut(w.parentOffset,S.parentOffset),I.parent.content.cut(I.parentOffset,v.endA-I.start()))))xe=i.state.tr,Xn.type=="add"?xe.addMark(pe,vt,Xn.mark):xe.removeMark(pe,vt,Xn.mark);else if(w.parent.child(w.index()).isText&&w.index()==S.index()-(S.textOffset?0:1)){let ne=w.parent.textBetween(w.parentOffset,S.parentOffset);if(i.someProp("handleTextInput",wn=>wn(i,pe,vt,ne)))return;xe=i.state.tr.insertText(ne,pe,vt)}}if(xe||(xe=i.state.tr.replace(pe,vt,c.doc.slice(v.start-c.from,v.endB-c.from))),c.sel){let ne=Im(i,xe.doc,c.sel);ne&&!(Ze&&jt&&i.composing&&ne.empty&&(v.start!=v.endB||i.input.lastAndroidDelete<Date.now()-100)&&(ne.head==pe||ne.head==xe.mapping.map(vt)-1)||mt&&ne.empty&&ne.head==pe)&&xe.setSelection(ne)}sn&&xe.ensureMarks(sn),o&&xe.setMeta("composition",o),i.dispatch(xe.scrollIntoView())}function Im(i,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:yd(i,e.resolve(n.anchor),e.resolve(n.head))}function Ox(i,e){let n=i.firstChild.marks,t=e.firstChild.marks,r=n,o=t,s,a,l;for(let h=0;h<t.length;h++)r=t[h].removeFromSet(r);for(let h=0;h<n.length;h++)o=n[h].removeFromSet(o);if(r.length==1&&o.length==0)a=r[0],s="add",l=h=>h.mark(a.addToSet(h.marks));else if(r.length==0&&o.length==1)a=o[0],s="remove",l=h=>h.mark(a.removeFromSet(h.marks));else return null;let c=[];for(let h=0;h<e.childCount;h++)c.push(l(e.child(h)));if(T.from(c).eq(i))return{mark:a,type:s}}function Rx(i,e,n,t,r){if(n-e<=r.pos-t.pos||Qc(t,!0,!1)<r.pos)return!1;let o=i.resolve(e);if(!t.parent.isTextblock){let a=o.nodeAfter;return a!=null&&n==e+a.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let s=i.resolve(Qc(o,!0,!0));return!s.parent.isTextblock||s.pos>n||Qc(s,!0,!1)<n?!1:t.parent.content.cut(t.parentOffset).eq(s.parent.content)}function Qc(i,e,n){let t=i.depth,r=e?i.end():i.pos;for(;t>0&&(e||i.indexAfter(t)==i.node(t).childCount);)t--,r++,e=!1;if(n){let o=i.node(t).maybeChild(i.indexAfter(t));for(;o&&!o.isLeaf;)o=o.firstChild,r++}return r}function Ax(i,e,n,t,r){let o=i.findDiffStart(e,n);if(o==null)return null;let{a:s,b:a}=i.findDiffEnd(e,n+i.size,n+e.size);if(r=="end"){let l=Math.max(0,o-Math.min(s,a));t-=s+l-o}if(s<o&&i.size<e.size){let l=t<=o&&t>=s?o-t:0;o-=l,o&&o<e.size&&Tm(e.textBetween(o-1,o+1))&&(o+=l?1:-1),a=o+(a-s),s=o}else if(a<o){let l=t<=o&&t>=a?o-t:0;o-=l,o&&o<i.size&&Tm(i.textBetween(o-1,o+1))&&(o+=l?1:-1),s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}function Tm(i){if(i.length!=2)return!1;let e=i.charCodeAt(0),n=i.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}var Ra=class{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new dd,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Am),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Om(this),Nm(this),this.nodeViews=Rm(this),this.docView=dm(this.state.doc,Dm(this),Jc(this),this.dom,this),this.domObserver=new md(this,(t,r,o,s)=>Nx(this,t,r,o,s)),this.domObserver.start(),rx(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ud(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Am),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let t in this._props)n[t]=this._props[t];n.state=this.state;for(let t in e)n[t]=e[t];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var t;let r=this.state,o=!1,s=!1;e.storedMarks&&this.composing&&(sg(this),s=!0),this.state=e;let a=r.plugins!=e.plugins||this._props.plugins!=n.plugins;if(a||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let b=Rm(this);Fx(b,this.nodeViews)&&(this.nodeViews=b,o=!0)}(a||n.handleDOMEvents!=this._props.handleDOMEvents)&&ud(this),this.editable=Om(this),Nm(this);let l=Jc(this),c=Dm(this),h=r.plugins!=e.plugins&&!r.doc.eq(e.doc)?"reset":e.scrollToSelection>r.scrollToSelection?"to selection":"preserve",f=o||!this.docView.matchesNode(e.doc,c,l);(f||!e.selection.eq(r.selection))&&(s=!0);let m=h=="preserve"&&s&&this.dom.style.overflowAnchor==null&&w_(this);if(s){this.domObserver.stop();let b=f&&(mt||Ze)&&!this.composing&&!r.selection.empty&&!e.selection.empty&&Px(r.selection,e.selection);if(f){let v=Ze?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=gx(this)),(o||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=dm(e.doc,c,l,this.dom,this)),v&&!this.trackWrites&&(b=!0)}b||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&$_(this))?bn(this,b):(Wm(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(r),!((t=this.dragging)===null||t===void 0)&&t.node&&!r.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,r),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():m&&S_(m)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof B){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&rm(this,n.getBoundingClientRect(),e)}else rm(this,this.coordsAtPos(this.state.selection.head,1),e)}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let t=this.directPlugins[n];t.spec.view&&this.pluginViews.push(t.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let t=this.state.plugins[n];t.spec.view&&this.pluginViews.push(t.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let t=this.pluginViews[n];t.update&&t.update(this,e)}}updateDraggedNode(e,n){let t=e.node,r=-1;if(this.state.doc.nodeAt(t.from)==t.node)r=t.from;else{let o=t.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==t.node&&(r=o)}this.dragging=new Ta(e.slice,e.move,r<0?void 0:B.create(this.state.doc,r))}someProp(e,n){let t=this._props&&this._props[e],r;if(t!=null&&(r=n?n(t):t))return r;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(r=n?n(a):a))return r}let o=this.state.plugins;if(o)for(let s=0;s<o.length;s++){let a=o[s].props[e];if(a!=null&&(r=n?n(a):a))return r}}hasFocus(){if(mt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&E_(this.dom),bn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return D_(this,e)}coordsAtPos(e,n=1){return Bm(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,t=-1){let r=this.docView.posFromDOM(e,n,t);if(r==null)throw new RangeError("DOM position not inside the editor");return r}endOfTextblock(e,n){return P_(this,n||this.state,e)}pasteHTML(e,n){return Lo(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Lo(this,e,null,!0,n||new ClipboardEvent("paste"))}destroy(){this.docView&&(ox(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Jc(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,h_())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return ax(this,e)}dispatch(e){let n=this._props.dispatchTransaction;n?n.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?dt&&this.root.nodeType===11&&v_(this.dom.ownerDocument)==this.dom&&Mx(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}};function Dm(i){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(i.editable),i.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(i.state)),n)for(let t in n)t=="class"?e.class+=" "+n[t]:t=="style"?e.style=(e.style?e.style+";":"")+n[t]:!e[t]&&t!="contenteditable"&&t!="nodeName"&&(e[t]=String(n[t]))}),e.translate||(e.translate="no"),[Zt.node(0,i.state.doc.content.size,e)]}function Nm(i){if(i.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),i.cursorWrapper={dom:e,deco:Zt.widget(i.state.selection.from,e,{raw:!0,marks:i.markCursor})}}else i.cursorWrapper=null}function Om(i){return!i.someProp("editable",e=>e(i.state)===!1)}function Px(i,e){let n=Math.min(i.$anchor.sharedDepth(i.head),e.$anchor.sharedDepth(e.head));return i.$anchor.start(n)!=e.$anchor.start(n)}function Rm(i){let e=Object.create(null);function n(t){for(let r in t)Object.prototype.hasOwnProperty.call(e,r)||(e[r]=t[r])}return i.someProp("nodeViews",n),i.someProp("markViews",n),e}function Fx(i,e){let n=0,t=0;for(let r in i){if(i[r]!=e[r])return!0;n++}for(let r in e)t++;return n!=t}function Am(i){if(i.spec.state||i.spec.filterTransaction||i.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Vx=["ol",0],Lx=["ul",0],jx=["li",0],hg={attrs:{order:{default:1,validate:"number"}},parseDOM:[{tag:"ol",getAttrs(i){return{order:i.hasAttribute("start")?+i.getAttribute("start"):1}}}],toDOM(i){return i.attrs.order==1?Vx:["ol",{start:i.attrs.order},0]}},pg={parseDOM:[{tag:"ul"}],toDOM(){return Lx}},fg={parseDOM:[{tag:"li"}],toDOM(){return jx},defining:!0};function mg(i,e=null){return function(n,t){let{$from:r,$to:o}=n.selection,s=r.blockRange(o),a=!1,l=s;if(!s)return!1;if(s.depth>=2&&r.node(s.depth-1).type.compatibleContent(i)&&s.startIndex==0){if(r.index(s.depth-1)==0)return!1;let h=n.doc.resolve(s.start-2);l=new pi(h,h,s.depth),s.endIndex<s.parent.childCount&&(s=new pi(r,n.doc.resolve(o.end(s.depth)),s.depth)),a=!0}let c=cr(l,i,e,s);return c?(t&&t(zx(n.tr,s,c,a,i).scrollIntoView()),!0):!1}}function zx(i,e,n,t,r){let o=T.empty;for(let h=n.length-1;h>=0;h--)o=T.from(n[h].type.create(n[h].attrs,o));i.step(new ze(e.start-(t?2:0),e.end,e.start,e.end,new O(o,0,0),n.length,!0));let s=0;for(let h=0;h<n.length;h++)n[h].type==r&&(s=h+1);let a=n.length-s,l=e.start+n.length-(t?2:0),c=e.parent;for(let h=e.startIndex,f=e.endIndex,m=!0;h<f;h++,m=!1)!m&&Un(i.doc,l,a)&&(i.split(l,a),l+=2*a),l+=c.child(h).nodeSize;return i}function gg(i,e){return function(n,t){let{$from:r,$to:o,node:s}=n.selection;if(s&&s.isBlock||r.depth<2||!r.sameParent(o))return!1;let a=r.node(-1);if(a.type!=i)return!1;if(r.parent.content.size==0&&r.node(-1).childCount==r.indexAfter(-1)){if(r.depth==3||r.node(-3).type!=i||r.index(-2)!=r.node(-2).childCount-1)return!1;if(t){let f=T.empty,m=r.index(-1)?1:r.index(-2)?2:3;for(let I=r.depth-m;I>=r.depth-3;I--)f=T.from(r.node(I).copy(f));let b=r.indexAfter(-1)<r.node(-2).childCount?1:r.indexAfter(-2)<r.node(-3).childCount?2:3;f=f.append(T.from(i.createAndFill()));let v=r.before(r.depth-(m-1)),w=n.tr.replace(v,r.after(-b),new O(f,4-m,0)),S=-1;w.doc.nodesBetween(v,w.doc.content.size,(I,Z)=>{if(S>-1)return!1;I.isTextblock&&I.content.size==0&&(S=Z+1)}),S>-1&&w.setSelection(J.near(w.doc.resolve(S))),t(w.scrollIntoView())}return!0}let l=o.pos==r.end()?a.contentMatchAt(0).defaultType:null,c=n.tr.delete(r.pos,o.pos),h=l?[e?{type:i,attrs:e}:null,{type:l}]:void 0;return Un(c.doc,r.pos,2,h)?(t&&t(c.split(r.pos,2,h).scrollIntoView()),!0):!1}}function wd(i){return function(e,n){let{$from:t,$to:r}=e.selection,o=t.blockRange(r,s=>s.childCount>0&&s.firstChild.type==i);return o?n?t.node(o.depth-1).type==i?Bx(e,n,i,o):Ux(e,n,o):!0:!1}}function Bx(i,e,n,t){let r=i.tr,o=t.end,s=t.$to.end(t.depth);o<s&&(r.step(new ze(o-1,s,o,s,new O(T.from(n.create(null,t.parent.copy())),1,0),1,!0)),t=new pi(r.doc.resolve(t.$from.pos),r.doc.resolve(s),t.depth));let a=gi(t);if(a==null)return!1;r.lift(t,a);let l=r.mapping.map(o,-1)-1;return vi(r.doc,l)&&r.join(l),e(r.scrollIntoView()),!0}function Ux(i,e,n){let t=i.tr,r=n.parent;for(let b=n.end,v=n.endIndex-1,w=n.startIndex;v>w;v--)b-=r.child(v).nodeSize,t.delete(b-1,b+1);let o=t.doc.resolve(n.start),s=o.nodeAfter;if(t.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let a=n.startIndex==0,l=n.endIndex==r.childCount,c=o.node(-1),h=o.index(-1);if(!c.canReplace(h+(a?0:1),h+1,s.content.append(l?T.empty:T.from(r))))return!1;let f=o.pos,m=f+s.nodeSize;return t.step(new ze(f-(a?1:0),m+(l?1:0),f+1,m-1,new O((a?T.empty:T.from(r.copy(T.empty))).append(l?T.empty:T.from(r.copy(T.empty))),a?0:1,l?0:1),a?0:1)),e(t.scrollIntoView()),!0}function Sd(i){return function(e,n){let{$from:t,$to:r}=e.selection,o=t.blockRange(r,c=>c.childCount>0&&c.firstChild.type==i);if(!o)return!1;let s=o.startIndex;if(s==0)return!1;let a=o.parent,l=a.child(s-1);if(l.type!=i)return!1;if(n){let c=l.lastChild&&l.lastChild.type==a.type,h=T.from(c?i.create():null),f=new O(T.from(i.create(null,T.from(a.type.create(null,h)))),c?3:1,0),m=o.start,b=o.end;n(e.tr.step(new ze(m-(c?3:1),b,m,b,f,1,!0)).scrollIntoView())}return!0}}var $x={attrs:{href:{},title:{default:null},target:{default:"_blank"}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs(i){return{href:i.getAttribute("href"),title:i.getAttribute("title"),target:i.getAttribute("target")}}}],toDOM(i){let{href:e,title:n,target:t}=i.attrs;return["a",{href:e,title:n,target:t},0]}},Hx={parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style=italic"}],toDOM(){return["em",0]}},Gx={parseDOM:[{tag:"strong"},{tag:"b",getAttrs:i=>i.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:i=>/^(?:bold(?:er)?|[5-9]\d{2,})$/.test(i)&&null}],toDOM(){return["strong",0]}},Wx={parseDOM:[{tag:"code"}],toDOM(){return["code",0]}},Kx={parseDOM:[{tag:"u"},{style:"text-decoration=underline",consuming:!1}],toDOM(){return["u",0]}},Jx={parseDOM:[{tag:"s"},{tag:"strike"},{style:"text-decoration=line-through"}],toDOM(){return["s",0]}},Qx={attrs:{color:{default:null}},parseDOM:[{style:"color",getAttrs:i=>({color:i})}],toDOM(i){let{color:e}=i.attrs;return["span",{style:`color:${e};`},0]}},Xx={attrs:{backgroundColor:{default:null}},parseDOM:[{style:"background-color",getAttrs:i=>({backgroundColor:i})}],toDOM(i){let{backgroundColor:e}=i.attrs;return["span",{style:`background-color:${e};`},0]}},Yx={attrs:{},parseDOM:[{tag:"sup"},{style:"vertical-align=super"}],toDOM(){return["sup",0]}},Zx={attrs:{},parseDOM:[{tag:"sub"},{style:"vertical-align=sub"}],toDOM(){return["sub",0]}},eC={link:$x,em:Hx,strong:Gx,code:Wx,u:Kx,s:Jx,text_color:Qx,text_background_color:Xx,sup:Yx,sub:Zx},tC={content:"block+"},nC={group:"inline"},iC={content:"inline*",group:"block",attrs:{align:{default:null},indent:{default:null}},parseDOM:[{tag:"p",getAttrs(i){let{textAlign:e}=i.style,n=i.getAttribute("align")||e||null,t=i.getAttribute("data-indent")||null;return{align:n,indent:parseInt(t,10)||null}}}],toDOM(i){let{align:e,indent:n}=i.attrs,t={textAlign:e!=="left"?e:null,marginLeft:n!==null?`${n*40}px`:null};return["p",{style:oa(t)||null,"data-indent":n??null},0]}},rC={content:"block+",group:"block",defining:!0,attrs:{indent:{default:null}},parseDOM:[{tag:"blockquote",getAttrs(i){let e=i.getAttribute("data-indent")||null;return{indent:parseInt(e,10)||null}}}],toDOM(i){let{indent:e}=i.attrs,n={marginLeft:e!==null?`${e*40}px`:null};return["blockquote",{style:oa(n)||null,"data-indent":e??null},0]}},oC={group:"block",parseDOM:[{tag:"hr"}],toDOM(){return["hr"]}},sC={attrs:{level:{default:1},align:{default:null},indent:{default:null}},content:"inline*",group:"block",defining:!0,parseDOM:[{tag:"h1",getAttrs(i){let{textAlign:e}=i.style,n=i.getAttribute("align")||e||null,t=i.getAttribute("data-indent")||null;return{level:1,align:n,indent:parseInt(t,10)||null}}},{tag:"h2",getAttrs(i){let{textAlign:e}=i.style,n=i.getAttribute("align")||e||null,t=i.getAttribute("data-indent")||null;return{level:2,align:n,indent:parseInt(t,10)||null}}},{tag:"h3",getAttrs(i){let{textAlign:e}=i.style,n=i.getAttribute("align")||e||null,t=i.getAttribute("data-indent")||null;return{level:3,align:n,indent:parseInt(t,10)||null}}},{tag:"h4",getAttrs(i){let{textAlign:e}=i.style,n=i.getAttribute("align")||e||null,t=i.getAttribute("data-indent")||null;return{level:4,align:n,indent:parseInt(t,10)||null}}},{tag:"h5",getAttrs(i){let{textAlign:e}=i.style,n=i.getAttribute("align")||e||null,t=i.getAttribute("data-indent")||null;return{level:5,align:n,indent:parseInt(t,10)||null}}},{tag:"h6",getAttrs(i){let{textAlign:e}=i.style,n=i.getAttribute("align")||e||null,t=i.getAttribute("data-indent")||null;return{level:6,align:n,indent:parseInt(t,10)||null}}}],toDOM(i){let{level:e,align:n,indent:t}=i.attrs,r={textAlign:n!=="left"?n:null,marginLeft:t!==null?`${t*40}px`:null},s={style:oa(r)||null,"data-indent":t??null};return[`h${e}`,s,0]}},aC={content:"text*",marks:"",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:"full"}],toDOM(){return["pre",["code",0]]}},lC={inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM(){return["br"]}},cC={inline:!0,attrs:{src:{},alt:{default:null},title:{default:null},width:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs(i){return{src:i.getAttribute("src"),title:i.getAttribute("title"),alt:i.getAttribute("alt"),width:i.getAttribute("width")}}}],toDOM(i){let{src:e,alt:n,title:t,width:r}=i.attrs;return["img",{src:e,alt:n,title:t,width:r}]}},dC=H(k({},fg),{content:"paragraph block*"}),uC=H(k({},hg),{content:"list_item+",group:"block"}),hC=H(k({},pg),{content:"list_item+",group:"block"}),pC={doc:tC,text:nC,paragraph:iC,blockquote:rC,horizontal_rule:oC,heading:sC,hard_break:lC,code_block:aC,image:cC,list_item:dC,ordered_list:uC,bullet_list:hC},Jn=new ha({marks:eC,nodes:pC});var yg=(i,e)=>i.selection.empty?!1:(e&&e(i.tr.deleteSelection().scrollIntoView()),!0);function fC(i,e){let{$cursor:n}=i.selection;return!n||(e?!e.endOfTextblock("backward",i):n.parentOffset>0)?null:n}var mC=(i,e,n)=>{let t=fC(i,n);if(!t)return!1;let r=bg(t);if(!r){let s=t.blockRange(),a=s&&gi(s);return a==null?!1:(e&&e(i.tr.lift(s,a).scrollIntoView()),!0)}let o=r.nodeBefore;if(Cg(i,r,e,-1))return!0;if(t.parent.content.size==0&&(yr(o,"end")||B.isSelectable(o)))for(let s=t.depth;;s--){let a=_a(i.doc,t.before(s),t.after(s),O.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=i.tr.step(a);l.setSelection(yr(o,"end")?J.findFrom(l.doc.resolve(l.mapping.map(r.pos,-1)),-1):B.create(l.doc,r.pos-o.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||t.node(s-1).childCount>1)break}return o.isAtom&&r.depth==t.depth-1?(e&&e(i.tr.delete(r.pos-o.nodeSize,r.pos).scrollIntoView()),!0):!1};function yr(i,e,n=!1){for(let t=i;t;t=e=="start"?t.firstChild:t.lastChild){if(t.isTextblock)return!0;if(n&&t.childCount!=1)return!1}return!1}var gC=(i,e,n)=>{let{$head:t,empty:r}=i.selection,o=t;if(!r)return!1;if(t.parent.isTextblock){if(n?!n.endOfTextblock("backward",i):t.parentOffset>0)return!1;o=bg(t)}let s=o&&o.nodeBefore;return!s||!B.isSelectable(s)?!1:(e&&e(i.tr.setSelection(B.create(i.doc,o.pos-s.nodeSize)).scrollIntoView()),!0)};function bg(i){if(!i.parent.type.spec.isolating)for(let e=i.depth-1;e>=0;e--){if(i.index(e)>0)return i.doc.resolve(i.before(e+1));if(i.node(e).type.spec.isolating)break}return null}function vC(i,e){let{$cursor:n}=i.selection;return!n||(e?!e.endOfTextblock("forward",i):n.parentOffset<n.parent.content.size)?null:n}var yC=(i,e,n)=>{let t=vC(i,n);if(!t)return!1;let r=_g(t);if(!r)return!1;let o=r.nodeAfter;if(Cg(i,r,e,1))return!0;if(t.parent.content.size==0&&(yr(o,"start")||B.isSelectable(o))){let s=_a(i.doc,t.before(),t.after(),O.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=i.tr.step(s);a.setSelection(yr(o,"start")?J.findFrom(a.doc.resolve(a.mapping.map(r.pos)),1):B.create(a.doc,a.mapping.map(r.pos))),e(a.scrollIntoView())}return!0}}return o.isAtom&&r.depth==t.depth-1?(e&&e(i.tr.delete(r.pos,r.pos+o.nodeSize).scrollIntoView()),!0):!1},bC=(i,e,n)=>{let{$head:t,empty:r}=i.selection,o=t;if(!r)return!1;if(t.parent.isTextblock){if(n?!n.endOfTextblock("forward",i):t.parentOffset<t.parent.content.size)return!1;o=_g(t)}let s=o&&o.nodeAfter;return!s||!B.isSelectable(s)?!1:(e&&e(i.tr.setSelection(B.create(i.doc,o.pos)).scrollIntoView()),!0)};function _g(i){if(!i.parent.type.spec.isolating)for(let e=i.depth-1;e>=0;e--){let n=i.node(e);if(i.index(e)+1<n.childCount)return i.doc.resolve(i.after(e+1));if(n.type.spec.isolating)break}return null}var xg=(i,e)=>{let{$from:n,$to:t}=i.selection,r=n.blockRange(t),o=r&&gi(r);return o==null?!1:(e&&e(i.tr.lift(r,o).scrollIntoView()),!0)},Md=(i,e)=>{let{$head:n,$anchor:t}=i.selection;return!n.parent.type.spec.code||!n.sameParent(t)?!1:(e&&e(i.tr.insertText(`
`).scrollIntoView()),!0)};function kd(i){for(let e=0;e<i.edgeCount;e++){let{type:n}=i.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}var Id=(i,e)=>{let{$head:n,$anchor:t}=i.selection;if(!n.parent.type.spec.code||!n.sameParent(t))return!1;let r=n.node(-1),o=n.indexAfter(-1),s=kd(r.contentMatchAt(o));if(!s||!r.canReplaceWith(o,o,s))return!1;if(e){let a=n.after(),l=i.tr.replaceWith(a,a,s.createAndFill());l.setSelection(J.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},Td=(i,e)=>{let n=i.selection,{$from:t,$to:r}=n;if(n instanceof It||t.parent.inlineContent||r.parent.inlineContent)return!1;let o=kd(r.parent.contentMatchAt(r.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let s=(!t.parentOffset&&r.index()<r.parent.childCount?t:r).pos,a=i.tr.insert(s,o.createAndFill());a.setSelection(ue.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},Dd=(i,e)=>{let{$cursor:n}=i.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Un(i.doc,o))return e&&e(i.tr.split(o).scrollIntoView()),!0}let t=n.blockRange(),r=t&&gi(t);return r==null?!1:(e&&e(i.tr.lift(t,r).scrollIntoView()),!0)};function _C(i){return(e,n)=>{let{$from:t,$to:r}=e.selection;if(e.selection instanceof B&&e.selection.node.isBlock)return!t.parentOffset||!Un(e.doc,t.pos)?!1:(n&&n(e.tr.split(t.pos).scrollIntoView()),!0);if(!t.parent.isBlock)return!1;if(n){let o=r.parentOffset==r.parent.content.size,s=e.tr;(e.selection instanceof ue||e.selection instanceof It)&&s.deleteSelection();let a=t.depth==0?null:kd(t.node(-1).contentMatchAt(t.indexAfter(-1))),l=i&&i(r.parent,o,t),c=l?[l]:o&&a?[{type:a}]:void 0,h=Un(s.doc,s.mapping.map(t.pos),1,c);if(!c&&!h&&Un(s.doc,s.mapping.map(t.pos),1,a?[{type:a}]:void 0)&&(a&&(c=[{type:a}]),h=!0),h&&(s.split(s.mapping.map(t.pos),1,c),!o&&!t.parentOffset&&t.parent.type!=a)){let f=s.mapping.map(t.before()),m=s.doc.resolve(f);a&&t.node(-1).canReplaceWith(m.index(),m.index()+1,a)&&s.setNodeMarkup(s.mapping.map(t.before()),a)}n(s.scrollIntoView())}return!0}}var Nd=_C();var xC=(i,e)=>(e&&e(i.tr.setSelection(new It(i.doc))),!0);function CC(i,e,n){let t=e.nodeBefore,r=e.nodeAfter,o=e.index();return!t||!r||!t.type.compatibleContent(r.type)?!1:!t.content.size&&e.parent.canReplace(o-1,o)?(n&&n(i.tr.delete(e.pos-t.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(r.isTextblock||vi(i.doc,e.pos))?!1:(n&&n(i.tr.clearIncompatible(e.pos,t.type,t.contentMatchAt(t.childCount)).join(e.pos).scrollIntoView()),!0)}function Cg(i,e,n,t){let r=e.nodeBefore,o=e.nodeAfter,s,a,l=r.type.spec.isolating||o.type.spec.isolating;if(!l&&CC(i,e,n))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(a=r.contentMatchAt(r.childCount)).findWrapping(o.type))&&a.matchType(s[0]||o.type).validEnd){if(n){let b=e.pos+o.nodeSize,v=T.empty;for(let I=s.length-1;I>=0;I--)v=T.from(s[I].create(null,v));v=T.from(r.copy(v));let w=i.tr.step(new ze(e.pos-1,b,e.pos,b,new O(v,1,0),s.length,!0)),S=b+2*s.length;vi(w.doc,S)&&w.join(S),n(w.scrollIntoView())}return!0}let h=o.type.spec.isolating||t>0&&l?null:J.findFrom(e,1),f=h&&h.$from.blockRange(h.$to),m=f&&gi(f);if(m!=null&&m>=e.depth)return n&&n(i.tr.lift(f,m).scrollIntoView()),!0;if(c&&yr(o,"start",!0)&&yr(r,"end")){let b=r,v=[];for(;v.push(b),!b.isTextblock;)b=b.lastChild;let w=o,S=1;for(;!w.isTextblock;w=w.firstChild)S++;if(b.canReplace(b.childCount,b.childCount,w.content)){if(n){let I=T.empty;for(let fe=v.length-1;fe>=0;fe--)I=T.from(v[fe].copy(I));let Z=i.tr.step(new ze(e.pos-v.length,e.pos+o.nodeSize,e.pos+S,e.pos+o.nodeSize-S,new O(I,v.length,0),0,!0));n(Z.scrollIntoView())}return!0}}return!1}function wg(i){return function(e,n){let t=e.selection,r=i<0?t.$from:t.$to,o=r.depth;for(;r.node(o).isInline;){if(!o)return!1;o--}return r.node(o).isTextblock?(n&&n(e.tr.setSelection(ue.create(e.doc,i<0?r.start(o):r.end(o)))),!0):!1}}var wC=wg(-1),SC=wg(1);function Sg(i,e=null){return function(n,t){let{$from:r,$to:o}=n.selection,s=r.blockRange(o),a=s&&cr(s,i,e);return a?(t&&t(n.tr.wrap(s,a).scrollIntoView()),!0):!1}}function Fa(i,e=null){return function(n,t){let r=!1;for(let o=0;o<n.selection.ranges.length&&!r;o++){let{$from:{pos:s},$to:{pos:a}}=n.selection.ranges[o];n.doc.nodesBetween(s,a,(l,c)=>{if(r)return!1;if(!(!l.isTextblock||l.hasMarkup(i,e)))if(l.type==i)r=!0;else{let h=n.doc.resolve(c),f=h.index();r=h.parent.canReplaceWith(f,f+1,i)}})}if(!r)return!1;if(t){let o=n.tr;for(let s=0;s<n.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=n.selection.ranges[s];o.setBlockType(a,l,i,e)}t(o.scrollIntoView())}return!0}}function EC(i,e,n,t){for(let r=0;r<e.length;r++){let{$from:o,$to:s}=e[r],a=o.depth==0?i.inlineContent&&i.type.allowsMarkType(n):!1;if(i.nodesBetween(o.pos,s.pos,(l,c)=>{if(a||!t&&l.isAtom&&l.isInline&&c>=o.pos&&c+l.nodeSize<=s.pos)return!1;a=l.inlineContent&&l.type.allowsMarkType(n)}),a)return!0}return!1}function MC(i){let e=[];for(let n=0;n<i.length;n++){let{$from:t,$to:r}=i[n];t.doc.nodesBetween(t.pos,r.pos,(o,s)=>{if(o.isAtom&&o.content.size&&o.isInline&&s>=t.pos&&s+o.nodeSize<=r.pos)return s+1>t.pos&&e.push(new ur(t,t.doc.resolve(s+1))),t=t.doc.resolve(s+1+o.content.size),!1}),t.pos<r.pos&&e.push(new ur(t,r))}return e}function ki(i,e=null,n){let t=(n&&n.removeWhenPresent)!==!1,r=(n&&n.enterInlineAtoms)!==!1;return function(o,s){let{empty:a,$cursor:l,ranges:c}=o.selection;if(a&&!l||!EC(o.doc,c,i,r))return!1;if(s)if(l)i.isInSet(o.storedMarks||l.marks())?s(o.tr.removeStoredMark(i)):s(o.tr.addStoredMark(i.create(e)));else{let h,f=o.tr;r||(c=MC(c)),t?h=!c.some(m=>o.doc.rangeHasMark(m.$from.pos,m.$to.pos,i)):h=!c.every(m=>{let b=!1;return f.doc.nodesBetween(m.$from.pos,m.$to.pos,(v,w,S)=>{if(b)return!1;b=!i.isInSet(v.marks)&&!!S&&S.type.allowsMarkType(i)&&!(v.isText&&/^\s*$/.test(v.textBetween(Math.max(0,m.$from.pos-w),Math.min(v.nodeSize,m.$to.pos-w))))}),!b});for(let m=0;m<c.length;m++){let{$from:b,$to:v}=c[m];if(!h)f.removeMark(b.pos,v.pos,i);else{let w=b.pos,S=v.pos,I=b.nodeAfter,Z=v.nodeBefore,fe=I&&I.isText?/^\s*/.exec(I.text)[0].length:0,pe=Z&&Z.isText?/\s*$/.exec(Z.text)[0].length:0;w+fe<S&&(w+=fe,S-=pe),f.addMark(w,S,i.create(e))}}s(f.scrollIntoView())}return!0}}function br(...i){return function(e,n,t){for(let r=0;r<i.length;r++)if(i[r](e,n,t))return!0;return!1}}var Ed=br(yg,mC,gC),vg=br(yg,yC,bC),_n={Enter:br(Md,Td,Dd,Nd),"Mod-Enter":Id,Backspace:Ed,"Mod-Backspace":Ed,"Shift-Backspace":Ed,Delete:vg,"Mod-Delete":vg,"Mod-a":xC},Eg={"Ctrl-h":_n.Backspace,"Alt-Backspace":_n["Mod-Backspace"],"Ctrl-d":_n.Delete,"Ctrl-Alt-Backspace":_n["Mod-Delete"],"Alt-Delete":_n["Mod-Delete"],"Alt-d":_n["Mod-Delete"],"Ctrl-a":wC,"Ctrl-e":SC};for(let i in _n)Eg[i]=_n[i];var kC=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform?os.platform()=="darwin":!1,Mg=kC?Eg:_n;var Ft=class{constructor(e,n,t={}){this.match=e,this.match=e,this.handler=typeof n=="string"?IC(n):n,this.undoable=t.undoable!==!1,this.inCode=t.inCode||!1}};function IC(i){return function(e,n,t,r){let o=i;if(n[1]){let s=n[0].lastIndexOf(n[1]);o+=n[0].slice(s+n[1].length),t+=s;let a=t-r;a>0&&(o=n[0].slice(s-a,s)+o,t=r)}return e.tr.insertText(o,t,r)}}var TC=500;function Ig({rules:i}){let e=new Xe({state:{init(){return null},apply(n,t){let r=n.getMeta(this);return r||(n.selectionSet||n.docChanged?null:t)}},props:{handleTextInput(n,t,r,o){return kg(n,t,r,o,i,e)},handleDOMEvents:{compositionend:n=>{setTimeout(()=>{let{$cursor:t}=n.state.selection;t&&kg(n,t.pos,t.pos,"",i,e)})}}},isInputRules:!0});return e}function kg(i,e,n,t,r,o){if(i.composing)return!1;let s=i.state,a=s.doc.resolve(e),l=a.parent.textBetween(Math.max(0,a.parentOffset-TC),a.parentOffset,null,"\uFFFC")+t;for(let c=0;c<r.length;c++){let h=r[c];if(a.parent.type.spec.code){if(!h.inCode)continue}else if(h.inCode==="only")continue;let f=h.match.exec(l),m=f&&h.handler(s,f,e-(f[0].length-t.length),n);if(m)return h.undoable&&m.setMeta(o,{transform:m,from:e,to:n,text:t}),i.dispatch(m),!0}return!1}var Tg=new Ft(/--$/,"\u2014"),Dg=new Ft(/\.\.\.$/,"\u2026"),DC=new Ft(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201C"),NC=new Ft(/"$/,"\u201D"),OC=new Ft(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018"),RC=new Ft(/'$/,"\u2019"),Ng=[DC,NC,OC,RC];function Va(i,e,n=null,t){return new Ft(i,(r,o,s,a)=>{let l=n instanceof Function?n(o):n,c=r.tr.delete(s,a),h=c.doc.resolve(s),f=h.blockRange(),m=f&&cr(f,e,l);if(!m)return null;c.wrap(f,m);let b=c.doc.resolve(s-1).nodeBefore;return b&&b.type==e&&vi(c.doc,s-1)&&(!t||t(o,b))&&c.join(s-1),c})}function Od(i,e,n=null){return new Ft(i,(t,r,o,s)=>{let a=t.doc.resolve(o),l=n instanceof Function?n(r):n;return a.node(-1).canReplaceWith(a.index(-1),a.indexAfter(-1),e)?t.tr.delete(o,s).setBlockType(o,o,e,l):null})}var La=(i,e)=>{let{from:n,$from:t,to:r,empty:o}=i.selection;return o?!!e.isInSet(i.storedMarks||t.marks()):i.doc.rangeHasMark(n,r,e)},AC=(i,e)=>{for(let n=e.depth;n>0;n-=1)if(e.node(n).type===i)return e.node(n).type;return null},Rd=(i,e,n={})=>{let{selection:t}=i,{$from:r,to:o}=t,s=AC(e,r);return!Object.entries(n).length||!s?!!s:o<=r.end()&&r.parent.hasMarkup(e,n)},Og=i=>{let e=[],{selection:n,storedMarks:t}=i,{from:r,to:o,empty:s,$from:a}=n;return s?e=t||a.marks():i.doc.nodesBetween(r,o,l=>{e=[...e,...l.marks]}),e},Ad=i=>{let e=[],{selection:{from:n,to:t}}=i;return i.doc.nodesBetween(n,t,r=>{e.push(r)}),e},Pd=(i,e,n)=>{for(let t of e){let{$from:r,$to:o}=t,s=r.depth===0?i.type.allowsMarkType(n):!1;if(i.nodesBetween(r.pos,o.pos,a=>s?!1:(s=a.inlineContent&&a.type.allowsMarkType(n),!0)),s)return!0}return!1},Fd=(i,e,n)=>new Ft(i,(t,r,o,s)=>{let{tr:a}=t,l=o,c=s,[h,,f]=r,m=h.search(/\S/);if(f){let b=o+h.indexOf(f),v=b+f.length;v<s&&a.delete(v,s),b>o&&a.delete(o+m,b),c=o+f.length+m}return a.addMark(l,c,e.create(n)),a.removeStoredMark(e),a}),Rg=(i,e)=>{let{$from:n}=i.selection;for(let t=n.depth;t>=0;t-=1){let r=n.index(t);if(n.node(t).canReplaceWith(r,r,e))return!0}return!1};var Ag=()=>(i,e)=>{let{doc:n,selection:t,tr:r,schema:o}=i,{$head:{pos:s},from:a,to:l}=t,c=o.marks.link;if(a===l){let h=n.resolve(s),f=s-h.textOffset,m=f+h.parent.child(h.index()).nodeSize;r.removeMark(f,m,c)}else r.removeMark(a,l,c);return r.docChanged?(e?.(r),!0):!1},Vd=(i,e={})=>(n,t)=>{let{tr:r,selection:o}=n,{empty:s,ranges:a,$from:l,$to:c}=o;if(s&&o instanceof ue){let{$cursor:h}=o;if(!h||!Pd(n.doc,a,i)||(r.addStoredMark(i.create(e)),!r.storedMarksSet))return!1;t?.(r)}else{if(r.addMark(l.pos,c.pos,i.create(e)),!r.docChanged)return!1;t?.(r.scrollIntoView())}return!0},Pg=i=>(e,n)=>{let{tr:t,selection:r,storedMarks:o,doc:s}=e,{empty:a,ranges:l}=r;if(a&&r instanceof ue){let{$cursor:c}=r;if(!c||!Pd(e.doc,l,i))return!1;if(i.isInSet(o||c.marks()))return t.removeStoredMark(i),n?.(t),!0}else{for(let c of l){let{$from:h,$to:f}=c;s.rangeHasMark(h.pos,f.pos,i)&&t.removeMark(h.pos,f.pos,i)}if(!t.docChanged)return!1;n?.(t.scrollIntoView())}return!1};var ja=200,$e=function(){};$e.prototype.append=function(e){return e.length?(e=$e.from(e),!this.length&&e||e.length<ja&&this.leafAppend(e)||this.length<ja&&e.leafPrepend(this)||this.appendInner(e)):this};$e.prototype.prepend=function(e){return e.length?$e.from(e).append(this):this};$e.prototype.appendInner=function(e){return new PC(this,e)};$e.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?$e.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};$e.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};$e.prototype.forEach=function(e,n,t){n===void 0&&(n=0),t===void 0&&(t=this.length),n<=t?this.forEachInner(e,n,t,0):this.forEachInvertedInner(e,n,t,0)};$e.prototype.map=function(e,n,t){n===void 0&&(n=0),t===void 0&&(t=this.length);var r=[];return this.forEach(function(o,s){return r.push(e(o,s))},n,t),r};$e.from=function(e){return e instanceof $e?e:e&&e.length?new Fg(e):$e.empty};var Fg=function(i){function e(t){i.call(this),this.values=t}i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(r,o){return r==0&&o==this.length?this:new e(this.values.slice(r,o))},e.prototype.getInner=function(r){return this.values[r]},e.prototype.forEachInner=function(r,o,s,a){for(var l=o;l<s;l++)if(r(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,a){for(var l=o-1;l>=s;l--)if(r(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(r){if(this.length+r.length<=ja)return new e(this.values.concat(r.flatten()))},e.prototype.leafPrepend=function(r){if(this.length+r.length<=ja)return new e(r.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}($e);$e.empty=new Fg([]);var PC=function(i){function e(n,t){i.call(this),this.left=n,this.right=t,this.length=n.length+t.length,this.depth=Math.max(n.depth,t.depth)+1}return i&&(e.__proto__=i),e.prototype=Object.create(i&&i.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,r,o,s){var a=this.left.length;if(r<a&&this.left.forEachInner(t,r,Math.min(o,a),s)===!1||o>a&&this.right.forEachInner(t,Math.max(r-a,0),Math.min(this.length,o)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(t,r,o,s){var a=this.left.length;if(r>a&&this.right.forEachInvertedInner(t,r-a,Math.max(o,a)-a,s+a)===!1||o<a&&this.left.forEachInvertedInner(t,Math.min(r,a),o,s)===!1)return!1},e.prototype.sliceInner=function(t,r){if(t==0&&r==this.length)return this;var o=this.left.length;return r<=o?this.left.slice(t,r):t>=o?this.right.slice(t-o,r-o):this.left.slice(t,o).append(this.right.slice(0,r-o))},e.prototype.leafAppend=function(t){var r=this.right.leafAppend(t);if(r)return new e(this.left,r)},e.prototype.leafPrepend=function(t){var r=this.left.leafPrepend(t);if(r)return new e(r,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}($e),Ld=$e;var FC=500,Ti=class i{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let t=this.items.length;for(;;t--)if(this.items.get(t-1).selection){--t;break}let r,o;n&&(r=this.remapping(t,this.items.length),o=r.maps.length);let s=e.tr,a,l,c=[],h=[];return this.items.forEach((f,m)=>{if(!f.step){r||(r=this.remapping(t,m+1),o=r.maps.length),o--,h.push(f);return}if(r){h.push(new en(f.map));let b=f.step.map(r.slice(o)),v;b&&s.maybeStep(b).doc&&(v=s.mapping.maps[s.mapping.maps.length-1],c.push(new en(v,void 0,void 0,c.length+h.length))),o--,v&&r.appendMap(v,o)}else s.maybeStep(f.step);if(f.selection)return a=r?f.selection.map(r.slice(o)):f.selection,l=new i(this.items.slice(0,t).append(h.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,n,t,r){let o=[],s=this.eventCount,a=this.items,l=!r&&a.length?a.get(a.length-1):null;for(let h=0;h<e.steps.length;h++){let f=e.steps[h].invert(e.docs[h]),m=new en(e.mapping.maps[h],f,n),b;(b=l&&l.merge(m))&&(m=b,h?o.pop():a=a.slice(0,a.length-1)),o.push(m),n&&(s++,n=void 0),r||(l=m)}let c=s-t.depth;return c>LC&&(a=VC(a,c),s-=c),new i(a.append(o),s)}remapping(e,n){let t=new Io;return this.items.forEach((r,o)=>{let s=r.mirrorOffset!=null&&o-r.mirrorOffset>=e?t.maps.length-r.mirrorOffset:void 0;t.appendMap(r.map,s)},e,n),t}addMaps(e){return this.eventCount==0?this:new i(this.items.append(e.map(n=>new en(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let t=[],r=Math.max(0,this.items.length-n),o=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(m=>{m.selection&&a--},r);let l=n;this.items.forEach(m=>{let b=o.getMirror(--l);if(b==null)return;s=Math.min(s,b);let v=o.maps[b];if(m.step){let w=e.steps[b].invert(e.docs[b]),S=m.selection&&m.selection.map(o.slice(l+1,b));S&&a++,t.push(new en(v,w,S))}else t.push(new en(v))},r);let c=[];for(let m=n;m<s;m++)c.push(new en(o.maps[m]));let h=this.items.slice(0,r).append(c).append(t),f=new i(h,a);return f.emptyItemCount()>FC&&(f=f.compress(this.items.length-t.length)),f}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),t=n.maps.length,r=[],o=0;return this.items.forEach((s,a)=>{if(a>=e)r.push(s),s.selection&&o++;else if(s.step){let l=s.step.map(n.slice(t)),c=l&&l.getMap();if(t--,c&&n.appendMap(c,t),l){let h=s.selection&&s.selection.map(n.slice(t));h&&o++;let f=new en(c.invert(),l,h),m,b=r.length-1;(m=r.length&&r[b].merge(f))?r[b]=m:r.push(f)}}else s.map&&t--},this.items.length,0),new i(Ld.from(r.reverse()),o)}};Ti.empty=new Ti(Ld.empty,0);function VC(i,e){let n;return i.forEach((t,r)=>{if(t.selection&&e--==0)return n=r,!1}),i.slice(n)}var en=class i{constructor(e,n,t,r){this.map=e,this.step=n,this.selection=t,this.mirrorOffset=r}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new i(n.getMap().invert(),n,this.selection)}}},tn=class{constructor(e,n,t,r,o){this.done=e,this.undone=n,this.prevRanges=t,this.prevTime=r,this.prevComposition=o}},LC=20;function jC(i,e,n,t){let r=n.getMeta(Ii),o;if(r)return r.historyState;n.getMeta(UC)&&(i=new tn(i.done,i.undone,null,0,-1));let s=n.getMeta("appendedTransaction");if(n.steps.length==0)return i;if(s&&s.getMeta(Ii))return s.getMeta(Ii).redo?new tn(i.done.addTransform(n,void 0,t,za(e)),i.undone,Vg(n.mapping.maps),i.prevTime,i.prevComposition):new tn(i.done,i.undone.addTransform(n,void 0,t,za(e)),null,i.prevTime,i.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=n.getMeta("composition"),l=i.prevTime==0||!s&&i.prevComposition!=a&&(i.prevTime<(n.time||0)-t.newGroupDelay||!zC(n,i.prevRanges)),c=s?jd(i.prevRanges,n.mapping):Vg(n.mapping.maps);return new tn(i.done.addTransform(n,l?e.selection.getBookmark():void 0,t,za(e)),Ti.empty,c,n.time,a??i.prevComposition)}else return(o=n.getMeta("rebased"))?new tn(i.done.rebased(n,o),i.undone.rebased(n,o),jd(i.prevRanges,n.mapping),i.prevTime,i.prevComposition):new tn(i.done.addMaps(n.mapping.maps),i.undone.addMaps(n.mapping.maps),jd(i.prevRanges,n.mapping),i.prevTime,i.prevComposition)}function zC(i,e){if(!e)return!1;if(!i.docChanged)return!0;let n=!1;return i.mapping.maps[0].forEach((t,r)=>{for(let o=0;o<e.length;o+=2)t<=e[o+1]&&r>=e[o]&&(n=!0)}),n}function Vg(i){let e=[];for(let n=i.length-1;n>=0&&e.length==0;n--)i[n].forEach((t,r,o,s)=>e.push(o,s));return e}function jd(i,e){if(!i)return null;let n=[];for(let t=0;t<i.length;t+=2){let r=e.map(i[t],1),o=e.map(i[t+1],-1);r<=o&&n.push(r,o)}return n}function BC(i,e,n){let t=za(e),r=Ii.get(e).spec.config,o=(n?i.undone:i.done).popEvent(e,t);if(!o)return null;let s=o.selection.resolve(o.transform.doc),a=(n?i.done:i.undone).addTransform(o.transform,e.selection.getBookmark(),r,t),l=new tn(n?a:o.remaining,n?o.remaining:a,null,0,-1);return o.transform.setSelection(s).setMeta(Ii,{redo:n,historyState:l})}var zd=!1,Lg=null;function za(i){let e=i.plugins;if(Lg!=e){zd=!1,Lg=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){zd=!0;break}}return zd}var Ii=new Tt("history"),UC=new Tt("closeHistory");function jg(i={}){return i={depth:i.depth||100,newGroupDelay:i.newGroupDelay||500},new Xe({key:Ii,state:{init(){return new tn(Ti.empty,Ti.empty,null,0,-1)},apply(e,n,t){return jC(n,t,e,i)}},config:i,props:{handleDOMEvents:{beforeinput(e,n){let t=n.inputType,r=t=="historyUndo"?Ua:t=="historyRedo"?Uo:null;return r?(n.preventDefault(),r(e.state,e.dispatch)):!1}}}})}function Ba(i,e){return(n,t)=>{let r=Ii.getState(n);if(!r||(i?r.undone:r.done).eventCount==0)return!1;if(t){let o=BC(r,n,i);o&&t(e?o.scrollIntoView():o)}return!0}}var Ua=Ba(!1,!0),Uo=Ba(!0,!0),R2=Ba(!1,!1),A2=Ba(!0,!1);var xn={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},$a={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},qC=typeof navigator<"u"&&/Mac/.test(navigator.platform),$C=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(Ie=0;Ie<10;Ie++)xn[48+Ie]=xn[96+Ie]=String(Ie);var Ie;for(Ie=1;Ie<=24;Ie++)xn[Ie+111]="F"+Ie;var Ie;for(Ie=65;Ie<=90;Ie++)xn[Ie]=String.fromCharCode(Ie+32),$a[Ie]=String.fromCharCode(Ie);var Ie;for(qa in xn)$a.hasOwnProperty(qa)||($a[qa]=xn[qa]);var qa;function zg(i){var e=qC&&i.metaKey&&i.shiftKey&&!i.ctrlKey&&!i.altKey||$C&&i.shiftKey&&i.key&&i.key.length==1||i.key=="Unidentified",n=!e&&i.key||(i.shiftKey?$a:xn)[i.keyCode]||i.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}var HC=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function GC(i){let e=i.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let t,r,o,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))t=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))o=!0;else if(/^mod$/i.test(l))HC?s=!0:r=!0;else throw new Error("Unrecognized modifier name: "+l)}return t&&(n="Alt-"+n),r&&(n="Ctrl-"+n),s&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function WC(i){let e=Object.create(null);for(let n in i)e[GC(n)]=i[n];return e}function Bd(i,e,n=!0){return e.altKey&&(i="Alt-"+i),e.ctrlKey&&(i="Ctrl-"+i),e.metaKey&&(i="Meta-"+i),n&&e.shiftKey&&(i="Shift-"+i),i}function qo(i){return new Xe({props:{handleKeyDown:KC(i)}})}function KC(i){let e=WC(i);return function(n,t){let r=zg(t),o,s=e[Bd(r,t)];if(s&&s(n.state,n.dispatch,n))return!0;if(r.length==1&&r!=" "){if(t.shiftKey){let a=e[Bd(r,t,!1)];if(a&&a(n.state,n.dispatch,n))return!0}if((t.shiftKey||t.altKey||t.metaKey||r.charCodeAt(0)>127)&&(o=xn[t.keyCode])&&o!=r){let a=e[Bd(o,t)];if(a&&a(n.state,n.dispatch,n))return!0}}return!1}}var JC=["imgEl"],QC=i=>({"NgxEditor__Resizer--Active":i});function XC(i,e){if(i&1){let n=q();u(0,"span",4)(1,"span",5),E("mousedown",function(r){D(n);let o=x();return N(o.startResizing(r,"left"))}),d(),u(2,"span",6),E("mousedown",function(r){D(n);let o=x();return N(o.startResizing(r,"right"))}),d(),u(3,"span",7),E("mousedown",function(r){D(n);let o=x();return N(o.startResizing(r,"left"))}),d(),u(4,"span",8),E("mousedown",function(r){D(n);let o=x();return N(o.startResizing(r,"right"))}),d()()}}var YC=["ngxEditor"],ZC=["*"];function ew(i,e){if(i&1&&(u(0,"div",12),p(1),te(2,"async"),d()),i&2){let n=x(2);g(),P(" ",ie(2,1,(n.href.errors==null?null:n.href.errors.pattern)&&n.getLabel("enterValidUrl"))," ")}}function tw(i,e){if(i&1&&(u(0,"div",12),p(1),d()),i&2){let n=x(2);g(),P(" ",(n.text.errors==null?null:n.text.errors.required)&&"This is required"," ")}}function nw(i,e){if(i&1&&(u(0,"div",4)(1,"div",5)(2,"label"),y(3,"input",13),p(4),te(5,"async"),d()()()),i&2){let n=x(2);g(4),P(" ",ie(5,1,n.getLabel("openInNewTab"))," ")}}function iw(i,e){if(i&1){let n=q();u(0,"div",2)(1,"form",3),E("ngSubmit",function(r){D(n);let o=x();return N(o.insertLink(r))}),u(2,"div",4)(3,"div",5)(4,"label",6),p(5),te(6,"async"),d(),y(7,"input",7),M(8,ew,3,3,"div",8),d()(),u(9,"div",4)(10,"div",5)(11,"label",6),p(12),te(13,"async"),d(),y(14,"input",9),M(15,tw,2,1,"div",8),d()(),M(16,nw,6,3,"div",10),u(17,"button",11),p(18),te(19,"async"),d()()()}if(i&2){let n=x();g(),_("formGroup",n.form),g(3),_("htmlFor",n.getId("link-popup-url")),g(),z(ie(6,12,n.getLabel("url"))),g(2),_("id",n.getId("link-popup-url")),g(),_("ngIf",n.href.touched&&n.href.invalid),g(3),_("htmlFor",n.getId("link-popup-label")),g(),z(ie(13,14,n.getLabel("text"))),g(2),_("id",n.getId("link-popup-label")),g(),_("ngIf",n.text.touched&&n.text.invalid),g(),_("ngIf",n.options.showOpenInNewTab),g(),_("disabled",!n.form.valid),g(),z(ie(19,16,n.getLabel("insert")))}}var rw=(i,e)=>({"NgxEditor__Dropdown--Active":i,"NgxEditor--Disabled":e});function ow(i,e){if(i&1){let n=q();u(0,"button",4),te(1,"async"),E("mousedown",function(r){let o=D(n).$implicit,s=x(2);return N(s.onDropdownItemMouseClick(r,o))})("keydown.enter",function(r){let o=D(n).$implicit,s=x(2);return N(s.onDropdownItemKeydown(r,o))})("keydown.space",function(r){let o=D(n).$implicit,s=x(2);return N(s.onDropdownItemKeydown(r,o))}),p(2),te(3,"async"),d()}if(i&2){let n=e.$implicit,t=x(2);_("ngClass",ls(8,rw,n===t.activeItem,t.disabledItems.includes(n)))("ariaLabel",ie(1,4,t.getName(n))),ji("aria-selected",n===t.activeItem),g(2),P(" ",ie(3,6,t.getName(n))," ")}}function sw(i,e){if(i&1&&(u(0,"div",2),M(1,ow,4,11,"button",3),d()),i&2){let n=x();g(),_("ngForOf",n.items)("ngForTrackBy",n.trackByIndex)}}function aw(i,e){if(i&1&&(u(0,"div",12),p(1),te(2,"async"),d()),i&2){let n=x(2);g(),P(" ",ie(2,1,(n.src.errors==null?null:n.src.errors.pattern)&&n.getLabel("enterValidUrl"))," ")}}function lw(i,e){if(i&1){let n=q();u(0,"div",2)(1,"form",3),E("ngSubmit",function(r){D(n);let o=x();return N(o.insertLink(r))}),u(2,"div",4)(3,"div",5)(4,"label",6),p(5),te(6,"async"),d(),y(7,"input",7),M(8,aw,3,3,"div",8),d()(),u(9,"div",4)(10,"div",5)(11,"label",6),p(12),te(13,"async"),d(),y(14,"input",9),d()(),u(15,"div",4)(16,"div",5)(17,"label",6),p(18),te(19,"async"),d(),y(20,"input",10),d()(),u(21,"button",11),p(22),te(23,"async"),d()()()}if(i&2){let n=x();g(),_("formGroup",n.form),g(3),_("htmlFor",n.getId("image-popup-url")),g(),z(ie(6,13,n.getLabel("url"))),g(2),_("id",n.getId("image-popup-url")),g(),_("ngIf",n.src.touched&&n.src.invalid),g(3),_("htmlFor",n.getId("image-popup-label")),g(),z(ie(13,15,n.getLabel("altText"))),g(2),_("id",n.getId("image-popup-label")),g(3),_("htmlFor",n.getId("image-popup-title")),g(),z(ie(19,17,n.getLabel("title"))),g(2),_("id",n.getId("image-popup-title")),g(),_("disabled",!n.form.valid||!n.form.dirty),g(),z(ie(23,19,n.getLabel("insert")))}}var cw=(i,e)=>({backgroundColor:i,color:e}),dw=i=>({"NgxEditor__Color--Active":i});function uw(i,e){if(i&1){let n=q();u(0,"button",7),E("mousedown",function(r){let o=D(n).$implicit,s=x(3);return N(s.onColorSelectMouseClick(r,o))})("keydown.enter",function(){let r=D(n).$implicit,o=x(3);return N(o.onColorSelectKeydown(r))})("keydown.space",function(){let r=D(n).$implicit,o=x(3);return N(o.onColorSelectKeydown(r))}),d()}if(i&2){let n=e.$implicit,t=x(3);_("ngStyle",ls(3,cw,n,t.getContrastYIQ(n)))("title",n)("ngClass",rt(6,dw,t.activeColors.includes(n)))}}function hw(i,e){if(i&1&&(u(0,"div",5),M(1,uw,1,8,"button",6),d()),i&2){let n=e.$implicit,t=x(2);g(),_("ngForOf",n)("ngForTrackBy",t.trackByIndex)}}function pw(i,e){if(i&1){let n=q();u(0,"div",2),M(1,hw,2,2,"div",3),u(2,"button",4),E("mousedown",function(r){D(n);let o=x();return N(o.onRemoveMouseClick(r))})("keydown.enter",function(){D(n);let r=x();return N(r.onRemoveKeydown())})("keydown.space",function(){D(n);let r=x();return N(r.onRemoveKeydown())}),p(3),te(4,"async"),d()()}if(i&2){let n=x();g(),_("ngForOf",n.presets)("ngForTrackBy",n.trackByIndex),g(),_("disabled",!n.isActive),g(),P(" ",ie(4,4,n.getLabel("remove"))," ")}}var fw=(i,e)=>({"NgxEditor--Disabled":i,"NgxEditor__MenuBar--Reverse":e});function mw(i,e){if(i&1&&y(0,"ngx-toggle-command",7),i&2){let n=x().$implicit,t=x(2);Vt(t.iconContainerClass),_("toolbarItem",n)}}function gw(i,e){if(i&1&&y(0,"ngx-insert-command",7),i&2){let n=x().$implicit,t=x(2);Vt(t.iconContainerClass),_("toolbarItem",n)}}function vw(i,e){if(i&1&&(nt(0),y(1,"ngx-link",8),it()),i&2){let n=x().$implicit,t=x(2);g(),Vt(t.iconContainerClass),_("options",t.getLinkOptions(n))}}function yw(i,e){if(i&1&&y(0,"ngx-image"),i&2){let n=x(3);Vt(n.iconContainerClass)}}function bw(i,e){if(i&1&&y(0,"ngx-dropdown",10),i&2){let n=e.$implicit,t=x(4);Vt(t.dropdownContainerClass),_("group",n.key)("items",n.value)}}function _w(i,e){if(i&1&&(nt(0),M(1,bw,1,4,"ngx-dropdown",9),te(2,"keyvalue"),it()),i&2){let n=x().$implicit,t=x(2);g(),_("ngForOf",ie(2,2,t.getDropdownItems(n)))("ngForTrackBy",t.trackByIndex)}}function xw(i,e){if(i&1&&y(0,"ngx-color-picker",11),i&2){let n=x(3);Vt(n.iconContainerClass),_("presets",n.presets)}}function Cw(i,e){if(i&1&&y(0,"ngx-color-picker",12),i&2){let n=x(3);Vt(n.iconContainerClass),_("presets",n.presets)}}function ww(i,e){if(i&1&&y(0,"div"),i&2){let n=x(3);Vt(n.seperatorClass)}}function Sw(i,e){if(i&1&&(nt(0),M(1,mw,1,3,"ngx-toggle-command",3)(2,gw,1,3,"ngx-insert-command",3)(3,vw,2,3,"ng-container",2)(4,yw,1,2,"ngx-image",4)(5,_w,3,4,"ng-container",2)(6,xw,1,3,"ngx-color-picker",5)(7,Cw,1,3,"ngx-color-picker",6)(8,ww,1,2,"div",4),it()),i&2){let n=e.$implicit,t=e.last,r=x().last,o=x();g(),_("ngIf",o.toggleCommands.includes(n)),g(),_("ngIf",o.insertCommands.includes(n)),g(),_("ngIf",o.isLinkItem(n)),g(),_("ngIf",n==="image"),g(),_("ngIf",o.isDropDown(n)),g(),_("ngIf",n==="text_color"),g(),_("ngIf",n==="background_color"),g(),_("ngIf",t&&!r)}}function Ew(i,e){if(i&1&&(nt(0),M(1,Sw,9,8,"ng-container",1),it()),i&2){let n=e.$implicit,t=x();g(),_("ngForOf",n)("ngForTrackBy",t.trackByIndex)}}function Mw(i,e){if(i&1&&(nt(0),Fu(1,13),it()),i&2){let n=x();g(),_("ngTemplateOutlet",n.customMenuRef)}}var kw=(i=!0)=>new Xe({key:new Tt("editable"),state:{init(){return i},apply(e,n){return e.getMeta("UPDATE_EDITABLE")??n}},props:{editable(e){return this.getState(e)},attributes(e){return this.getState(e)?null:{class:"NgxEditor__Content--Disabled"}}}}),Iw="NgxEditor__Placeholder",Tw=i=>new Xe({key:new Tt("placeholder"),state:{init(){return i??""},apply(e,n){return e.getMeta("UPDATE_PLACEHOLDER")??n}},props:{decorations(e){let{doc:n}=e,{textContent:t,childCount:r}=n,o=this.getState(e);if(!o||r>1)return ct.empty;let s=[],a=(l,c)=>{if(l.type.isBlock&&l.childCount===0&&t.length===0){let h=c,f=c+l.nodeSize,m=Zt.node(h,f,{class:Iw,"data-placeholder":o,"data-align":l.attrs.align??null});s.push(m)}return!1};return n.descendants(a),ct.create(n,s)}}}),Dw=(i={})=>new Xe({key:new Tt("attributes"),props:{attributes:i}}),Nw=i=>new Xe({key:new Tt("focus"),props:{handleDOMEvents:{focus:()=>(i(),!1)}}}),Ow=i=>new Xe({key:new Tt("blur"),props:{handleDOMEvents:{blur:()=>(i(),!1)}}}),Rw=(()=>{let e=class e{constructor(){this.alt="",this.title="",this.outerWidth="",this.selected=!1,this.imageResize=new We}startResizing(t,r){t.preventDefault(),this.resizeImage(t,r)}resizeImage(t,r){let o=t.pageX,s=this.imgEl.nativeElement.clientWidth,a=r==="left",{width:l}=window.getComputedStyle(this.view.dom),c=parseInt(l,10),h=m=>{let v=m.pageX-o,w=a?s-v:s+v;w>c||w<20||(this.outerWidth=`${w}px`)},f=m=>{m.preventDefault(),document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",f),this.imageResize.emit()};document.addEventListener("mousemove",h),document.addEventListener("mouseup",f)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=A({type:e,selectors:[["ngx-image-view"]],viewQuery:function(r,o){if(r&1&&Nr(JC,7),r&2){let s;Bi(s=Ui())&&(o.imgEl=s.first)}},inputs:{src:"src",alt:"alt",title:"title",outerWidth:"outerWidth",selected:"selected",view:"view"},outputs:{imageResize:"imageResize"},decls:4,vars:9,consts:[["imgEl",""],[1,"NgxEditor__ImageWrapper",3,"ngClass"],["class","NgxEditor__ResizeHandle",4,"ngIf"],[3,"src","alt","title"],[1,"NgxEditor__ResizeHandle"],[1,"NgxEditor__ResizeHandle--TL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--TR",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BL",3,"mousedown"],[1,"NgxEditor__ResizeHandle--BR",3,"mousedown"]],template:function(r,o){r&1&&(u(0,"span",1),M(1,XC,5,0,"span",2),y(2,"img",3,0),d()),r&2&&(Pu("width",o.outerWidth),_("ngClass",rt(7,QC,o.selected)),g(),_("ngIf",o.selected),g(),_("src",o.src,Ke)("alt",o.alt)("title",o.title))},dependencies:[ot,W],styles:["*[_ngcontent-%COMP%], *[_ngcontent-%COMP%]:before, *[_ngcontent-%COMP%]:after{box-sizing:border-box}img[_ngcontent-%COMP%]{width:100%;height:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]{position:relative;display:inline-block;line-height:0;padding:2px}.NgxEditor__ImageWrapper.NgxEditor__Resizer--Active[_ngcontent-%COMP%]{padding:1px;border:1px solid #1a73e8}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]{position:absolute;height:100%;width:100%}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%], .NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{position:absolute;width:7px;height:7px;background-color:#1a73e8;border:1px solid white}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BR[_ngcontent-%COMP%]{bottom:-5px;right:-5px;cursor:se-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TR[_ngcontent-%COMP%]{top:-5px;right:-5px;cursor:ne-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--TL[_ngcontent-%COMP%]{top:-5px;left:-5px;cursor:nw-resize}.NgxEditor__ImageWrapper[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle[_ngcontent-%COMP%]   .NgxEditor__ResizeHandle--BL[_ngcontent-%COMP%]{bottom:-5px;left:-5px;cursor:sw-resize}"]});let i=e;return i})(),Ud=class{constructor(e,n,t,r){this.updating=!1,this.handleResize=()=>{if(this.updating)return;let{state:o,dispatch:s}=this.view,{tr:a}=o,l=a.setNodeMarkup(this.getPos(),void 0,H(k({},this.node.attrs),{width:this.imageComponentRef.instance.outerWidth})),c=l.doc.resolve(this.getPos()),h=new B(c);l.setSelection(h),s(l)},this.applicationRef=r.get(dn),this.imageComponentRef=Gu(Rw,{environmentInjector:this.applicationRef.injector}),this.applicationRef.attachView(this.imageComponentRef.hostView),this.setNodeAttributes(e.attrs),this.imageComponentRef.instance.view=n,this.dom=this.imageComponentRef.location.nativeElement,this.view=n,this.node=e,this.getPos=t,this.resizeSubscription=this.imageComponentRef.instance.imageResize.subscribe(()=>{this.handleResize()})}computeChanges(e,n){return JSON.stringify(e)===JSON.stringify(n)}setNodeAttributes(e){this.imageComponentRef.instance.src=e.src,this.imageComponentRef.instance.alt=e.alt,this.imageComponentRef.instance.title=e.title,this.imageComponentRef.instance.outerWidth=e.width}update(e){return e.type!==this.node.type?!1:(this.node=e,this.computeChanges(this.node.attrs,e.attrs)&&(this.updating=!0,this.setNodeAttributes(e.attrs),this.updating=!1),!0)}ignoreMutation(){return!0}selectNode(){this.imageComponentRef.instance.selected=!0}deselectNode(){this.imageComponentRef.instance.selected=!1}destroy(){this.resizeSubscription.unsubscribe(),this.applicationRef.detachView(this.imageComponentRef.hostView)}},Aw=i=>new Xe({key:new Tt("image-resize"),props:{nodeViews:{image:(e,n,t)=>new Ud(e,n,t,i)}}}),Pw=/(?:https?:\/\/)?[\w-]+(?:\.[\w-]+)+\.?(?:\d+)?(?:\/\S*)?$/,Qg=i=>{let e=[];return i.forEach(n=>{if(n.isText){let t=n.text,r=0,o=Pw.exec(t);if(o){let s=o.index,a=s+o[0].length,{link:l}=n.type.schema.marks;s>0&&e.push(n.cut(r,s));let c=t.slice(s,a);e.push(n.cut(s,a).mark(l.create({href:c}).addToSet(n.marks))),r=a}r<t.length&&e.push(n.cut(r))}else e.push(n.copy(Qg(n.content)))}),T.fromArray(e)},Fw=()=>new Xe({key:new Tt("linkify"),props:{transformPasted:i=>new O(Qg(i.content),i.openStart,i.openEnd)}}),Xg=i=>typeof i=="string",Vw=()=>window.trustedTypes,Yg=i=>Vw()?.isHTML(i)??!1,Zg=i=>Xg(i)||Yg(i),e0={type:"doc",content:[{type:"paragraph"}]},Lw=(i,e)=>{let n=e??Jn,t=n.nodeFromJSON(i),r=mn.fromSchema(n).serializeFragment(t.content),o=document.createElement("div");return o.appendChild(r),o.innerHTML},jw=(i,e,n)=>{let t=e??Jn,r=document.createElement("div");return r.innerHTML=i,Bn.fromSchema(t).parse(r,n).toJSON()},Ho=(i,e,n)=>{if(!i)return e.nodeFromJSON(e0);if(!Zg(i))return e.nodeFromJSON(i);let t=jw(i,e,n);return e.nodeFromJSON(t)},t0=(()=>{let e=class e{constructor(t,r,o){this.renderer=t,this.injector=r,this.elementRef=o,this.placeholder="Type Here...",this.focusOut=new We,this.focusIn=new We,this.unsubscribe=new Be,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(t){!this.outputFormat&&Zg(t)&&(this.outputFormat="html"),this.editor.setContent(t??e0)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.setMeta("UPDATE_EDITABLE",!t),this.renderer.setProperty(this.elementRef.nativeElement,"disabled",t)}handleChange(t){if(this.outputFormat==="html"){let r=Lw(t,this.editor.schema);this.onChange(r);return}this.onChange(t)}setMeta(t,r){let{dispatch:o,state:{tr:s}}=this.editor.view;o(s.setMeta(t,r))}setPlaceholder(t){this.setMeta("UPDATE_PLACEHOLDER",t)}registerPlugins(){this.editor.registerPlugin(kw()),this.editor.registerPlugin(Tw(this.placeholder)),this.editor.registerPlugin(Dw({class:"NgxEditor__Content"})),this.editor.registerPlugin(Nw(()=>{this.focusIn.emit()})),this.editor.registerPlugin(Ow(()=>{this.focusOut.emit(),this.onTouched()})),this.editor.features.resizeImage&&this.editor.registerPlugin(Aw(this.injector)),this.editor.features.linkOnPaste&&this.editor.registerPlugin(Fw())}ngOnInit(){if(!this.editor)throw new sr("Required editor instance for initializing editor component");this.registerPlugins(),this.renderer.appendChild(this.ngxEditor.nativeElement,this.editor.view.dom),this.editor.valueChanges.pipe(es(this.unsubscribe)).subscribe(t=>{this.handleChange(t)})}ngOnChanges(t){t.placeholder&&!t.placeholder.isFirstChange()&&this.setPlaceholder(t.placeholder.currentValue)}ngOnDestroy(){this.unsubscribe.next(),this.unsubscribe.complete()}};e.\u0275fac=function(r){return new(r||e)(C(cn),C(In),C(_t))},e.\u0275cmp=A({type:e,selectors:[["ngx-editor"]],viewQuery:function(r,o){if(r&1&&Nr(YC,7),r&2){let s;Bi(s=Ui())&&(o.ngxEditor=s.first)}},inputs:{editor:"editor",outputFormat:"outputFormat",placeholder:"placeholder"},outputs:{focusOut:"focusOut",focusIn:"focusIn"},features:[Ct([{provide:Vn,useExisting:Nt(()=>e),multi:!0}]),Bt],ngContentSelectors:ZC,decls:3,vars:0,consts:[["ngxEditor",""],[1,"NgxEditor"]],template:function(r,o){r&1&&(Vu(),u(0,"div",1,0),Lu(2),d())},styles:[`:root{--ngx-editor-border-radius: 4px;--ngx-editor-background-color: #fff;--ngx-editor-text-color: #000;--ngx-editor-placeholder-color: #6c757d;--ngx-editor-border-color: rgba(0, 0, 0, .2);--ngx-editor-wrapper-border-color: rgba(0, 0, 0, .2);--ngx-editor-menubar-bg-color: #fff;--ngx-editor-menubar-padding: 3px;--ngx-editor-menubar-height: 30px;--ngx-editor-blockquote-color: #ddd;--ngx-editor-blockquote-border-width: 3px;--ngx-editor-icon-size: 30px;--ngx-editor-popup-bg-color: #fff;--ngx-editor-popup-border-radius: 4px;--ngx-editor-popup-shadow: rgba(60, 64, 67, .15) 0px 2px 6px 2px;--ngx-editor-menu-item-border-radius: 2px;--ngx-editor-menu-item-active-color: #1a73e8;--ngx-editor-menu-item-hover-bg-color: #f1f1f1;--ngx-editor-menu-item-active-bg-color: #e8f0fe;--ngx-editor-seperator-color: #ccc;--ngx-editor-bubble-bg-color: #000;--ngx-editor-bubble-text-color: #fff;--ngx-editor-bubble-item-hover-color: #636262;--ngx-editor-bubble-seperator-color: #fff;--ngx-editor-focus-ring-color: #5e9ed6;--ngx-editor-error-color: red;--ngx-editor-click-pointer: default}.NgxEditor{background:var(--ngx-editor-background-color);color:var(--ngx-editor-text-color);background-clip:padding-box;border-radius:var(--ngx-editor-border-radius);border:1px solid var(--ngx-editor-border-color);position:relative}.NgxEditor--Disabled{opacity:.5!important;pointer-events:none!important}.NgxEditor__Placeholder:before{color:var(--ngx-editor-placeholder-color);opacity:1;-webkit-user-select:none;user-select:none;position:absolute;cursor:text;content:attr(data-placeholder)}.NgxEditor__Placeholder[data-align=right]:before{position:relative}.NgxEditor__Content{padding:8px;white-space:pre-wrap;outline:none;font-variant-ligatures:none;font-feature-settings:"liga" 0}.NgxEditor__Content p{margin:0 0 10px}.NgxEditor__Content blockquote{padding-left:16px;border-left:var(--ngx-editor-blockquote-border-width) solid var(--ngx-editor-blockquote-color);margin-left:0;margin-right:0}.NgxEditor__Content--Disabled{-webkit-user-select:none;user-select:none;pointer-events:none}.NgxEditor__Wrapper{border:1px solid var(--ngx-editor-wrapper-border-color);border-radius:var(--ngx-editor-border-radius)}.NgxEditor__Wrapper .NgxEditor__MenuBar{border-top-left-radius:var(--ngx-editor-border-radius);border-top-right-radius:var(--ngx-editor-border-radius);border-bottom:1px solid var(--ngx-editor-border-color)}.NgxEditor__Wrapper .NgxEditor{border-top-left-radius:0;border-top-right-radius:0;border:none}.NgxEditor__MenuBar{display:flex;flex-wrap:wrap;padding:var(--ngx-editor-menubar-padding);background-color:var(--ngx-editor-menubar-bg-color);gap:.25rem .1rem}.NgxEditor__MenuBar button:not(:disabled),.NgxEditor__MenuBar [role=button]:not(:disabled){cursor:var(--ngx-editor-click-pointer, default)}.NgxEditor__MenuItem{display:flex;align-items:center;justify-content:center;position:relative;flex-shrink:0}.NgxEditor__MenuItem.NgxEditor__MenuItem--IconContainer{display:flex;align-items:center;justify-content:center}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon{all:unset;appearance:none;height:var(--ngx-editor-icon-size);width:var(--ngx-editor-icon-size);transition:.2s ease-in-out;display:inline-flex;align-items:center;justify-content:center;border-radius:var(--ngx-editor-menu-item-border-radius)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon+.NgxEditor__MenuItem--Icon{margin-left:2px}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__MenuItem .NgxEditor__MenuItem--Icon:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuItem.NgxEditor__MenuItem--Text{padding:0 5px}.NgxEditor__MenuItem.NgxEditor__MenuItem--Active,.NgxEditor__MenuItem .NgxEditor__MenuItem--Active{background-color:var(--ngx-editor-menu-item-active-bg-color);color:var(--ngx-editor-menu-item-active-color)}.NgxEditor__Dropdown{min-width:64px;position:relative;display:flex;align-items:center;flex-shrink:0}.NgxEditor__Dropdown:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text{all:unset;appearance:none;display:flex;align-items:center;justify-content:center;padding:0 5px;height:100%;width:100%}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Text:after{display:inline-block;content:"";margin-left:24px;vertical-align:4px;border-top:4px solid;border-right:4px solid transparent;border-bottom:0;border-left:4px solid transparent}.NgxEditor__Dropdown .NgxEditor__Dropdown--DropdownMenu{position:absolute;left:0;box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;width:100%;top:calc(var(--ngx-editor-menubar-height) + 2px);display:flex;flex-direction:column}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item{all:unset;appearance:none;padding:8px;white-space:nowrap;color:inherit}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Item:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Selected,.NgxEditor__Dropdown .NgxEditor__Dropdown--Open{color:var(--ngx-editor-menu-item-active-color);background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active{background-color:var(--ngx-editor-menu-item-active-bg-color)}.NgxEditor__Dropdown .NgxEditor__Dropdown--Active:hover{background-color:var(--ngx-editor-menu-item-hover-bg-color)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--DropdownMenu{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__MenuBar--Reverse .NgxEditor__Dropdown--Text:after{transform:rotate(180deg)}.NgxEditor__MenuBar--Reverse .NgxEditor__Popup{top:unset;bottom:calc(var(--ngx-editor-menubar-height) + 2px)}.NgxEditor__Popup{position:absolute;top:calc(var(--ngx-editor-menubar-height) + 2px);box-shadow:var(--ngx-editor-popup-shadow);border-radius:var(--ngx-editor-popup-border-radius);background-color:var(--ngx-editor-popup-bg-color);z-index:10;min-width:192px;padding:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup{margin-bottom:8px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup label{margin-bottom:3px}.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=text],.NgxEditor__Popup .NgxEditor__Popup--FormGroup input[type=url]{padding:2px 4px}.NgxEditor__Popup .NgxEditor__Popup--Col{display:flex;flex-direction:column;position:relative}.NgxEditor__Popup .NgxEditor__Popup--Label{font-size:85%}.NgxEditor__Seperator{border-left:1px solid var(--ngx-editor-seperator-color);margin:0 5px}.NgxEditor__HelpText{font-size:80%}.NgxEditor__HelpText.NgxEditor__HelpText--Error{color:var(--ngx-editor-error-color)}
`],encapsulation:2});let i=e;return i})(),Qn=(()=>{let e=class e{constructor(){this.customMenuRefChange=new Be}setCustomMenuRef(t){this.customMenuRefChange.next(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),nn=class{constructor(e){this.name=e}apply(){return(e,n)=>{let{schema:t}=e,r=t.marks[this.name];return r?Vd(r)(e,n):!1}}toggle(){return(e,n)=>{let{schema:t}=e,r=t.marks[this.name];return r?ki(r)(e,n):!1}}isActive(e){let{schema:n}=e,t=n.marks[this.name];return t?La(e,t):!1}canExecute(e){return this.toggle()(e)}},qd=class{toggle(){return(e,n)=>{let{schema:t}=e,r=t.nodes.blockquote;return r?this.isActive(e)?xg(e,n):Sg(r)(e,n):!1}}isActive(e){let{schema:n}=e,t=n.nodes.blockquote;return t?Rd(e,t):!1}canExecute(e){return this.toggle()(e)}},$d=class{insert(){return(e,n)=>{let{schema:t,tr:r}=e,o=t.nodes.horizontal_rule;return o?(n(r.replaceSelectionWith(o.create()).scrollIntoView()),!0):!1}}canExecute(e){return Rg(e,e.schema.nodes.horizontal_rule)}},xr=class{constructor(e=!1){this.isBulletList=!1,this.isBulletList=e}getType(e){return this.isBulletList?e.nodes.bullet_list:e.nodes.ordered_list}toggle(){return(e,n)=>{let{schema:t}=e,r=this.getType(t);return r?this.isActive(e)?wd(t.nodes.list_item)(e,n):mg(r)(e,n):!1}}isActive(e){let{schema:n}=e,t=this.getType(n);return t?Rd(e,t):!1}canExecute(e){return this.toggle()(e)}},Cn=class{constructor(e){this.level=e}apply(){return(e,n)=>{let{schema:t}=e,r=t.nodes.heading;return r?Fa(r)(e,n):!1}}toggle(){return(e,n)=>{let{schema:t,selection:r,doc:o}=e,s=t.nodes.heading;if(!s)return!1;let a=r.$from.before(1),c=o.nodeAt(a)?.attrs??{};return this.isActive(e)?Fa(t.nodes.paragraph,c)(e,n):Fa(s,H(k({},c),{level:this.level}))(e,n)}}isActive(e){let{schema:n}=e,t=Ad(e),r=n.nodes.heading;if(!r)return!1;let o=[r,n.nodes.text,n.nodes.blockquote];return!!t.filter(l=>o.includes(l.type)).find(l=>l.attrs.level===this.level)}canExecute(e){return this.toggle()(e)}},Di=class{constructor(e){this.align=e}toggle(){return(e,n)=>{let{doc:t,selection:r,tr:o,schema:s}=e,{from:a,to:l}=r,c=!1;return t.nodesBetween(a,l,(h,f)=>{let m=h.type;if([s.nodes.paragraph,s.nodes.heading].includes(m)){c=!0;let b=h.attrs.align===this.align?null:this.align;o.setNodeMarkup(f,m,H(k({},h.attrs),{align:b}))}return!0}),c?(o.docChanged&&n?.(o),!0):!1}}isActive(e){return!!Ad(e).find(r=>r.attrs.align===this.align)}canExecute(e){return this.toggle()(e)}},zw={strict:!0},Hd=class{update(e){return(n,t)=>{let{schema:r,selection:o}=n,s=r.marks.link;return!s||o.empty?!1:ki(s,e)(n,t)}}insert(e,n){return(t,r)=>{let{schema:o,tr:s}=t;if(!o.marks.link)return!1;let l={href:n.href,title:n.title??e,target:n.target??"_blank"},c=o.text(e,[o.marks.link.create(l)]);return s.replaceSelectionWith(c,!1).scrollIntoView(),s.docChanged?(r?.(s),!0):!1}}isActive(e,n=zw){if(n.strict)return!0;let{schema:t}=e,r=t.marks.link;return r?La(e,r):!1}remove(e,n){return Ag()(e,n)}canExecute(e){let n={href:""};return this.insert("Exec",n)(e)||this.update(n)(e)}},n0=class{insert(e,n){return(t,r)=>{let{schema:o,tr:s,selection:a}=t,l=o.nodes.image;if(!l)return!1;let c=k({width:null,src:e},n);!c.width&&a instanceof B&&a.node.type===l&&(c.width=a.node.attrs.width),s.replaceSelectionWith(l.createAndFill(c));let h=s.doc.resolve(s.selection.anchor-s.selection.$anchor.nodeBefore.nodeSize);return s.setSelection(new B(h)).scrollIntoView(),s.docChanged?(r?.(s),!0):!1}}isActive(e){let{selection:n}=e;return n instanceof B?n.node.type.name==="image":!1}},_r=class{constructor(e,n="color"){this.name=e,this.attrName=n}apply(e){return(n,t)=>{let{schema:r,selection:o,doc:s}=n,a=r.marks[this.name];if(!a)return!1;let{from:l,to:c,empty:h}=o;if(!h&&l+1===c){let f=s.nodeAt(l);if(f?.isAtom&&!f.isText&&f.isLeaf)return!1}return Vd(a,e)(n,t)}}isActive(e){let{schema:n}=e,t=n.marks[this.name];return t?La(e,t):!1}getActiveColors(e){if(!this.isActive(e))return[];let{schema:n}=e;return Og(e).filter(o=>o.type===n.marks[this.name]).map(o=>o.attrs[this.attrName]).filter(Boolean)}remove(){return(e,n)=>{let{schema:t}=e,r=t.marks[this.name];return r?Pg(r)(e,n):!1}}canExecute(e){let n=this.name==="text_color"?{color:""}:{backgroundColor:""};return this.apply(n)(e)}},Bw=["link"],Gd=class{insert(){return(e,n)=>{let{tr:t}=e,{ranges:r,empty:o}=t.selection;return o||(Object.entries(e.schema.marks).forEach(([s,a])=>{Bw.includes(s)||r.forEach(l=>{t.removeMark(l.$from.pos,l.$to.pos,a)})}),n(t)),!0}}canExecute(){return!0}},Uw=["paragraph","heading","blockquote"],Bg=0,Ug=10,qw=(i,e,n)=>{let t=i.doc.nodeAt(e);if(!t)return!1;let r=t.attrs.indent??0,o=cf(r+(n==="increase"?1:-1),Bg,Ug);if(o===r||o<Bg||o>Ug)return!1;let s=H(k({},t.attrs),{indent:o});return i.setNodeMarkup(e,t.type,s),!0},Cr=class{constructor(e){this.method="increase",this.method=e}insert(){return(e,n)=>{let{tr:t,doc:r}=e,{from:o,to:s}=t.selection,a=!1;return r.nodesBetween(o,s,(l,c)=>{let h=l.type;return Uw.includes(h.name)?(a=qw(t,c,this.method),!1):!l.type.name.includes("list")}),a?(t.docChanged&&n?.(t),!0):!1}}canExecute(e){return this.insert()(e)}},Ga=class{constructor(e){this.mode="undo",this.mode=e}insert(){return(e,n)=>this.mode==="undo"?Ua(e,n):Uo(e,n)}canExecute(e){return this.insert()(e)}},$w=new nn("strong"),Hw=new nn("em"),Gw=new nn("code"),Ww=new nn("u"),Kw=new nn("s"),Jw=new qd,Qw=new $d,Xw=new Gd,Yw=new xr(!0),Zw=new xr(!1),eS=new Cn(1),tS=new Cn(2),nS=new Cn(3),iS=new Cn(4),rS=new Cn(5),oS=new Cn(6),sS=new Di("left"),aS=new Di("center"),lS=new Di("right"),cS=new Di("justify"),dS=new Hd,uS=new n0,hS=new _r("text_color","color"),pS=new _r("text_background_color","backgroundColor"),fS=new Cr("increase"),mS=new Cr("decrease"),gS=new nn("sup"),vS=new nn("sub"),yS=new Ga("undo"),bS=new Ga("redo"),Wa={bold:$w,italic:Hw,code:Gw,underline:Ww,strike:Kw,blockquote:Jw,bullet_list:Yw,ordered_list:Zw,h1:eS,h2:tS,h3:nS,h4:iS,h5:rS,h6:oS,align_left:sS,align_center:aS,align_right:lS,align_justify:cS,superscript:gS,subscript:vS},qg={horizontal_rule:Qw,format_clear:Xw,indent:fS,outdent:mS,undo:yS,redo:bS},$o=dS,$g=uS,_S=hS,xS=pS,Wd={bold:"Bold",italic:"Italic",code:"Code",underline:"Underline",strike:"Strike",blockquote:"Blockquote",bullet_list:"Bullet List",ordered_list:"Ordered List",heading:"Heading",h1:"Header 1",h2:"Header 2",h3:"Header 3",h4:"Header 4",h5:"Header 5",h6:"Header 6",align_left:"Left Align",align_center:"Center Align",align_right:"Right Align",align_justify:"Justify",text_color:"Text Color",background_color:"Background Color",horizontal_rule:"Horizontal rule",format_clear:"Clear Formatting",insertLink:"Insert Link",removeLink:"Remove Link",insertImage:"Insert Image",indent:"Increase Indent",outdent:"Decrease Indent",superscript:"Superscript",subscript:"Subscript",undo:"Undo",redo:"Redo",url:"URL",text:"Text",openInNewTab:"Open in new tab",insert:"Insert",altText:"Alt Text",title:"Title",remove:"Remove",enterValidUrl:"Please enter a valid URL"},Kd=class{constructor(e={}){this.locals=Wd,this.get=n=>{let t=this.locals[n];return t?Qo(t)?t:F(t):F("")},this.locals=k(k({},Wd),e)}},CS=`
  <path d="M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z" />
`,wS=`
  <path d="M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z" />
`,SS=`
<path d="M9.4 16.6L4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0l4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"/>
`,ES=`
<path d="M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"/>
`,MS=`
<path d="M6.85,7.08C6.85,4.37,9.45,3,12.24,3c1.64,0,3,0.49,3.9,1.28c0.77,0.65,1.46,1.73,1.46,3.24h-3.01 c0-0.31-0.05-0.59-0.15-0.85c-0.29-0.86-1.2-1.28-2.25-1.28c-1.86,0-2.34,1.02-2.34,1.7c0,0.48,0.25,0.88,0.74,1.21 C10.97,8.55,11.36,8.78,12,9H7.39C7.18,8.66,6.85,8.11,6.85,7.08z M21,12v-2H3v2h9.62c1.15,0.45,1.96,0.75,1.96,1.97 c0,1-0.81,1.67-2.28,1.67c-1.54,0-2.93-0.54-2.93-2.51H6.4c0,0.55,0.08,1.13,0.24,1.58c0.81,2.29,3.29,3.3,5.67,3.3 c2.27,0,5.3-0.89,5.3-4.05c0-0.3-0.01-1.16-0.48-1.94H21V12z"/>
`,kS=`
<path d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"/>
`,IS=`
<path d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"/>
`,TS=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"/>
`,DS=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
`,NS=`
<path d="M17 7h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1 0 1.43-.98 2.63-2.31 2.98l1.46 1.46C20.88 15.61 22 13.95 22 12c0-2.76-2.24-5-5-5zm-1 4h-2.19l2 2H16zM2 4.27l3.11 3.11C3.29 8.12 2 9.91 2 12c0 2.76 2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1 0-1.59 1.21-2.9 2.76-3.07L8.73 11H8v2h2.73L13 15.27V17h1.73l4.01 4L20 19.74 3.27 3 2 4.27z"/>
`,OS=`
<path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"/>
`,RS=`
<path d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"/>
`,AS=`
<path d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"/>
`,PS=`
<path d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"/>
`,FS=`
<path d="M3 21h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18v-2H3v2zm0-4h18V7H3v2zm0-6v2h18V3H3z"/>
`,VS=`
<path d="M2,20h20v4H2V20z M5.49,17h2.42l1.27-3.58h5.65L16.09,17h2.42L13.25,3h-2.5L5.49,17z M9.91,11.39l2.03-5.79h0.12l2.03,5.79 H9.91z"/>
`,LS=`
<path d="M16.56,8.94L7.62,0L6.21,1.41l2.38,2.38L3.44,8.94c-0.59,0.59-0.59,1.54,0,2.12l5.5,5.5C9.23,16.85,9.62,17,10,17 s0.77-0.15,1.06-0.44l5.5-5.5C17.15,10.48,17.15,9.53,16.56,8.94z M5.21,10L10,5.21L14.79,10H5.21z M19,11.5c0,0-2,2.17-2,3.5 c0,1.1,0.9,2,2,2s2-0.9,2-2C21,13.67,19,11.5,19,11.5z M2,20h20v4H2V20z"/>
`,jS=`
  <g>
    <rect fill="none" fill-rule="evenodd" height="24" width="24"/>
    <rect fill-rule="evenodd" height="2" width="16" x="4" y="11"/>
  </g>
`,zS=`
<path d="M0 0h24v24H0z" fill="none"/><path d="M3.27 5L2 6.27l6.97 6.97L6.5 19h3l1.57-3.66L16.73 21 18 19.73 3.55 5.27 3.27 5zM6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V5H6z"/>
`,BS='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M3 21h18v-2H3v2zM3 8v8l4-4-4-4zm8 9h10v-2H11v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',US='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M11 17h10v-2H11v2zm-8-5l4 4V8l-4 4zm0 9h18v-2H3v2zM3 3v2h18V3H3zm8 6h10V7H11v2zm0 4h10v-2H11v2z"/>',qS='<g><rect fill="none" height="20" width="20"/><path d="M17,6l-1,0v1h2v1l-3,0V6c0-0.55,0.45-1,1-1l1,0l0-1h-2V3l2,0c0.55,0,1,0.45,1,1v1C18,5.55,17.55,6,17,6z M5.63,16h1.9 l2.43-3.87h0.08L12.47,16h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,6h-1.9l3.09,4.8L5.63,16z"/></g>',$S='<g><rect fill="none" height="20" width="20"/><path d="M17,15l-1,0v1h2v1h-3v-2c0-0.55,0.45-1,1-1l1,0l0-1h-2v-1l2,0c0.55,0,1,0.45,1,1v1C18,14.55,17.55,15,17,15z M5.63,14h1.9 l2.43-3.87h0.08L12.47,14h1.9l-3.32-5.2l3.1-4.8h-1.91l-2.19,3.56H9.96L7.75,4h-1.9l3.09,4.8L5.63,14z"/></g>',HS='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"/>',GS='<path d="M0 0h24v24H0V0z" fill="none"/><path d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"/>',WS=20,KS=20,JS="currentColor",i0={bold:CS,italic:wS,code:SS,underline:ES,strike:MS,ordered_list:kS,bullet_list:IS,blockquote:TS,link:DS,unlink:NS,image:OS,align_left:RS,align_center:AS,align_right:PS,align_justify:FS,text_color:VS,color_fill:LS,horizontal_rule:jS,format_clear:zS,indent:BS,outdent:US,superscript:qS,subscript:$S,undo:HS,redo:GS,path:"<path></path>"},Jd=class{static get(e,n=JS){let t=i0[e];return t&&(t.includes("<path")||t.includes("<g"))?`
        <svg
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 24 24"
          fill=${n}
          height=${WS}
          width=${KS}
        >
          ${t}
        </svg>
      `:t}},Qd=(()=>{let e=class e{constructor(){this.locals={},this.icons={}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Ni=(()=>{let e=class e{constructor(t){this.config=t}get locals(){return new Kd(this.config.locals)}getIcon(t){return this.config.icons[t]?this.config.icons[t]:Jd.get(t)}};e.\u0275fac=function(r){return new(r||e)(j(Qd,8))},e.\u0275prov=L({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})(),Hg=i=>({locals:i.locals??{},icons:i.icons??{}}),wr=(()=>{let e=class e{constructor(t){this.sanitizer=t}transform(t){return Yg(t)?t:this.sanitizer.bypassSecurityTrustHtml(t)}};e.\u0275fac=function(r){return new(r||e)(C(Al,16))},e.\u0275pipe=yu({name:"sanitizeHtml",type:e,pure:!0});let i=e;return i})(),QS=(()=>{let e=class e{get name(){return this.toolbarItem}constructor(t,r){this.ngxeService=t,this.menuService=r,this.isActive=!1,this.disabled=!1,this.update=o=>{let{state:s}=o,a=Wa[this.name];this.isActive=a.isActive(s),this.disabled=!a.canExecute(s)}}toggle(){let{state:t,dispatch:r}=this.editorView;Wa[this.name].toggle()(t,r)}onMouseClick(t){t.preventDefault(),t.button===0&&this.toggle()}onKeydown(){this.toggle()}getTitle(t){return this.ngxeService.locals.get(t)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(t=>{this.update(t)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(C(Ni),C(Qn))},e.\u0275cmp=A({type:e,selectors:[["ngx-toggle-command"]],inputs:{toolbarItem:"toolbarItem"},decls:4,vars:14,consts:[["type","button",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"]],template:function(r,o){r&1&&(u(0,"button",0),te(1,"sanitizeHtml"),te(2,"async"),te(3,"async"),E("mousedown",function(a){return o.onMouseClick(a)})("keydown.enter",function(){return o.onKeydown()})("keydown.space",function(){return o.onKeydown()}),d()),r&2&&($t("NgxEditor__MenuItem--Active",o.isActive)("NgxEditor--Disabled",o.disabled),_("disabled",o.disabled)("innerHTML",ie(1,8,o.html),qt)("title",ie(2,10,o.getTitle(o.name)))("ariaLabel",ie(3,12,o.getTitle(o.name))))},dependencies:[ri,wr]});let i=e;return i})(),XS=(()=>{let e=class e{get name(){return this.toolbarItem}constructor(t,r){this.ngxeService=t,this.menuService=r,this.disabled=!1,this.update=o=>{let{state:s}=o,a=qg[this.name];this.disabled=!a.canExecute(s)}}onMouseClick(t){t.preventDefault(),t.button===0&&this.insert()}onKeydown(){this.insert()}insert(){let{state:t,dispatch:r}=this.editorView;qg[this.name].insert()(t,r)}getTitle(t){return this.ngxeService.locals.get(t)}ngOnInit(){this.html=this.ngxeService.getIcon(this.name),this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(t=>{this.update(t)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(C(Ni),C(Qn))},e.\u0275cmp=A({type:e,selectors:[["ngx-insert-command"]],inputs:{toolbarItem:"toolbarItem"},decls:4,vars:12,consts:[[1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"]],template:function(r,o){r&1&&(u(0,"button",0),te(1,"sanitizeHtml"),te(2,"async"),te(3,"async"),E("mousedown",function(a){return o.onMouseClick(a)})("keydown.enter",function(){return o.onKeydown()})("keydown.space",function(){return o.onKeydown()}),d()),r&2&&($t("NgxEditor--Disabled",o.disabled),_("disabled",o.disabled)("innerHTML",ie(1,6,o.html),qt)("title",ie(2,8,o.getTitle(o.name)))("ariaLabel",ie(3,10,o.getTitle(o.name))))},dependencies:[ri,wr]});let i=e;return i})(),Gg={showOpenInNewTab:!0},YS=(()=>{let e=class e{constructor(t,r,o){this.el=t,this.ngxeService=r,this.menuService=o,this.options=Gg,this.showPopup=!1,this.isActive=!1,this.canExecute=!0,this.componentId=Ic(),this.setText=()=>{let{state:{selection:s,doc:a}}=this.editorView,{empty:l,from:c,to:h}=s,f=l?"":a.textBetween(c,h);f&&(this.text.patchValue(f),this.text.disable())},this.update=s=>{let{state:a}=s;this.isActive=$o.isActive(a,{strict:!1}),this.canExecute=$o.canExecute(a)}}get icon(){return this.ngxeService.getIcon(this.isActive?"unlink":"link")}get title(){return this.ngxeService.locals.get(this.isActive?"removeLink":"insertLink")}get href(){return this.form.get("href")}get text(){return this.form.get("text")}onDocumentClick(t){!this.el.nativeElement.contains(t.target)&&this.showPopup&&this.hidePopup()}getId(t){return`${t}-${this.componentId}`}getLabel(t){return this.ngxeService.locals.get(t)}hidePopup(){this.showPopup=!1,this.form.reset({href:"",text:"",openInNewTab:!0}),this.text.enable()}togglePopup(){let{state:t,dispatch:r}=this.editorView;if(this.isActive){$o.remove(t,r);return}this.showPopup=!this.showPopup,this.showPopup&&this.setText()}onTogglePopupMouseClick(t){t.button===0&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}insertLink(t){t.preventDefault();let{text:r,href:o,openInNewTab:s}=this.form.getRawValue(),{dispatch:a,state:l}=this.editorView,{selection:c}=l,h;this.options.showOpenInNewTab&&(h=s?"_blank":"_self");let f={title:o,href:o,target:h};c.empty?($o.insert(r,f)(l,a),this.editorView.focus()):$o.update(f)(l,a),this.hidePopup()}ngOnInit(){this.editorView=this.menuService.editor.view,this.form=new Et({href:new se("",[ge.required,ge.pattern(this.menuService.editor.linkValidationPattern)]),text:new se("",[ge.required]),openInNewTab:new se(!0)}),this.updateSubscription=this.menuService.editor.update.subscribe(t=>{this.update(t)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(C(_t),C(Ni),C(Qn))},e.\u0275cmp=A({type:e,selectors:[["ngx-link"]],hostBindings:function(r,o){r&1&&E("mousedown",function(a){return o.onDocumentClick(a)},!1,Ir)},inputs:{options:[2,"options","options",t=>k(k({},Gg),t)]},features:[is],decls:5,vars:16,consts:[["type","button","aria-haspopup","dialog",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel","ariaExpanded"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"ngSubmit","formGroup"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label",3,"htmlFor"],["type","href","formControlName","href","autocomplete","off",3,"id"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","text","autocomplete","off",3,"id"],["class","NgxEditor__Popup--FormGroup",4,"ngIf"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"],["type","checkbox","formControlName","openInNewTab"]],template:function(r,o){r&1&&(u(0,"button",0),te(1,"sanitizeHtml"),te(2,"async"),te(3,"async"),E("mousedown",function(a){return o.onTogglePopupMouseClick(a)})("keydown.enter",function(){return o.onTogglePopupKeydown()})("keydown.space",function(){return o.onTogglePopupKeydown()}),d(),M(4,iw,20,18,"div",1)),r&2&&($t("NgxEditor__MenuItem--Active",o.isActive||o.showPopup)("NgxEditor--Disabled",!o.canExecute),_("disabled",!o.canExecute)("innerHTML",ie(1,10,o.icon),qt)("title",ie(2,12,o.title))("ariaLabel",ie(3,14,o.title))("ariaExpanded",o.showPopup),g(4),_("ngIf",o.showPopup))},dependencies:[W,le,X,bo,Y,ae,Me,ke,ri,wr]});let i=e;return i})(),ZS=(()=>{let e=class e{constructor(t,r,o){this.ngxeService=t,this.menuService=r,this.el=o,this.isDropdownOpen=!1,this.disabledItems=[],this.update=s=>{let{state:a}=s;this.disabledItems=[];let l=[];this.items.forEach(c=>{let h=Wa[c];h.isActive(a)&&l.push(c),h.canExecute(a)||this.disabledItems.push(c)}),l.length===1?[this.activeItem]=l:this.activeItem=null}}get isSelected(){return!!(this.activeItem||this.isDropdownOpen)}get isDropdownDisabled(){return this.disabledItems.length===this.items.length}onDocumentClick(t){!this.el.nativeElement.contains(t)&&this.isDropdownOpen&&(this.isDropdownOpen=!1)}getName(t){return this.ngxeService.locals.get(t)}getIsDropdownActive(t){return this.activeItem===t}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}onToggleDropdownMouseClick(t){t.preventDefault(),t.button===0&&this.toggleDropdown()}onToggleDropdownKeydown(){this.toggleDropdown()}trackByIndex(t){return t}selectItem(t){let r=Wa[t],{state:o,dispatch:s}=this.editorView;r.toggle()(o,s),this.isDropdownOpen=!1}onDropdownItemMouseClick(t,r){t.preventDefault(),t.button===0&&this.selectItem(r)}onDropdownItemKeydown(t,r){t.preventDefault(),this.selectItem(r)}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(t=>{this.update(t)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(C(Ni),C(Qn),C(_t))},e.\u0275cmp=A({type:e,selectors:[["ngx-dropdown"]],hostBindings:function(r,o){r&1&&E("mousedown",function(a){return o.onDocumentClick(a.target)},!1,Ir)},inputs:{group:"group",items:"items"},decls:5,vars:13,consts:[["type","button","aria-haspopup","listbox",1,"NgxEditor__Dropdown--Text",3,"mousedown","keydown.enter","keydown.space","disabled","ariaLabel","ariaExpanded"],["class","NgxEditor__Dropdown--DropdownMenu","role","listbox",4,"ngIf"],["role","listbox",1,"NgxEditor__Dropdown--DropdownMenu"],["type","button","class","NgxEditor__Dropdown--Item","role","option",3,"ngClass","ariaLabel","mousedown","keydown.enter","keydown.space",4,"ngFor","ngForOf","ngForTrackBy"],["type","button","role","option",1,"NgxEditor__Dropdown--Item",3,"mousedown","keydown.enter","keydown.space","ngClass","ariaLabel"]],template:function(r,o){r&1&&(u(0,"button",0),te(1,"async"),E("mousedown",function(a){return o.onToggleDropdownMouseClick(a)})("keydown.enter",function(){return o.onToggleDropdownKeydown()})("keydown.space",function(){return o.onToggleDropdownKeydown()}),p(2),te(3,"async"),d(),M(4,sw,2,2,"div",1)),r&2&&($t("NgxEditor__Dropdown--Selected",o.isSelected)("NgxEditor--Disabled",o.isDropdownDisabled),_("disabled",o.isDropdownDisabled)("ariaLabel",ie(1,9,o.getName(o.activeItem||o.group)))("ariaExpanded",o.isDropdownOpen),g(2),P(" ",ie(3,11,o.getName(o.activeItem||o.group)),`
`),g(2),_("ngIf",o.isDropdownOpen))},dependencies:[ot,Se,W,ri]});let i=e;return i})(),eE=(()=>{let e=class e{constructor(t,r,o){this.el=t,this.ngxeService=r,this.menuService=o,this.showPopup=!1,this.isActive=!1,this.componentId=Ic(),this.form=new Et({src:new se("",[ge.required,ge.pattern(`(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#
\r]*)?#?([^
\r]*)`)]),alt:new se(""),title:new se("")}),this.update=s=>{let{state:a}=s;this.isActive=$g.isActive(a)}}get icon(){return this.ngxeService.getIcon("image")}get src(){return this.form.get("src")}onDocumentClick(t){!this.el.nativeElement.contains(t.target)&&this.showPopup&&this.hideForm()}getId(t){return`${t}-${this.componentId}`}getLabel(t){return this.ngxeService.locals.get(t)}hideForm(){this.showPopup=!1,this.form.reset({src:"",alt:"",title:""})}togglePopup(){this.showPopup=!this.showPopup,this.showPopup&&this.fillForm()}onTogglePopupMouseClick(t){t.button===0&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}fillForm(){let{state:t}=this.editorView,{selection:r}=t;if(r instanceof B&&this.isActive){let{src:o,alt:s="",title:a=""}=r.node.attrs;this.form.setValue({src:o,alt:s,title:a})}}insertLink(t){t.preventDefault();let{src:r,alt:o,title:s}=this.form.getRawValue(),{dispatch:a,state:l}=this.editorView,c={alt:o,title:s};$g.insert(r,c)(l,a),this.editorView.focus(),this.hideForm()}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(t=>{this.update(t)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(C(_t),C(Ni),C(Qn))},e.\u0275cmp=A({type:e,selectors:[["ngx-image"]],hostBindings:function(r,o){r&1&&E("mousedown",function(a){return o.onDocumentClick(a)},!1,Ir)},decls:5,vars:13,consts:[["type","button","aria-haspopup","dialog",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","innerHTML","title","ariaLabel","ariaExpanded"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],[1,"NgxEditor__Popup--Form",3,"ngSubmit","formGroup"],[1,"NgxEditor__Popup--FormGroup"],[1,"NgxEditor__Popup--Col"],[1,"NgxEditor__Popup--Label",3,"htmlFor"],["type","href","formControlName","src","autocomplete","off",3,"id"],["class","NgxEditor__HelpText NgxEditor__HelpText--Error",4,"ngIf"],["type","text","formControlName","alt","autocomplete","off",3,"id"],["type","text","formControlName","title","autocomplete","off",3,"id"],["type","submit",3,"disabled"],[1,"NgxEditor__HelpText","NgxEditor__HelpText--Error"]],template:function(r,o){r&1&&(u(0,"button",0),te(1,"sanitizeHtml"),te(2,"async"),te(3,"async"),E("mousedown",function(a){return o.onTogglePopupMouseClick(a)})("keydown.enter",function(){return o.onTogglePopupKeydown()})("keydown.space",function(){return o.onTogglePopupKeydown()}),d(),M(4,lw,24,21,"div",1)),r&2&&($t("NgxEditor__MenuItem--Active",o.isActive||o.showPopup),_("innerHTML",ie(1,7,o.icon),qt)("title",ie(2,9,o.getLabel("insertImage")))("ariaLabel",ie(3,11,o.getLabel("insertImage")))("ariaExpanded",o.showPopup),g(4),_("ngIf",o.showPopup))},dependencies:[W,le,X,Y,ae,Me,ke,ri,wr]});let i=e;return i})(),tE=(()=>{let e=class e{constructor(t,r,o){this.el=t,this.menuService=r,this.ngxeService=o,this.showPopup=!1,this.isActive=!1,this.activeColors=[],this.canExecute=!0,this.update=s=>{let{state:a}=s;this.canExecute=this.command.canExecute(a),this.isActive=this.command.isActive(a),this.activeColors=[],this.isActive&&(this.activeColors=this.command.getActiveColors(a))}}get title(){return this.getLabel(this.type==="text_color"?"text_color":"background_color")}get icon(){return this.ngxeService.getIcon(this.type==="text_color"?"text_color":"color_fill")}get command(){return this.type==="text_color"?_S:xS}getContrastYIQ(t){let r=t.replace("#",""),o=parseInt(r.substring(0,2),16),s=parseInt(r.substring(2,4),16),a=parseInt(r.substring(4,6),16);return(o*299+s*587+a*114)/1e3>=128?"black":"white"}onDocumentClick(t){!this.el.nativeElement.contains(t.target)&&this.showPopup&&this.hidePopup()}hidePopup(){this.showPopup=!1}togglePopup(){this.showPopup=!this.showPopup}onTogglePopupMouseClick(t){t.preventDefault(),t.button===0&&this.togglePopup()}onTogglePopupKeydown(){this.togglePopup()}remove(){let{state:t,dispatch:r}=this.editorView;this.command.remove()(t,r),this.hidePopup()}onRemoveMouseClick(t){t.preventDefault(),t.button===0&&(t.preventDefault(),this.remove())}onRemoveKeydown(){this.remove()}trackByIndex(t){return t}selectColor(t){let{state:r,dispatch:o}=this.editorView;if(this.type==="text_color"){let s={color:t};this.command.apply(s)(r,o)}else{let s={backgroundColor:t};this.command.apply(s)(r,o)}this.editorView.hasFocus()||this.editorView.focus(),this.hidePopup()}onColorSelectMouseClick(t,r){t.preventDefault(),t.button===0&&this.selectColor(r)}onColorSelectKeydown(t){this.selectColor(t)}getLabel(t){return this.ngxeService.locals.get(t)}ngOnInit(){this.editorView=this.menuService.editor.view,this.updateSubscription=this.menuService.editor.update.subscribe(t=>{this.update(t)})}ngOnDestroy(){this.updateSubscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)(C(_t),C(Qn),C(Ni))},e.\u0275cmp=A({type:e,selectors:[["ngx-color-picker"]],hostBindings:function(r,o){r&1&&E("mousedown",function(a){return o.onDocumentClick(a)},!1,Ir)},inputs:{presets:"presets",type:"type"},decls:5,vars:15,consts:[["type","button",1,"NgxEditor__MenuItem--Icon",3,"mousedown","keydown.enter","keydown.space","disabled","innerHTML","title","ariaLabel"],["class","NgxEditor__Popup",4,"ngIf"],[1,"NgxEditor__Popup"],["class","NgxEditor__ColorContainer",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__MenuItem--Button",3,"mousedown","keydown.enter","keydown.space","disabled"],[1,"NgxEditor__ColorContainer"],["class","NgxEditor__Color",3,"ngStyle","title","ngClass","mousedown","keydown.enter","keydown.space",4,"ngFor","ngForOf","ngForTrackBy"],[1,"NgxEditor__Color",3,"mousedown","keydown.enter","keydown.space","ngStyle","title","ngClass"]],template:function(r,o){r&1&&(u(0,"button",0),te(1,"sanitizeHtml"),te(2,"async"),te(3,"async"),E("mousedown",function(a){return o.onTogglePopupMouseClick(a)})("keydown.enter",function(){return o.onTogglePopupKeydown()})("keydown.space",function(){return o.onTogglePopupKeydown()}),d(),M(4,pw,5,6,"div",1)),r&2&&($t("NgxEditor__MenuItem--Active",o.isActive||o.showPopup)("NgxEditor--Disabled",!o.canExecute),_("disabled",!o.canExecute)("innerHTML",ie(1,9,o.icon),qt)("title",ie(2,11,o.title))("ariaLabel",ie(3,13,o.title)),g(4),_("ngIf",o.showPopup))},dependencies:[ot,Se,W,Zu,ri,wr],styles:['@charset "UTF-8";.NgxEditor__Popup[_ngcontent-%COMP%]{width:230px}.NgxEditor__ColorContainer[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.NgxEditor__ColorContainer[_ngcontent-%COMP%] + .NgxEditor__ColorContainer[_ngcontent-%COMP%]{margin-top:5px}.NgxEditor__Color[_ngcontent-%COMP%]{border:none;outline:none;border-radius:6px;width:24px;height:24px;flex-shrink:0}.NgxEditor__Color[_ngcontent-%COMP%]:focus-visible{outline:1px solid var(--ngx-editor-focus-ring-color);outline-offset:1px}.NgxEditor__Color--Active[_ngcontent-%COMP%]:after{content:"\\2714";font-size:90%}.NgxEditor__MenuItem--Button[_ngcontent-%COMP%]{margin-top:5px}']});let i=e;return i})();var nE=[["bold","italic"],[{heading:["h1","h2","h3","h4","h5","h6"]}],["link","image"],["text_color","background_color"]];var iE=["#b60205","#d93f0b","#fbca04","#0e8a16","#006b75","#1d76db","#0052cc","#5319e7","#e99695","#f9d0c4","#fef2c0","#c2e0c6","#bfdadc","#c5def5","#bfd4f2","#d4c5f9"],r0=(()=>{let e=class e{constructor(t){this.menuService=t,this.toolbar=nE,this.colorPresets=iE,this.disabled=!1,this.customMenuRef=null,this.dropdownPlacement="bottom",this.toggleCommands=["bold","italic","underline","strike","code","blockquote","ordered_list","bullet_list","align_left","align_center","align_right","align_justify","superscript","subscript"],this.insertCommands=["horizontal_rule","format_clear","indent","outdent","undo","redo"],this.iconContainerClass=["NgxEditor__MenuItem","NgxEditor__MenuItem--IconContainer"],this.dropdownContainerClass=["NgxEditor__Dropdown"],this.seperatorClass=["NgxEditor__Seperator"]}get presets(){let r=[];return this.colorPresets.forEach((o,s)=>{let a=Math.floor(s/8);r[a]||r.push([]),r[a].push(o)}),r}trackByIndex(t){return t}isDropDown(t){return!!t?.heading}getDropdownItems(t){return t}isLinkItem(t){return t==="link"?!0:typeof t=="object"&&typeof t?.link=="object"}isLinkWithOptions(t){return typeof t=="object"&&typeof t?.link=="object"}getLinkOptions(t){return t?.link}ngOnInit(){if(!this.editor)throw new sr("Required editor instance to initialize menu component");this.menuService.editor=this.editor}};e.\u0275fac=function(r){return new(r||e)(C(Qn))},e.\u0275cmp=A({type:e,selectors:[["ngx-editor-menu"]],inputs:{toolbar:"toolbar",colorPresets:"colorPresets",disabled:"disabled",editor:"editor",customMenuRef:"customMenuRef",dropdownPlacement:"dropdownPlacement"},features:[Ct([Qn])],decls:3,vars:7,consts:[[1,"NgxEditor__MenuBar",3,"ngClass"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"toolbarItem","class",4,"ngIf"],[3,"class",4,"ngIf"],["type","text_color",3,"class","presets",4,"ngIf"],["type","background_color",3,"class","presets",4,"ngIf"],[3,"toolbarItem"],[3,"options"],[3,"class","group","items",4,"ngFor","ngForOf","ngForTrackBy"],[3,"group","items"],["type","text_color",3,"presets"],["type","background_color",3,"presets"],[3,"ngTemplateOutlet"]],template:function(r,o){r&1&&(u(0,"div",0),M(1,Ew,2,2,"ng-container",1)(2,Mw,2,1,"ng-container",2),d()),r&2&&(_("ngClass",ls(4,fw,o.disabled,o.dropdownPlacement==="top")),g(),_("ngForOf",o.toolbar)("ngForTrackBy",o.trackByIndex),g(),_("ngIf",o.customMenuRef))},dependencies:[ot,Se,W,eh,QS,XS,YS,ZS,eE,tE,nh]});let i=e;return i})();var rE=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ge({type:e}),e.\u0275inj=He({providers:[wr],imports:[U,oe]});let i=e;return i})(),Ha=new Q("NgxEditorConfig"),Wg={locals:Wd,icons:i0},o0=(()=>{let e=class e{static forRoot(t=Wg){return{ngModule:e,providers:[{provide:Ha,useValue:t},{provide:Qd,useFactory:Hg,deps:[Ha]}]}}static forChild(t=Wg){return{ngModule:e,providers:[{provide:Ha,useValue:t},{provide:Qd,useFactory:Hg,deps:[Ha]},Ni]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ge({type:e}),e.\u0275inj=He({imports:[U,rE]});let i=e;return i})(),oE=i=>i===null||i.length===0,Kg=i=>i!==null&&typeof i.length=="number",sE=i=>{if(!i)return!0;let{childCount:e,firstChild:n}=i;return!!(e===1&&n?.isTextblock&&n.content.size===0)},Ka=class{static required(e){return n=>{let t=e||Jn,r=Ho(n.value,t);return sE(r)?{required:!0}:null}}static maxLength(e,n){return t=>{let r=n||Jn,s=Ho(t.value,r).textContent;return Kg(s)&&s.length>e?{maxlength:{requiredLength:e,actualLength:s.length}}:null}}static minLength(e,n){return t=>{let r=n||Jn,s=Ho(t.value,r).textContent;return oE(s)||!Kg(s)?null:s.length<e?{minlength:{requiredLength:e,actualLength:s.length}}:null}}},gt=(i,e=!1)=>(n,t)=>{let r=new nn(i);return e?r.toggle()(n,t):r.apply()(n,t)},Xd=class{constructor(e){if(this.applyTrx=n=>{this.state=this.state.apply(n??this.tr),this.tr=this.state.tr,this.tr.setMeta("APPLIED_TRX",!0)},this.dispatch=n=>{this.applyTrx(n)},!e)throw new sr("Required view to initialize commands.");this.view=e,this.state=e.state,this.tr=this.view.state.tr}exec(){if(!this.tr.getMeta("APPLIED_TRX"))return!1;let e=!this.view.state.doc.eq(this.state.doc);this.view.updateState(this.state);let n=this.tr.setMeta("FORCE_EMIT",e);return this.view.dispatch(n),!0}focus(e="end"){let n=e==="start"?J.atStart(this.state.doc):J.atEnd(this.state.doc);return this.tr.setSelection(n),this.applyTrx(),this.view.focus(),this}scrollIntoView(){return this.tr.scrollIntoView(),this.applyTrx(),this}insertText(e){return this.tr.insertText(e),this.applyTrx(),this}insertNewLine(){return br(...[Md,Td,Dd,Nd])(this.state,this.dispatch),this}applyMark(e){return gt(e,!1)(this.state,this.dispatch),this}toggleMark(e){return gt(e,!0)(this.state,this.dispatch),this}bold(){return gt("strong")(this.state,this.dispatch),this}toggleBold(){return gt("strong",!0)(this.state,this.dispatch),this}italics(){return gt("em")(this.state,this.dispatch),this}toggleItalics(){return gt("em",!0)(this.state,this.dispatch),this}underline(){return gt("u")(this.state,this.dispatch),this}toggleUnderline(){return gt("u",!0)(this.state,this.dispatch),this}strike(){return gt("s")(this.state,this.dispatch),this}toggleStrike(){return gt("s",!0)(this.state,this.dispatch),this}code(){return gt("code")(this.state,this.dispatch),this}toggleCode(){return gt("code",!0)(this.state,this.dispatch),this}superscript(){return gt("sup")(this.state,this.dispatch),this}subscript(){return gt("sub")(this.state,this.dispatch),this}toggleOrderedList(){return new xr(!1).toggle()(this.state,this.dispatch),this}toggleBulletList(){return new xr(!0).toggle()(this.state,this.dispatch),this}toggleHeading(e){return new Cn(e).toggle()(this.state,this.dispatch),this}insertLink(e,n){return new Hd().insert(e,n)(this.state,this.dispatch),this}updateLink(e){return new Hd().update(e)(this.state,this.dispatch),this}insertImage(e,n={}){return new n0().insert(e,n)(this.state,this.dispatch),this}textColor(e){return new _r("text_color").apply({color:e})(this.state,this.dispatch),this}backgroundColor(e){return new _r("text_background_color").apply({backgroundColor:e})(this.state,this.dispatch),this}removeTextColor(){return new _r("text_color").remove()(this.state,this.dispatch),this}removeBackgroundColor(){return new _r("text_background_color").remove()(this.state,this.dispatch),this}align(e){return new Di(e).toggle()(this.state,this.dispatch),this}insertHTML(e){let{selection:n,schema:t,tr:r}=this.state,{from:o,to:s}=n,a=document.createElement("div");a.innerHTML=Xg(e)?e.trim():e;let l=Bn.fromSchema(t).parseSlice(a),c=r.replaceRange(o,s,l);return this.applyTrx(c),this}indent(){return new Cr("increase").insert()(this.state,this.dispatch),this}outdent(){return new Cr("decrease").insert()(this.state,this.dispatch),this}},aE=typeof navigator<"u"?/Mac/.test(navigator.platform):!1,lE=i=>Va(/^\s*>\s$/,i),cE=i=>Va(/^(?:\d+)\.\s$/,i,e=>({order:Number(e[1])}),(e,n)=>n.childCount+n.attrs.order===Number(e[1])),dE=i=>Va(/^\s*(?:[-+*])\s$/,i),uE=i=>Od(/^```$/,i),hE=(i,e)=>Od(new RegExp(`^(#{1,${e}})\\s$`),i,n=>({level:n[1].length})),pE=i=>Fd(/(?:^|\s)(?:(\*\*|__)(?:([^*_]+))(\*\*|__))$/,i),fE=i=>Fd(/(?:^|\s)(?:(\*|_)(?:([^*_]+))(\*|_))$/,i),mE=i=>{let e=Ng.concat(Dg,Tg);return e.push(pE(i.marks.strong)),e.push(fE(i.marks.em)),e.push(lE(i.nodes.blockquote)),e.push(cE(i.nodes.ordered_list)),e.push(dE(i.nodes.bullet_list)),e.push(uE(i.nodes.code_block)),e.push(hE(i.nodes.heading,6)),Ig({rules:e})},gE=(i,e)=>{let n={};n["Mod-z"]=Ua,aE?n["Shift-Mod-z"]=Uo:n["Mod-y"]=Uo;let t=[qo({"Mod-b":ki(i.marks.strong),"Mod-i":ki(i.marks.em),"Mod-u":ki(i.marks.u),"Mod-`":ki(i.marks.code)}),qo({Enter:gg(i.nodes.list_item),"Shift-Enter":br(Id,(r,o)=>{let{tr:s}=r,a=i.nodes.hard_break;return o(s.replaceSelectionWith(a.create()).scrollIntoView()),!0}),"Mod-[":wd(i.nodes.list_item),"Mod-]":Sd(i.nodes.list_item),Tab:Sd(i.nodes.list_item)}),qo(Mg)];return e.history&&t.push(qo(n)),t},vE=(i,e)=>{let n=[];return e.keyboardShortcuts&&n.push(...gE(i,{history:e.history})),e.history&&n.push(jg()),e.inputRules&&n.push(mE(i)),n},s0={linkOnPaste:!0,resizeImage:!0},Jg={content:null,history:!0,keyboardShortcuts:!0,inputRules:!0,schema:Jn,plugins:[],nodeViews:{},attributes:{},features:s0,handleScrollToSelection:null,linkValidationPattern:`(https?://)?([\\da-z.-]+)\\.([a-z.]{2,6})[/\\w .-]*/??([^#
\r]*)?#?([^
\r]*)|(mailto:.*[@].*)`},Ja=class{constructor(e=Jg){this.valueChangesSubject=new Be,this.updateSubject=new Be,this.options=k(k({},Jg),e),this.createEditor()}get valueChanges(){return this.valueChangesSubject.asObservable()}get update(){return this.updateSubject.asObservable()}get schema(){return this.options.schema||Jn}get linkValidationPattern(){return this.options.linkValidationPattern}get commands(){return new Xd(this.view)}get features(){return k(k({},s0),this.options.features)}handleTransactions(e){let n=this.view.state.apply(e);if(this.view.updateState(n),this.updateSubject.next(this.view),!e.docChanged&&!e.getMeta("FORCE_EMIT"))return;let t=n.doc.toJSON();this.valueChangesSubject.next(t)}createEditor(){let{options:e,schema:n}=this,{content:t=null,nodeViews:r}=e,{history:o=!0,keyboardShortcuts:s=!0,inputRules:a=!0}=e,l=Ho(t,n,e.parseOptions),c=e.plugins??[],h=e.attributes??{},f=vE(n,{history:o,keyboardShortcuts:s,inputRules:a});this.view=new Ra(null,{state:wa.create({doc:l,schema:n,plugins:[...f,...c]}),nodeViews:r,dispatchTransaction:this.handleTransactions.bind(this),attributes:h,handleScrollToSelection:e.handleScrollToSelection})}setContent(e){if(lf(e))return;let{state:n}=this.view,{tr:t,doc:r}=n,o=Ho(e,this.schema,this.options.parseOptions);t.replaceWith(0,n.doc.content.size,o),!r.eq(t.doc)&&t.docChanged&&this.view.dispatch(t)}registerPlugin(e){let{state:n}=this.view,t=[...n.plugins,e],r=n.reconfigure({plugins:t});this.view.updateState(r)}destroy(){this.view.destroy()}};var Xa=tt(et());function bE(i,e){if(i&1&&(u(0,"option",16),p(1),d()),i&2){let n=e.$implicit;_("value",n.id),g(),z(n.RoleName)}}var Ya=(()=>{let e=class e{constructor(t,r,o,s,a){this.fb=t,this.router=r,this.local=o,this.httpRequest=s,this.handleModal=a,this.isLoading=!1,this.userRoles=[]}ngOnInit(){this.createUserForm=this.fb.group({full_name:["",ge.required],email:["",[ge.required,ge.email]],phone:["",ge.required],role_id:["",ge.required]}),this.httpRequest.makeGetRequest("/users_management/user_roles/all").subscribe(t=>{this.userRoles=t.data})}onSubmit(){if(this.createUserForm.valid){this.isLoading=!0;let t=this.createUserForm.value;this.httpRequest.makePostRequest("/users_management/create_new_user",t).subscribe(r=>{this.isLoading=!1,r.status&&((0,Xa.default)({text:"User created successfully!",duration:3e3,gravity:"top",position:"right",backgroundColor:"blue"}).showToast(),this.local.write("auth-token",{token:r.token}),this.router.navigate(["/portal/user"]))},r=>{this.isLoading=!1;let o=r?.error?.message??r.message;console.log(r),(0,Xa.default)({text:`Error: ${o}`,duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast()})}else(0,Xa.default)({text:"Please fill out the form correctly.",duration:3e3,gravity:"top",position:"right",backgroundColor:"orange"}).showToast()}};e.\u0275fac=function(r){return new(r||e)(C(Je),C(me),C(ft),C(K),C(re))},e.\u0275cmp=A({type:e,selectors:[["app-newuser"]],standalone:!0,features:[V],decls:26,vars:4,consts:[[1,""],[1,"px-5","mb-5"],[1,"text-center"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","full_name"],["type","text","formControlName","full_name","placeholder","Full Name",1,"form-control"],["for","email"],["formControlName","email","type","email","placeholder","Enter email",1,"form-control"],["for","phone"],["type","tel","formControlName","phone","placeholder","Phone Number",1,"form-control"],["for","role_id"],["formControlName","role_id",1,"form-control"],["value","","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary","btn-block","w-full","bg-blue-600","text-white","py-3","rounded-md","hover:bg-blue-700",3,"disabled"],[3,"value"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"div",1)(2,"h3",2),p(3,"Create User"),d(),u(4,"form",3),E("ngSubmit",function(){return o.onSubmit()}),u(5,"div",4)(6,"label",5),p(7,"Full Name"),d(),y(8,"input",6),d(),u(9,"div",4)(10,"label",7),p(11,"Email address"),d(),y(12,"input",8),d(),u(13,"div",4)(14,"label",9),p(15,"Phone Number"),d(),y(16,"input",10),d(),u(17,"div",4)(18,"label",11),p(19,"Select Role"),d(),u(20,"select",12)(21,"option",13),p(22,"Select Role"),d(),M(23,bE,2,2,"option",14),d()(),u(24,"button",15),p(25),d()()()()),r&2&&(g(4),_("formGroup",o.createUserForm),g(19),_("ngForOf",o.userRoles),g(),_("disabled",o.isLoading),g(),P(" ",o.isLoading?"Submitting...":"Create User"," "))},dependencies:[U,Se,oe,le,jn,zn,X,Ln,Y,ae,Me,ke,ve]});let i=e;return i})();var we=tt(et());var l0=(()=>{let e=class e{constructor(t){this.sidebarService=t}ngOnInit(){this.userData=this.sidebarService.getUserData(),console.log(this.userData)}};e.\u0275fac=function(r){return new(r||e)(C(re))},e.\u0275cmp=A({type:e,selectors:[["app-userdetail"]],standalone:!0,features:[V],decls:14,vars:3,consts:[[3,"innerHTML"]],template:function(r,o){r&1&&(u(0,"table")(1,"tr")(2,"th"),p(3,"ID"),d(),u(4,"th"),p(5,"Title"),d(),u(6,"th"),p(7,"Contents"),d()(),u(8,"tr")(9,"td"),p(10),d(),u(11,"td"),p(12),d(),y(13,"td",0),d()()),r&2&&(g(10),z(o.userData.Id),g(2),z(o.userData.MemTitle),g(),_("innerHTML",o.userData.MemContents,qt))},styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:20px 0;font-size:18px;text-align:left}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px 15px;border:1px solid #ddd}th[_ngcontent-%COMP%]{background-color:#f4f4f4;font-weight:700}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}td[_ngcontent-%COMP%]   [innerHTML][_ngcontent-%COMP%]{padding:10px;border-radius:4px;background-color:#f0f8ff}"]});let i=e;return i})();var Yd=tt(et());var c0=(()=>{let e=class e{constructor(t,r,o){this.sidebarService=t,this.fb=r,this.httpRequest=o,this.isLoading=!1}ngOnInit(){this.authData=this.sidebarService.getAuthData();let t=this.authData.asciiToken;this.createAuthForm=this.fb.group({otp:[""],asciiToken:t})}onSubmit(){if(this.isLoading=!0,this.createAuthForm.valid){let t=this.createAuthForm.value;this.httpRequest.makePostRequest("/users_management/verify_auth",t).subscribe(r=>{console.log(r),this.isLoading=!1,(0,Yd.default)({text:"successful!",duration:3e3,gravity:"top",position:"right",backgroundColor:"blue"}).showToast()},r=>{console.log(r),this.isLoading=!1,(0,Yd.default)({text:"Error",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast()})}}};e.\u0275fac=function(r){return new(r||e)(C(re),C(Je),C(K))},e.\u0275cmp=A({type:e,selectors:[["app-authentication"]],standalone:!0,features:[V],decls:15,vars:4,consts:[[1,"px-5","mb-5"],[3,"ngSubmit","formGroup"],[1,"qrcode"],["alt","User Image",3,"src"],[1,"form-group"],["for","otp"],["formControlName","otp","type","otp","placeholder","Enter Otp Code",1,"form-control"],["type","submit",1,"btn","btn-primary","btn-block","w-full","bg-blue-600","text-white","py-3","rounded-md","hover:bg-blue-700",3,"disabled"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"p"),p(2,"User Authentication Page"),d(),y(3,"p"),u(4,"p"),p(5,"Scan your Qr Code"),d(),u(6,"form",1),E("ngSubmit",function(){return o.onSubmit()}),u(7,"p",2),y(8,"img",3),d(),u(9,"div",4)(10,"label",5),p(11,"Otp Code"),d(),y(12,"input",6),d(),u(13,"button",7),p(14),d()()()),r&2&&(g(6),_("formGroup",o.createAuthForm),g(2),_("src",o.authData.url,Ke),g(5),_("disabled",o.isLoading),g(),P(" ",o.isLoading?"Submitting...":"Submit"," "))},dependencies:[ve,le,X,Y,ae,U,oe,Me,ke],styles:[".qrcode[_ngcontent-%COMP%]{border:2px solid blue;height:200px;width:200px}"]});let i=e;return i})();function _E(i,e){if(i&1){let n=q();u(0,"form",3),E("ngSubmit",function(){D(n);let r=x();return N(r.addESignature())}),u(1,"div",4)(2,"label",5),p(3,"Title:"),d(),u(4,"input",6),_e("ngModelChange",function(r){D(n);let o=x();return be(o.esignature.title,r)||(o.esignature.title=r),N(r)}),d()(),u(5,"label",7),p(6,"Upload Image:"),d(),u(7,"input",8),E("change",function(r){D(n);let o=x();return N(o.onFileChange(r))}),d(),u(8,"button",9),p(9,"Add E-Signature"),d()()}if(i&2){let n=x();g(4),ye("ngModel",n.esignature.title)}}function xE(i,e){if(i&1){let n=q();u(0,"form",3),E("ngSubmit",function(){D(n);let r=x();return N(r.updateESignature())}),u(1,"h3"),p(2,"Update Existing E-Signature"),d(),u(3,"label",5),p(4,"Title:"),d(),u(5,"input",10),_e("ngModelChange",function(r){D(n);let o=x();return be(o.esignature.title,r)||(o.esignature.title=r),N(r)}),d(),u(6,"label",7),p(7,"Upload New Image:"),d(),u(8,"input",11),E("change",function(r){D(n);let o=x();return N(o.onFileChange(r))}),d(),u(9,"button",9),p(10,"Update E-Signature"),d()()}if(i&2){let n=x();g(5),ye("ngModel",n.esignature.title)}}function CE(i,e){if(i&1&&(u(0,"div")(1,"h3"),p(2,"Current E-Signature"),d(),y(3,"img",12),d()),i&2){let n=x();g(3),_("src",n.esignature.image_path,Ke)}}var d0=(()=>{let e=class e{constructor(t){this.http=t,this.esignature={title:"",image_path:""},this.recordExists=!1}ngOnInit(){this.checkForExistingRecord()}checkForExistingRecord(){this.http.makeGetRequest("/api/esignatures").subscribe(t=>{t.length>0&&(this.esignature=t[0],this.recordExists=!0)})}onFileChange(t){let r=t.target.files[0];if(r){let o=new FileReader;o.onload=s=>{this.esignature.image_path=s.target.result},o.readAsDataURL(r)}}addESignature(){console.log(this.esignature),this.http.makePostRequest("/api/esignatures",this.esignature).subscribe(()=>{this.checkForExistingRecord()})}updateESignature(){}};e.\u0275fac=function(r){return new(r||e)(C(K))},e.\u0275cmp=A({type:e,selectors:[["app-esignature"]],standalone:!0,features:[V],decls:6,vars:3,consts:[[1,"esignatures-container"],["enctype","multipart/form-data",3,"ngSubmit",4,"ngIf"],[4,"ngIf"],["enctype","multipart/form-data",3,"ngSubmit"],[1,"form-group"],["for","title"],["type","text","id","title","name","title","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","image"],["type","file","id","image","accept","image/*","required","",3,"change"],["type","submit",1,"btn","btn-primary"],["type","text","id","title","name","title","required","",3,"ngModelChange","ngModel"],["type","file","id","image","accept","image/*",3,"change"],["alt","E-Signature",1,"signature-image",3,"src"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"h2"),p(2,"E-Signatures Management"),d(),M(3,_E,10,1,"form",1)(4,xE,11,1,"form",1)(5,CE,4,1,"div",2),d()),r&2&&(g(3),_("ngIf",!o.recordExists),g(),_("ngIf",o.recordExists),g(),_("ngIf",o.esignature.image_path))},dependencies:[U,W,oe,le,X,Y,ae,lt,ve,Re,Mt],styles:["table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:20px 0;font-size:18px;text-align:left}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px 15px;border:1px solid #ddd}th[_ngcontent-%COMP%]{background-color:#f4f4f4;font-weight:700}tr[_ngcontent-%COMP%]:nth-child(2n){background-color:#f9f9f9}tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}td[_ngcontent-%COMP%]   [innerHTML][_ngcontent-%COMP%]{padding:10px;border-radius:4px;background-color:#f0f8ff}"]});let i=e;return i})();var wE=tt(et());var Zd=tt(et());var u0=(()=>{let e=class e{constructor(t,r){this.httpRequest=t,this.handleModal=r,this.otp="",this.isLoading=!1}onSubmit(){if(!this.otp){(0,Zd.default)({text:"invalid",gravity:"top",duration:3e3,backgroundColor:"red",position:"right"}).showToast();return}this.isLoading=!0,console.log(this.otp),this.httpRequest.makePostRequest("/auth/validate_two_fact_auth",{otp:this.otp}).subscribe(t=>{t.status?this.publishAndUnpublish():this.isLoading=!1},t=>{console.error("Error updating memo:",t),this.isLoading=!1,(0,Zd.default)({text:"invalid OTP",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast()})}publishAndUnpublish(){this.httpRequest.makePatchRequest("/memo/publsh_memo",{memId:this.handleModal.publishMemId}).subscribe(t=>{this.isLoading=!1,this.handleModal.showMother("undefined")},t=>{console.log(t),this.isLoading=!1})}};e.\u0275fac=function(r){return new(r||e)(C(K),C(re))},e.\u0275cmp=A({type:e,selectors:[["app-otpconfirmation"]],standalone:!0,features:[V],decls:8,vars:3,consts:[[1,"form-group","px-5"],[3,"ngSubmit"],["type","text","name","otp",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary","btn-block","w-full","bg-blue-600","text-white","py-3","rounded-md","hover:bg-blue-700","my-3",3,"disabled"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"form",1),E("ngSubmit",function(){return o.onSubmit()}),u(2,"div")(3,"label"),p(4,"Enter your Otp"),d(),u(5,"input",2),_e("ngModelChange",function(a){return be(o.otp,a)||(o.otp=a),a}),d()(),u(6,"button",3),p(7),d()()()),r&2&&(g(5),ye("ngModel",o.otp),g(),_("disabled",o.isLoading),g(),P(" ",o.isLoading?"Submitting...":"Submit"," "))},dependencies:[oe,le,X,Y,ae,U,ve,Re,Mt]});let i=e;return i})();var Za=tt(et());var h0=(()=>{let e=class e{constructor(t){this.httpRequest=t,this.isLoading=!1,this.name=""}onSubmit(){if(!this.name){console.log("here"),(0,Za.default)({text:"invalid",gravity:"top",duration:3e3,backgroundColor:"red",position:"right"}).showToast();return}this.isLoading=!0,console.log(this.name),this.httpRequest.makePostRequest("/memo/folder/create",{name:this.name}).subscribe(t=>{this.folder=t.data,console.log(this.folder),this.isLoading=!1,(0,Za.default)({text:"successful!",duration:3e3,gravity:"top",position:"right",backgroundColor:"blue"}).showToast()},t=>{console.error("Error updating memo:",t),this.isLoading=!1,(0,Za.default)({text:"",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast()})}};e.\u0275fac=function(r){return new(r||e)(C(K))},e.\u0275cmp=A({type:e,selectors:[["app-createfolder"]],standalone:!0,features:[V],decls:8,vars:3,consts:[[1,"form-group","px-5"],[3,"ngSubmit"],["type","text","name","name",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"btn","btn-primary","btn-block","w-full","bg-blue-600","text-white","py-3","rounded-md","hover:bg-blue-700","my-3",3,"disabled"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"form",1),E("ngSubmit",function(){return o.onSubmit()}),u(2,"div")(3,"label"),p(4,"Enter folder name"),d(),u(5,"input",2),_e("ngModelChange",function(a){return be(o.name,a)||(o.name=a),a}),d()(),u(6,"button",3),p(7),d()()()),r&2&&(g(5),ye("ngModel",o.name),g(),_("disabled",o.isLoading),g(),P(" ",o.isLoading?"Submitting...":"Submit"," "))},dependencies:[ve,le,X,Y,ae,Re,Mt,U,oe]});let i=e;return i})();var el=tt(et());function SE(i,e){if(i&1){let n=q();nt(0),u(1,"h3"),p(2,"Scan your physical QR Code"),d(),u(3,"div")(4,"div",1)(5,"label",2),p(6,"Enter URL or Text:"),d(),u(7,"input",3),_e("ngModelChange",function(r){D(n);let o=x();return be(o.handleModals.qrCodeData.MemUniqueId,r)||(o.handleModals.qrCodeData.MemUniqueId=r),N(r)}),d(),y(8,"img",4),d(),u(9,"button",5),E("click",function(){D(n);let r=x();return N(r.createQrCode())}),p(10),d()(),it()}if(i&2){let n=x();g(7),ye("ngModel",n.handleModals.qrCodeData.MemUniqueId),g(),_("src",n.handleModals==null||n.handleModals.qrCodeData==null?null:n.handleModals.qrCodeData.MemQrCode,Ke),g(2),P(" ",n.isLoading?"Submitting...":"Submit"," ")}}function EE(i,e){i&1&&(nt(0),u(1,"div",6),p(2,"No Qrcode available "),d(),it())}var p0=(()=>{let e=class e{constructor(t,r){this.httpRequest=t,this.handleModals=r,this.isLoading=!1}startQrCodeCheck(){this.qrCodeCheckInterval=setInterval(()=>{this.fetchQrCode()},1e3)}ngOnDestroy(){clearInterval(this.qrCodeCheckInterval)}ngOnInit(){this.startQrCodeCheck()}fetchQrCode(){this.handleModals.createMemoTab&&["edit_files","create_memo"].includes(this.handleModals.show)&&this.httpRequest.makeGetRequest("/memo/get_by_memuniqueid_that_is_not_used").subscribe(t=>{t.data[0]&&this.handleModals.setQrCodeData(t.data[0])},t=>{console.log(t)})}createQrCode(){if(!this.handleModals.memId){(0,el.default)({text:"please create a memo",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast(),this.isLoading=!1;return}this.isLoading=!0;let t={memId:this.handleModals.memId,memqrcodeId:this.handleModals.qrCodeData.MemUniqueId};this.httpRequest.makePatchRequest("/memo/update_memo_memuniqueid",t).subscribe(r=>{console.log(r),this.handleModals.qrCodeData=void 0,(0,el.default)({text:"success",duration:3e3,gravity:"top",position:"right",backgroundColor:"blue"}).showToast(),this.isLoading=!1},r=>{console.log(r),this.isLoading=!1,(0,el.default)({text:"invalid",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast()})}};e.\u0275fac=function(r){return new(r||e)(C(K),C(re))},e.\u0275cmp=A({type:e,selectors:[["app-createqrcode"]],standalone:!0,features:[V],decls:3,vars:2,consts:[[4,"ngIf"],[1,"form-group"],["for","qrInput"],["type","text","id","qrInput","disabled","",1,"form-control",3,"ngModelChange","ngModel"],["alt","Generated QR Code",3,"src"],["type","submit",1,"btn","btn-primary","btn-block","w-full","bg-blue-600","text-white","py-3","rounded-md","hover:bg-blue-700","my-3",3,"click"],[1,"text-center"]],template:function(r,o){r&1&&(u(0,"div"),M(1,SE,11,3,"ng-container",0)(2,EE,3,0,"ng-container",0),d()),r&2&&(g(),_("ngIf",o.handleModals==null?null:o.handleModals.qrCodeData),g(),_("ngIf",!(o.handleModals!=null&&o.handleModals.qrCodeData)))},dependencies:[ve,X,Y,Re,U,W]});let i=e;return i})();var ME=["fileInput"],kE=()=>["edit_files","create_memo"];function IE(i,e){if(i&1){let n=q();u(0,"div",4)(1,"div",5)(2,"div",6)(3,"h4"),p(4,"New user"),d(),u(5,"a",7),E("click",function(){D(n);let r=x();return N(r.close())}),y(6,"i",8),d()(),y(7,"app-newuser"),d()()}}function TE(i,e){if(i&1){let n=q();u(0,"div",4)(1,"div",5)(2,"div",6)(3,"h4"),p(4,"View User Details"),d(),u(5,"a",7),E("click",function(){D(n);let r=x();return N(r.close())}),y(6,"i",8),d()(),y(7,"app-userdetail"),d()()}}function DE(i,e){if(i&1){let n=q();u(0,"div",4)(1,"div",5)(2,"div",6)(3,"h4"),p(4,"Signature page"),d(),u(5,"a",7),E("click",function(){D(n);let r=x();return N(r.close())}),y(6,"i",8),d()(),y(7,"app-esignature"),d()()}}function NE(i,e){if(i&1){let n=q();u(0,"div",4)(1,"div",5)(2,"div",6)(3,"h4"),p(4,"Otp Confirmation"),d(),u(5,"a",7),E("click",function(){D(n);let r=x();return N(r.close())}),y(6,"i",8),d()(),y(7,"app-otpconfirmation"),d()()}}function OE(i,e){if(i&1){let n=q();u(0,"div",4)(1,"div",5)(2,"div",6)(3,"h4"),p(4,"View User Details"),d(),u(5,"a",7),E("click",function(){D(n);let r=x();return N(r.close())}),y(6,"i",8),d()(),y(7,"app-authentication"),d()()}}function RE(i,e){if(i&1){let n=q();u(0,"div",4)(1,"div",5)(2,"div",6)(3,"h4"),p(4,"Create Folder"),d(),u(5,"a",7),E("click",function(){D(n);let r=x();return N(r.close())}),y(6,"i",8),d()(),y(7,"app-createfolder"),d()()}}function AE(i,e){i&1&&(nt(0),u(1,"h4"),p(2,"Edit Memo"),d(),it())}function PE(i,e){i&1&&(u(0,"h4"),p(1,"New Memo"),d())}function FE(i,e){if(i&1&&(u(0,"option",51),p(1),d()),i&2){let n=e.$implicit;_("value",n.Id),g(),z(n.MemFoldName)}}function VE(i,e){if(i&1&&(nt(0),M(1,FE,2,2,"option",50),it()),i&2){let n=x(2);g(),_("ngForOf",n.selectedAllFolder)}}function LE(i,e){i&1&&(nt(0),y(1,"span",52),p(2," Loading... "),it())}function jE(i,e){if(i&1&&p(0),i&2){let n=x(2);P(" ",n.handleModals.show==="edit_files"?"Save Edit":"Save Draft"," ")}}function zE(i,e){i&1&&(u(0,"p"),p(1,"No attachments"),d())}function BE(i,e){if(i&1){let n=q();u(0,"a",55)(1,"div",56)(2,"figure",57)(3,"span",58),y(4,"i",59),d()()(),u(5,"div",60)(6,"p",61),p(7),d(),u(8,"span",62),p(9),d()(),u(10,"div")(11,"h5",63),p(12),d()(),u(13,"div")(14,"a",64),E("click",function(){D(n);let r=x(3);return N(r.deleteAttachment(1))}),y(15,"i",65),d()()()}if(i&2){let n=e.$implicit;g(7),z(n.name),g(2),z(n.type),g(3),z(n.size)}}function UE(i,e){if(i&1&&(u(0,"div")(1,"div",53),M(2,BE,16,3,"a",54),d()()),i&2){let n=x(2);g(2),_("ngForOf",n.memo_attachments)}}function qE(i,e){i&1&&y(0,"div")}function $E(i,e){if(i&1&&(u(0,"li",88)(1,"span",89),p(2),d()()),i&2){let n=e.$implicit;g(2),z(n)}}function HE(i,e){if(i&1){let n=q();u(0,"div",80)(1,"div",81)(2,"div",82)(3,"div",83)(4,"label",84),p(5,"Enter IP Address"),d(),y(6,"input",85),d(),u(7,"button",86),E("click",function(){D(n);let r=x(3);return N(r.addIP(r.memoForm.controls.ip_address.value))}),p(8,"Add IP Address"),d()(),u(9,"ul",87),M(10,$E,3,1,"li",76),d()()()}if(i&2){let n=x(3);g(6),_("ngModel",n.ip_address),g(4),_("ngForOf",n.allowed_ips)}}function GE(i,e){if(i&1){let n=q();u(0,"div"),y(1,"input",90),u(2,"button",91),E("click",function(){D(n);let r=x(3);return N(r.fetchAreaDetails())}),p(3," Get Location Details "),d()()}}function WE(i,e){i&1&&(u(0,"div"),p(1,"No location found for this area."),d())}function KE(i,e){if(i&1&&(u(0,"li",88)(1,"span",89),p(2),d()()),i&2){let n=e.$implicit;g(2),z(n)}}function JE(i,e){if(i&1&&(u(0,"div",21)(1,"p"),p(2),d(),u(3,"p"),p(4),d(),u(5,"p"),p(6),d(),u(7,"p"),p(8),d(),u(9,"p"),p(10),d()()),i&2){let n=e.$implicit;g(2),P("Id: ",n.Id,""),g(2),P("CreatedAt: ",n.CreatedAt,""),g(2),P("MemSecByIp: ",n.MemSecByIp,""),g(2),P("MemSecBySmsOTP: ",n.MemSecBySmsOTP,""),g(2),P("MemSecByEmailOTP: ",n.MemSecByEmailOTP,"")}}function QE(i,e){if(i&1&&(u(0,"div",80)(1,"div",81),M(2,JE,11,5,"div",92),u(3,"div")(4,"label",93),p(5,"New"),d(),y(6,"input",94),d(),u(7,"div",21)(8,"label",95),p(9,"Template Description"),d(),y(10,"textarea",96),d(),u(11,"button",97),p(12,"Save Template"),d()()()),i&2){let n=x(3);g(2),_("ngForOf",n.template)}}function XE(i,e){if(i&1){let n=q();u(0,"div")(1,"div")(2,"h6",66)(3,"span",67),p(4," Create custom security features "),d()(),u(5,"div",68)(6,"div")(7,"a",69),y(8,"i",70),p(9," Email OTP "),d()(),u(10,"div")(11,"div",32),y(12,"input",71),d()()(),u(13,"div",68)(14,"div")(15,"a",69),y(16,"i",70),p(17," SMS OTP "),d()(),u(18,"div")(19,"div",32),y(20,"input",72),d()()(),u(21,"div",68)(22,"div")(23,"a",69),y(24,"i",70),p(25," IP Address "),d()(),u(26,"div")(27,"div",32),y(28,"input",73),d()()(),M(29,HE,11,2,"div",74),u(30,"div",68)(31,"div")(32,"a",69),y(33,"i",70),p(34," Location Geofencing "),d()(),u(35,"div")(36,"div",32)(37,"input",75),E("change",function(r){D(n);let o=x(2);return N(o.onCheckboxChange(r))}),d()()()(),M(38,GE,4,0,"div",27)(39,WE,2,0,"div",27)(40,KE,3,1,"li",76),d(),u(41,"div",32),y(42,"input",77),u(43,"label",78),p(44,"Create as template"),d()(),M(45,QE,13,1,"div",74),u(46,"button",79),p(47),d()()}if(i&2){let n,t=x(2);g(29),_("ngIf",t.memoForm.controls.secureByIp.value),g(9),_("ngIf",t.memoForm.controls.secureByGeoLocation.value),g(),_("ngIf",!t.locationDetails&&((n=t.memoForm.get("areaName"))==null?null:n.value)),g(),_("ngForOf",t.area_location),g(5),_("ngIf",t.memoForm.controls.create_as_template.value),g(2),z(t.isLoading?"Loading.....":"Save")}}function YE(i,e){if(i&1&&(u(0,"div",98)(1,"button",79),p(2),d()()),i&2){let n=x(2);g(2),z(n.isLoading?"Loading.....":"Save")}}function ZE(i,e){if(i&1){let n=q();u(0,"div",98)(1,"button",37),E("click",function(){D(n);let r=x(2);return N(r.selectFile())}),y(2,"i",38),p(3," Upload Allowed Users"),d(),u(4,"input",39,2),E("change",function(r){D(n);let o=x(2);return N(o.handleChangeEvent(r))}),d(),u(6,"div",99)(7,"div",21)(8,"label",100),p(9,"Name"),d(),y(10,"input",101),d(),u(11,"div",21)(12,"label",102),p(13,"Email"),d(),y(14,"input",103),d(),u(15,"div",21)(16,"label",104),p(17,"Phone"),d(),y(18,"input",105),d()(),u(19,"button",79),p(20),d()()}if(i&2){let n=x(2);g(20),z(n.isLoading?"Loading.....":"Save")}}function eM(i,e){if(i&1){let n=q();u(0,"div",4)(1,"div",5)(2,"div",6),M(3,AE,3,0,"ng-container",9)(4,PE,2,0,"ng-template",null,0,vl),u(6,"a",7),E("click",function(){D(n);let r=x();return N(r.close())}),y(7,"i",8),d()(),u(8,"div",10)(9,"ul",11)(10,"li",12)(11,"a",13),E("click",function(){D(n);let r=x();return N(r.handle())}),p(12,"Content"),d()(),u(13,"li",12)(14,"a",14),E("click",function(){D(n);let r=x();return N(r.handle())}),p(15,"Attachments"),d()(),u(16,"li",12)(17,"a",15),E("click",function(){D(n);let r=x();return N(r.handle())}),p(18,"Security"),d()(),u(19,"li",12)(20,"a",16),E("click",function(){D(n);let r=x();return N(r.handle())}),p(21,"Sharing"),d()(),u(22,"li",12)(23,"a",17),E("click",function(){D(n);let r=x();return N(r.handle("hello"))}),p(24,"QR Code"),d()()(),u(25,"div",18)(26,"div",19)(27,"form",20),E("ngSubmit",function(){D(n);let r=x();return N(r.draftMemo())}),u(28,"div",21)(29,"label",22),p(30,"Title"),d(),y(31,"input",23),d(),u(32,"div",21)(33,"label",24),p(34,"Folder"),d(),u(35,"select",25)(36,"option",26),p(37,"Select a folder"),d(),M(38,VE,2,1,"ng-container",27),d()(),u(39,"div",21)(40,"label",28),p(41,"Memo"),d(),u(42,"div",29),y(43,"ngx-editor-menu",30)(44,"ngx-editor",31),d()(),u(45,"div",32),y(46,"input",33),u(47,"label",34),p(48,"Include Signature"),d()(),u(49,"button",35),M(50,LE,3,0,"ng-container",9)(51,jE,1,1,"ng-template",null,1,vl),d()()(),u(53,"div",36),M(54,zE,2,0,"p",27),u(55,"button",37),E("click",function(){D(n);let r=x();return N(r.chooseFile())}),y(56,"i",38),p(57," Upload Attachment"),d(),u(58,"input",39,2),E("change",function(r){D(n);let o=x();return N(o.fileChangeEvent(r))}),d(),M(60,UE,3,1,"div",27),d(),u(61,"div",40)(62,"form",20),E("ngSubmit",function(){D(n);let r=x();return N(r.onsubmit())}),u(63,"div",21)(64,"select",41),E("change",function(){D(n);let r=x();return N(r.changeSecurityType())}),y(65,"option"),u(66,"option",42),p(67,"Select from Templates"),d(),u(68,"option",43),p(69,"Create Custom"),d()()(),M(70,qE,1,0,"div",27)(71,XE,48,6,"div",27),d()(),u(72,"div",44)(73,"form",20),E("ngSubmit",function(){D(n);let r=x();return N(r.createMemo(r.memoForm.value))}),u(74,"div",21)(75,"label",24),p(76,"Select Access Type"),d(),u(77,"select",45),y(78,"option"),u(79,"option",46),p(80,"Public"),d(),u(81,"option",47),p(82,"Restricted"),d()()(),M(83,YE,3,1,"div",48)(84,ZE,21,1,"div",48),d()(),u(85,"div",49),y(86,"app-createqrcode"),d()()()()()}if(i&2){let n=ss(5),t=ss(52),r=x();g(3),_("ngIf",r.handleModals.show==="edit_files")("ngIfElse",n),g(24),_("formGroup",r.memoForm),g(11),_("ngIf",r.selectedAllFolder&&r.selectedAllFolder.length>0),g(5),_("editor",r.editor),g(),_("editor",r.editor)("disabled",!1)("placeholder","Type here..."),g(5),_("disabled",r.isLoading),g(),_("ngIf",r.isLoading)("ngIfElse",t),g(4),_("ngIf",r.memo_attachments.length==0),g(6),_("ngIf",r.memo_attachments.length>0),g(2),_("formGroup",r.memoForm),g(8),_("ngIf",r.memoForm.controls.security_type.value=="template"),g(),_("ngIf",r.memoForm.controls.security_type.value=="custom"),g(2),_("formGroup",r.memoForm),g(10),_("ngIf",r.memoForm.controls.access.value=="public"),g(),_("ngIf",r.memoForm.controls.access.value=="restricted")}}var f0=(()=>{let e=class e{constructor(t,r,o){this.handleModals=t,this.httpRequest=r,this.fb=o,this.allowed_ips=[],this.ip_address="",this.location=null,this.ipAddress="",this.areaName="",this.locationDetails={},this.area_location=[],this.template=[],this.selectedAllFolder=[],this.isLoading=!1,this.showSubmitButton=!1,this.memo_attachments=[{name:"Sample",size:"20",type:"Images"}],this.memoForm=new Et({title:new se("",ge.required),memo:new se("",ge.required),include_signature:new se(!1),security_type:new se(""),secureByEmailOtp:new se(!1),secureBySmsOtp:new se(!1),secureByIp:new se(!1),secureByGeoLocation:new se(!1),areaName:new se(""),ip_address:new se(""),create_as_template:new se(!1),access:new se(""),public:new se(""),name:new se(""),email:new se(""),phone:new se("")})}handle(t=void 0){this.handleModals.setCreateMemoTabs(t)}ngOnInit(){this.editor=new Ja,this.fetchFolders()}ngDoCheck(){if(this.handleModals.show=="edit_files"&&this.handleModals.check=="nothing"){let t=this.handleModals.show=="edit_files";this.memoForm.setValue({title:t?this.handleModals?.editMemo?.MemTitle:"",memo:t?this.handleModals?.editMemo?.MemContents:"",include_signature:!1,security_type:!1,secureByEmailOtp:!1,secureBySmsOtp:!1,secureByIp:!1,secureByGeoLocation:!1,areaName:"",ip_address:"",create_as_template:!1,access:"",name:"",email:"",phone:""}),this.handleModals.toggleCheck("hello")}}ngOnDestroy(){this.editor.destroy(),this.qrCodeCheckInterval&&clearInterval(this.qrCodeCheckInterval)}isValidIP(t){return/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/.test(t)}dmsToDecimal(t){let r=t.split(/°|'|"| /).filter(h=>h),o=parseFloat(r[0]),s=parseFloat(r[1])/60,a=parseFloat(r[2])/3600,l=r[3],c=o+s+a;return(l==="S"||l==="W")&&(c*=-1),c}isValidAreaName(t){return/^[a-zA-Z\s]+$/.test(t)}isValidAreaNameWithState(t){return/^[a-zA-Z\s]+(?:,\s*[a-zA-Z\s]+)?$/.test(t)}close(){this.handleModals.showMother("undefined"),this.handleModals.toggleCheck("nothing"),this.memoForm.reset()}draftMemo(){if(this.memoForm.valid){this.isLoading=!0;let t=this.memoForm.value;if(console.log(t),this.handleModals.show==="edit_files"){let r={title:this.handleModals?.editMemo?.MemTitle||this.memoForm.value.title,memo:this.memoForm.value.memo,memId:this.handleModals?.editMemo?.MemUniqueId||this.memoForm.value.MemUniqueId,memFold:this.handleModals?.editMemo?.MemFoldId||this.memoForm.value.MemFoldId||null};console.log(r),this.httpRequest.makePatchRequest("/memo/update",r).subscribe(o=>{console.log(o),this.isLoading=!1,this.memoForm.reset(),(0,we.default)({text:"Memo updated successfully",duration:3e3,gravity:"top",position:"right",backgroundColor:"blue"}).showToast()},o=>{console.error("Error updating memo:",o),this.isLoading=!1,(0,we.default)({text:`${o}`,duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast()})}else this.httpRequest.makePostRequest("/memo/create",t).subscribe(r=>{console.log(r),this.isLoading=!1,this.memId=r.id,this.handleModals.setMemId(r.id),(0,we.default)({text:"Memo created successfully",duration:3e3,gravity:"top",position:"right",backgroundColor:"green"}).showToast()},r=>{console.error("Error saving draft:",r),this.isLoading=!1,(0,we.default)({text:`${r}`,duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast()})}else console.error("Form is not valid!"),this.isLoading=!1,(0,we.default)({text:"Form is not valid",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast()}addIP(t){if(!t||!this.isValidIP(t)){(0,we.default)({text:"Please enter a valid IP address.",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast();return}this.allowed_ips.includes(t)?(0,we.default)({text:"IP address already exists.",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast():(this.allowed_ips.push(t),(0,we.default)({text:"IP address added successfully.",duration:3e3,gravity:"top",position:"right",backgroundColor:"blue"}).showToast()),this.memoForm.get("ip_address")?.reset()}onsubmit(){if(this.isLoading=!1,!this.memId){(0,we.default)({text:"please create a memo",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast();return}this.isLoading=!0;let t=H(k({},this.memoForm.value),{ipData:this.allowed_ips,geolocationData:Object.values(this.locationDetails),memId:this.memId,new:this.area_location});console.log(t),this.httpRequest.makePostRequest("/memo/mem_secure_rule/create",t).subscribe(r=>{console.log(r),this.isLoading=!1,(0,we.default)({text:"success",duration:3e3,gravity:"top",position:"right",backgroundColor:"blue"}).showToast()},r=>{console.log(r.error.message),this.isLoading=!1,(0,we.default)({text:"something went wrong",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast()})}onCheckboxChange(t){}fetchAreaDetails(){if(this.areaName=this.memoForm.get("areaName")?.value,!this.areaName){(0,we.default)({text:"Please fill in the area name.",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast();return}if(this.area_location.includes(this.areaName)){(0,we.default)({text:"Area address already exists.",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast();return}if(!this.isValidAreaName(this.areaName)){(0,we.default)({text:"Invalid area name.",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast();return}this.area_location.push(this.areaName),console.log("Area Name:",this.areaName),this.httpRequest.fetchAreaDetails(this.areaName).subscribe(t=>{if(console.log(t),t.results&&t.results.length>0){let r=t.results[0].annotations.DMS;(0,we.default)({text:"Location fetched successfully.",duration:3e3,gravity:"top",position:"right",backgroundColor:"blue"}).showToast(),this.locationDetails[this.areaName]={Lat:this.dmsToDecimal(r.lat).toFixed(6),Lng:this.dmsToDecimal(r.lng).toFixed(6)},console.log(this.locationDetails)}else(0,we.default)({text:"No location data available for this area.",duration:5e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast()},t=>{console.error(t),(0,we.default)({text:`Error fetching location: ${t.message||t}`,duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast()}),this.memoForm.get("areaName")?.reset()}createMemo(t){if(this.isLoading=!1,!this.memId){(0,we.default)({text:"please create a memo",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast();return}this.isLoading=!0;let r={access:t.access,memId:this.memId,users:[{phone:t.phone,email:t.email}]};console.log(r),this.httpRequest.makePostRequest("/memo/access_type/create",r).subscribe(o=>{console.log(o),this.isLoading=!1,(0,we.default)({text:"success",duration:3e3,gravity:"top",position:"right",backgroundColor:"blue"}).showToast()},o=>{console.log(o),(0,we.default)({text:"Error saving memo",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast()})}getMemoAttachments(){this.httpRequest.makeGetRequest(`/memo/memo_attachment?${this.memId}`).subscribe(t=>{console.log(t)},t=>{console.log(t)})}deleteAttachment(t){confirm("Are you sure you want to delete this attachment?")&&this.httpRequest.makeDeleteRequest(`/memo/memo_attachment?id=${this.memId}`).subscribe(r=>{console.log("Attachment deleted successfully",r),this.getMemoAttachments()},r=>{console.error("Error deleting attachment",r)})}chooseFile(){this.fileInput.nativeElement.click()}fileChangeEvent(t){let r=new FormData,o=t.target.files[0];o?(console.log(o),r.append("image",o,o.name),this.httpRequest.makePostRequest("/memo/upload_image",r,!0).subscribe(s=>{console.log(s)},s=>{console.log(s)})):console.warn("No file selected.")}changeSecurityType(){event.target.value==="template"&&this.saveTemplate()}saveTemplate(){this.httpRequest.makeGetRequest("/memo/mem_secure_rule/all").subscribe(t=>{console.log(t.data),this.template=t.data})}fetchFolders(){this.httpRequest.makeGetRequest("/dashboard/folder/all").subscribe(t=>{this.selectedAllFolder=t.data},t=>{console.error("Error fetching folders:",t)})}selectFile(){this.fileInput.nativeElement.click()}handleChangeEvent(t){let r=new FormData,o=t.target.files[0];o?(console.log(o),r.append("image",o,o.name),this.httpRequest.makePostRequest("/memo/access_type/create",r,!0).subscribe(s=>{console.log(s)},s=>{console.log(s)})):console.warn("No file selected.")}};e.\u0275fac=function(r){return new(r||e)(C(re),C(K),C(Je))},e.\u0275cmp=A({type:e,selectors:[["app-sidebarforms"]],viewQuery:function(r,o){if(r&1&&Nr(ME,5),r&2){let s;Bi(s=Ui())&&(o.fileInput=s.first)}},standalone:!0,features:[V],decls:8,vars:8,consts:[["newMemo",""],["buttonText",""],["fileInput",""],["class","sidebar-group-forms d-print-none",4,"ngIf"],[1,"sidebar-group-forms","d-print-none"],["id","storage",1,"sidebar","primary-sidebar","show"],[1,"sidebar-header"],["href","javascript:;",1,"btn","btn-light","btn-floating","sidebar-close-btn",3,"click"],[1,"ti-angle-right"],[4,"ngIf","ngIfElse"],[1,"sidebar-content"],["role","tablist",1,"nav","nav-tabs","mb-3"],[1,"nav-item"],["id","home-tab","data-toggle","tab","href","#home","role","tab","aria-controls","home","aria-selected","true",1,"nav-link","active",3,"click"],["id","profile-tab","data-toggle","tab","href","#profile","role","tab","aria-controls","profile","aria-selected","false",1,"nav-link",3,"click"],["id","contact-tab","data-toggle","tab","href","#contact","role","tab","aria-controls","contact","aria-selected","false",1,"nav-link",3,"click"],["id","sharing-tab","data-toggle","tab","href","#sharing","role","tab","aria-controls","sharing","aria-selected","false",1,"nav-link",3,"click"],["id","qrcode-tab","data-toggle","tab","href","#qrcode","role","tab","aria-controls","qrcode","aria-selected","false",1,"nav-link",3,"click"],[1,"tab-content"],["id","home","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","exampleInputEmail1"],["type","text","formControlName","title","id","title","name","title","aria-describedby","emailHelp","placeholder","",1,"form-control"],["for","exampleFormControlSelect1"],["formControlName","security_type","id","exampleFormControlSelect1",1,"form-control"],["value",""],[4,"ngIf"],["for","exampleFormControlTextarea1"],[1,"NgxEditor__Wrapper"],[3,"editor"],["formControlName","memo",3,"editor","disabled","placeholder"],[1,"form-group","form-check"],["type","checkbox","name","include_signature","formControlName","include_signature","id","include_signature",1,"form-check-input"],["for","exampleCheck1",1,"form-check-label"],["type","submit",1,"btn","btn-primary",3,"disabled"],["id","profile","role","tabpanel","aria-labelledby","profile-tab",1,"tab-pane","fade"],[1,"btn","btn-lg","btn-block","btn-outline-primary",3,"click"],[1,"fa","fa-cloud-upload","mr-3"],["type","file","id","input-file","name","input-file","hidden","",3,"change"],["id","contact","role","tabpanel","aria-labelledby","contact-tab",1,"tab-pane","fade"],["name","security_type","formControlName","security_type","id","exampleFormControlSelect1",1,"form-control",3,"change"],["value","template"],["value","custom"],["id","sharing","role","tabpanel","aria-labelledby","sharing-tab",1,"tab-pane","fade"],["name","access","formControlName","access","id","access",1,"form-control"],["value","public"],["value","restricted"],["style","margin: 16px 0px;",4,"ngIf"],["id","qrcode","role","tabpanel","aria-labelledby","qrcode",1,"tab-pane","fade"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"list-group","list-group-flush","mb-3"],["href","javascript:;","class","list-group-item px-0 d-flex align-items-center",4,"ngFor","ngForOf"],["href","javascript:;",1,"list-group-item","px-0","d-flex","align-items-center"],[1,"mr-3"],[1,"avatar"],[1,"avatar-title","bg-primary-bright","text-primary","rounded"],[1,"ti-image"],[1,"flex-grow-1"],[1,"mb-0"],[1,"small","text-muted"],[1,"text-primary"],["href","javascript:;",1,"btn","btn-floating",3,"click"],[1,"ti-trash"],[1,"d-md-flex","justify-content-between","mb-3"],[1,"d-block"],[1,"card","card-body","mb-3","d-flex","justify-content-between","flex-row"],["href","#"],[1,"fa","fa-lock","mr-2"],["type","checkbox","name","secureByEmailOtp","formControlName","secureByEmailOtp","id","exampleCheck1",1,"form-check-input"],["type","checkbox","name","secureBySmsOtp","formControlName","secureBySmsOtp","id","exampleCheck1",1,"form-check-input"],["type","checkbox","name","secureByIp","formControlName","secureByIp","id","exampleCheck1",1,"form-check-input"],["class","card",4,"ngIf"],["type","checkbox","name","secureByGeoLocation","formControlName","secureByGeoLocation","id","exampleCheck1",1,"form-check-input",3,"change"],["class","list-inline-item",4,"ngFor","ngForOf"],["type","checkbox","name","create_as_template","formControlName","create_as_template","id","create_as_template",1,"form-check-input"],["for","create_as_template",1,"form-check-label"],["type","submit",1,"btn","btn-primary","btn-block","w-full","bg-blue-600","text-white","py-3","rounded-md","hover:bg-blue-700","my-3"],[1,"card"],[1,"card-body"],[1,"form-inline"],[1,"form-group","mb-2"],["for","ip_address",1,"sr-only"],["type","text","id","ip_address","name","ip_address","value","ip_address","formControlName","ip_address",1,"border","border-dark","rounded","form-control-plaintext",3,"ngModel"],["type","button",1,"btn","btn-primary","mb-2",3,"click"],[1,"list-inline"],[1,"list-inline-item"],[1,"badge","border","bg-success-bright","text-success"],["type","text","formControlName","areaName","placeholder","Enter Area Name",1,"form-control"],["type","button",1,"btn","btn-primary","mb-2","my-3",3,"click"],["class","form-group",4,"ngFor","ngForOf"],["for",""],["type","text","formControlName","templateName","id","templateName","placeholder","Enter Template Name",1,"form-control"],["for","templateDescription"],["formControlName","templateDescription","id","templateDescription","placeholder","Enter Template Description",1,"form-control"],["type","button",1,"btn","btn-primary"],[2,"margin","16px 0px"],[1,"card","border-0",2,"margin","16px 0px"],["for","users_name"],["type","text","formControlName","name","id","users_name","placeholder","Enter name",1,"form-control"],["for","users_email"],["type","email","formControlName","email","id","users_email","placeholder","Enter email",1,"form-control"],["for","phone"],["type","text","formControlName","phone","id","users_phone","placeholder","Enter phone number",1,"form-control"]],template:function(r,o){r&1&&(u(0,"div"),M(1,IE,8,0,"div",3)(2,TE,8,0,"div",3)(3,DE,8,0,"div",3)(4,NE,8,0,"div",3)(5,OE,8,0,"div",3)(6,RE,8,0,"div",3)(7,eM,87,19,"div",3),d()),r&2&&(g(),_("ngIf",o.handleModals.show=="new_user"),g(),_("ngIf",o.handleModals.show=="forms"),g(),_("ngIf",o.handleModals.show=="esignature"),g(),_("ngIf",o.handleModals.show=="otp"),g(),_("ngIf",o.handleModals.show=="authentication"),g(),_("ngIf",o.handleModals.show=="create_folder"),g(),_("ngIf",Fe(7,kE).includes(o.handleModals.show)))},dependencies:[U,Se,W,oe,le,jn,zn,X,bo,Ln,Y,ae,Me,ke,ve,o0,t0,r0,Ya,l0,c0,d0,u0,h0,p0]});let i=e;return i})();var m0=(()=>{let e=class e{constructor(){this.prop=!1,this.handleClick=t=>{this.prop=!this.prop}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=A({type:e,selectors:[["app-dashboard"]],standalone:!0,features:[V],decls:4,vars:0,consts:[[1,"layout-wrapper"],[3,"dataEmitter"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"app-header",1),E("dataEmitter",function(a){return o.handleClick(a)}),d(),y(2,"router-outlet")(3,"app-sidebarforms"),d())},dependencies:[kp,co,Hs,f0]});let i=e;return i})();var tM=()=>["/portal/dashboard"],nM=()=>["/portal/files"],iM=()=>["/portal/activities"],rM=()=>["/portal/users"],oM=()=>["/portal/settings"],rn=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=A({type:e,selectors:[["app-navigation"]],standalone:!0,features:[V],decls:34,vars:10,consts:[[1,"navigation"],[1,"logo"],["href","index.html"],["src","../../assets/media/image/logo.png","alt","logo"],[3,"routerLink"],[1,"nav-link-icon","ti-pie-chart"],[1,"nav-link-label"],[1,"badge","badge-danger","badge-small"],[1,"nav-link-icon","ti-file"],[1,"nav-link-icon","ti-pulse"],[1,"badge","badge-warning"],[1,"nav-link-icon","ti-user"],[1,"nav-link-icon","ti-settings"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"div",1)(2,"a",2),y(3,"img",3),d()(),u(4,"ul")(5,"li")(6,"a",4),y(7,"i",5),u(8,"span",6),p(9,"Dashboard"),d(),u(10,"span",7),p(11,"2"),d()()(),u(12,"li")(13,"a",4),y(14,"i",8),u(15,"span",6),p(16,"Files"),d()()(),u(17,"li")(18,"a",4),y(19,"i",9),u(20,"span",6),p(21,"Activities"),d(),u(22,"span",10),p(23,"New"),d()()(),u(24,"li")(25,"a",4),y(26,"i",11),u(27,"span",6),p(28,"Users"),d()()(),u(29,"li")(30,"a",4),y(31,"i",12),u(32,"span",6),p(33,"Settings"),d()()()()()),r&2&&(g(6),_("routerLink",Fe(5,tM)),g(7),_("routerLink",Fe(6,nM)),g(5),_("routerLink",Fe(7,iM)),g(7),_("routerLink",Fe(8,rM)),g(5),_("routerLink",Fe(9,oM)))},dependencies:[An]});let i=e;return i})();function sM(i,e){i&1&&(u(0,"div",39)(1,"div",3),y(2,"div",40),d()())}function aM(i,e){if(i&1&&(u(0,"div")(1,"div",43)(2,"a",44)(3,"div",45)(4,"figure",46)(5,"span",47),y(6,"i",48),d()()(),u(7,"div",49)(8,"p",50),p(9),d(),u(10,"span",51),p(11),d()(),y(12,"div"),d()()()),i&2){let n=e.$implicit;g(9),z(n==null?null:n.MemFoldName),g(2),P("",n==null?null:n.total_file," Files")}}function lM(i,e){if(i&1&&(u(0,"div",12),y(1,"div",41),M(2,aM,13,2,"div",42),d()),i&2){let n=x();g(2),_("ngForOf",n.folder)}}var on=(()=>{let e=class e{constructor(t,r){this.HttpRequest=t,this.handleModal=r,this.folder=[],this.isLoading=!0}ngOnInit(){this.HttpRequest?.makeGetRequest("/dashboard/folder/all").subscribe(t=>{this.folder=t.data,this.isLoading=!1},t=>{this.isLoading=!1})}openModal(){this.handleModal.showMother("create_memo")}};e.\u0275fac=function(r){return new(r||e)(C(K),C(re))},e.\u0275cmp=A({type:e,selectors:[["app-sidebar"]],standalone:!0,features:[V],decls:94,vars:2,consts:[[1,"sidebar-group","d-print-none"],["id","storage",1,"sidebar","primary-sidebar","show"],[1,"sidebar-header"],[1,"text-center"],["class","spinner-container",4,"ngIf"],["class","sidebar-content",4,"ngIf"],[1,"sidebar-footer"],[1,"btn","btn-lg","btn-block","btn-outline-primary",3,"click"],[1,"fa","fa-cloud-upload","mr-3"],["id","view-detail",1,"sidebar"],["href","#",1,"btn","btn-light","btn-floating","sidebar-close-btn"],[1,"ti-angle-right"],[1,"sidebar-content"],[1,"avatar","mb-4"],[1,"avatar-title","bg-info-bright","text-info","rounded-pill"],[1,"ti-file"],[1,"row","mb-3"],[1,"col-md-5"],[1,"col-md-7"],["href","#",1,"link-1"],[1,"col-md-7","text-success"],[1,"btn","btn-lg","btn-block","btn-primary"],[1,"ti-share","mr-3"],["id","settings",1,"sidebar"],[1,"list-group","list-group-flush"],[1,"list-group-item","pl-0","pr-0"],[1,"custom-control","custom-switch"],["type","checkbox","id","customSwitch1","checked","",1,"custom-control-input"],["for","customSwitch1",1,"custom-control-label"],["type","checkbox","id","customSwitch2",1,"custom-control-input"],["for","customSwitch2",1,"custom-control-label"],["type","checkbox","id","customSwitch3","checked","",1,"custom-control-input"],["for","customSwitch3",1,"custom-control-label"],["type","checkbox","id","customSwitch4","checked","",1,"custom-control-input"],["for","customSwitch4",1,"custom-control-label"],["type","checkbox","id","customSwitch5",1,"custom-control-input"],["for","customSwitch5",1,"custom-control-label"],["type","checkbox","id","customSwitch6",1,"custom-control-input"],["for","customSwitch6",1,"custom-control-label"],[1,"spinner-container"],[1,"spinner"],["id","justgage_five",1,"mb-3"],[4,"ngFor","ngForOf"],[1,"list-group","list-group-flush","mb-3"],["href","#",1,"list-group-item","px-0","d-flex","align-items-center"],[1,"mr-3"],[1,"avatar"],[1,"avatar-title","bg-primary-bright","text-primary","rounded"],[1,"ti-image"],[1,"flex-grow-1"],[1,"mb-0"],[1,"small","text-muted"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),p(4,"Folders"),d()(),M(5,sM,3,0,"div",4)(6,lM,3,1,"div",5),u(7,"div",6)(8,"button",7),E("click",function(){return o.openModal()}),y(9,"i",8),p(10," Create a Memo "),d()()(),u(11,"div",9)(12,"div",2)(13,"h4"),p(14,"View Detail"),d(),u(15,"a",10),y(16,"i",11),d()(),u(17,"div",12)(18,"figure",13)(19,"span",14),y(20,"i",15),d()(),u(21,"div",16)(22,"div",17),p(23,"File name:"),d(),u(24,"div",18)(25,"a",19),p(26,"Meeting-notes.doc"),d()()(),u(27,"div",16)(28,"div",17),p(29,"File type:"),d(),u(30,"div",18),p(31,"Word File"),d()(),u(32,"div",16)(33,"div",17),p(34,"File size:"),d(),u(35,"div",18),p(36,"22 KB"),d()(),u(37,"div",16)(38,"div",17),p(39,"Created:"),d(),u(40,"div",18),p(41,"Monday, July 02, 2020 9:34am"),d()(),u(42,"div",16)(43,"div",17),p(44,"Modified:"),d(),u(45,"div",20),p(46,"Monday, July 02, 2020 9:34am"),d()(),u(47,"div",16)(48,"div",17),p(49,"Accessed:"),d(),u(50,"div",18),p(51,"Monday, July 03, 2020 10:22am"),d()()(),u(52,"div",6)(53,"button",21),y(54,"i",22),p(55," Share "),d()()(),u(56,"div",23)(57,"div",2)(58,"h4"),p(59,"Settings"),d(),u(60,"a",10),y(61,"i",11),d()(),u(62,"div",12)(63,"ul",24)(64,"li",25)(65,"div",26),y(66,"input",27),u(67,"label",28),p(68,"Allow notifications."),d()()(),u(69,"li",25)(70,"div",26),y(71,"input",29),u(72,"label",30),p(73,"Hide user requests"),d()()(),u(74,"li",25)(75,"div",26),y(76,"input",31),u(77,"label",32),p(78,"Speed up demands"),d()()(),u(79,"li",25)(80,"div",26),y(81,"input",33),u(82,"label",34),p(83,"Hide menus"),d()()(),u(84,"li",25)(85,"div",26),y(86,"input",35),u(87,"label",36),p(88,"Remember next visits"),d()()(),u(89,"li",25)(90,"div",26),y(91,"input",37),u(92,"label",38),p(93,"Enable report generation."),d()()()()()()()),r&2&&(g(5),_("ngIf",o.isLoading),g(),_("ngIf",!o.isLoading))},dependencies:[U,Se,W],styles:[".spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid rgba(0,0,0,.1);border-top-color:#3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]});let i=e;return i})();var g0=tt(et());var eu=()=>["/portal/files"];function cM(i,e){i&1&&(u(0,"div",29),y(1,"div",30),d())}function dM(i,e){if(i&1&&(u(0,"div",32)(1,"div",8)(2,"div",33)(3,"div",34)(4,"div"),y(5,"i",35),d(),y(6,"div"),d(),u(7,"div",36)(8,"h5"),p(9),d(),u(10,"div",37)(11,"a",38),y(12,"i",39),d(),u(13,"div",40)(14,"a",41),p(15,"Pending...."),d()()()(),u(16,"p",42),p(17),d()()()()),i&2){let n=e.$implicit;g(9),z(n.MemFoldName),g(8),P("",n.total_file," Files")}}function uM(i,e){if(i&1&&(u(0,"div",4),M(1,dM,18,2,"div",31),d()),i&2){let n=x();g(),_("ngForOf",n.data)}}function hM(i,e){i&1&&(u(0,"div",29),y(1,"div",30),d())}function pM(i,e){if(i&1){let n=q();u(0,"tbody")(1,"tr")(2,"td")(3,"a",46)(4,"figure",47)(5,"span",48),y(6,"i",49),d()(),p(7),d()(),u(8,"td"),p(9),d(),u(10,"td"),p(11),d(),u(12,"td",50)(13,"div",37)(14,"a",38),y(15,"i",39),d(),u(16,"div",40)(17,"span",51),E("click",function(){let r=D(n).$implicit,o=x(2);return N(o.editFiles(r==null?null:r.MemUniqueId))}),p(18,"Edit"),d(),u(19,"span",52),E("click",function(){let r=D(n).$implicit,o=x(2);return N(o.publish(r.Id))}),p(20),d()()()()()()}if(i&2){let n=e.$implicit,t=x(2);g(7),P(" ",n.MemTitle," "),g(2),z(t.format(n==null?null:n.CreatedAt)),g(2),P(" ",n==null||n.MemFold==null?null:n.MemFold.MemFoldName," "),g(9),P(" ",n.isPublished?"UnPublish":"Publish","")}}function fM(i,e){if(i&1&&(u(0,"div",43)(1,"table",44)(2,"thead")(3,"tr")(4,"th"),p(5,"Name"),d(),u(6,"th"),p(7,"Date Created"),d(),u(8,"th"),p(9,"Folder Name"),d(),u(10,"th"),p(11,"Action"),d()()(),M(12,pM,21,4,"tbody",45),d()()),i&2){let n=x();g(12),_("ngForOf",n.recentFiles)}}function mM(i,e){i&1&&(u(0,"div",29),y(1,"div",30),d())}function gM(i,e){if(i&1&&(u(0,"div",57)(1,"div")(2,"figure",58),y(3,"img",59),d()(),u(4,"div")(5,"h6",60)(6,"span",61)(7,"a",62)(8,"p"),p(9),d()()()(),y(10,"a",46),d()()),i&2){let n=e.$implicit,t=x(2);g(9),as("",n==null?null:n.ViewEmail," from ",n==null?null:n.ViewLoc," viewed this memo on ",t.format(n==null?null:n.CreatedAt)," at approximately ",t.formatTime(n==null?null:n.CreatedAt),".")}}function vM(i,e){if(i&1&&(u(0,"div",53)(1,"div",54)(2,"div",55),M(3,gM,11,4,"div",56),d()()()),i&2){let n=x();g(3),_("ngForOf",n.activities)}}var v0=(()=>{let e=class e{toggleSidebar(){this.sidebarVisible=!this.sidebarVisible}constructor(t,r,o,s){this.httpRequest=t,this.handleModal=r,this.userData=o,this.router=s,this.data=[],this.monthOnMonthGraph=[],this.recentFiles=[],this.isLoading=!0,this.sidebarVisible=!1,this.format=a=>{let l=new Date(a),c=l.getFullYear(),h=String(l.getMonth()+1).padStart(2,"0"),f=String(l.getDate()).padStart(2,"0");return`${c}-${h}-${f}`}}ngOnInit(){this.isLoading=!0,this.httpRequest.makeGetRequest("/memo/memo_activities").subscribe(t=>{this.activities=t.data,this.isLoading=!1},t=>{console.log(t),this.isLoading=!1,t.error.message&&((0,g0.default)({text:"Token Expired!",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast(),localStorage.removeItem("token"),this.router.navigate(["/"]))}),this.httpRequest?.makeGetRequest("/dashboard/folder/recent").subscribe(t=>{this.data=t.data,this.isLoading=!1},t=>{this.isLoading=!1}),this.httpRequest?.makeGetRequest("/dashboard/month_on_month_graph?year=2024").subscribe(t=>{this.monthOnMonthGraph=t.data,this.isLoading=!1},t=>{console.log("Error fetching data",t),this.isLoading=!1}),this.httpRequest?.makeGetRequest("/dashboard/files/recent").subscribe(t=>{this.recentFiles=t.data,this.isLoading=!1},t=>{console.log("Error fetching data",t),this.isLoading=!1})}openModal(){this.handleModal.showMother("create_memo"),this.handleModal.toggleCheck("hello")}viewFiles(t){this.httpRequest?.makeGetRequest("/memo/single?id="+t.MemUniqueId).subscribe(r=>{this.handleModal.showMother("forms"),this.userData.setUserData(r.data)})}editFiles(t){this.httpRequest?.makeGetRequest("/memo/single?id="+t).subscribe(r=>{this.handleModal.setEditMemo(r.data),this.handleModal.showMother("edit_files")},r=>{console.log("Error fetching data",r),this.isLoading=!1})}formatTime(t){let r=new Date(t),o=String(r.getHours()).padStart(2,"0"),s=String(r.getMinutes()).padStart(2,"0"),a=String(r.getSeconds()).padStart(2,"0");return`${o}:${s}:${a}`}publish(t){console.log(t),this.handleModal.showMother("otp"),this.handleModal.setPublishMemId(t)}};e.\u0275fac=function(r){return new(r||e)(C(K),C(re),C(re),C(me))},e.\u0275cmp=A({type:e,selectors:[["app-dashboard"]],standalone:!0,features:[V],decls:58,vars:12,consts:[[1,"content-wrapper"],[1,"content-body"],[1,"content"],[1,"card","bg-primary-bright","border-0"],[1,"row"],[1,"col-md-8"],["id","daily-usage"],[1,"col-md-4"],[1,"card"],[1,"card-body","text-center"],[1,"row","mb-4"],[1,"col-md-8","offset-md-2"],["src","../../assets/media/svg/report.svg","alt","report",1,"img-fluid"],[1,"my-3"],[1,"text-muted"],[1,"btn","btn-outline-primary","btn-lg2",3,"click"],[1,"content-title","d-flex","justify-content-between"],[3,"routerLink"],["class","spinner-container",4,"ngIf"],["class","row",4,"ngIf"],[1,"col-md-2","text-center"],[1,"card","mb-3"],[1,"card-body","cursor-pointer"],[1,"avatar","avatar-lg",3,"click"],[1,"avatar-title","rounded-pill"],[1,"ti-plus"],[1,"mb-4"],["class","table-responsive",4,"ngIf"],["class","row mb-5",4,"ngIf"],[1,"spinner-container"],[1,"spinner"],["class","col-md-3",4,"ngFor","ngForOf"],[1,"col-md-3"],[1,"card-body"],[1,"d-flex","justify-content-between","mb-4"],[1,"font-size-22","ti-folder"],[1,"d-flex","justify-content-between"],[1,"dropdown"],["href","#","data-toggle","dropdown",1,"btn","btn-floating"],[1,"ti-more-alt"],[1,"dropdown-menu","dropdown-menu-right"],["href","#",1,"dropdown-item"],[1,"small","text-muted","mb-0"],[1,"table-responsive"],[1,"table","table-borderless","table-hover","mb-0"],[4,"ngFor","ngForOf"],["href","#"],[1,"avatar","avatar-sm","mr-2"],[1,"avatar-title","bg-warning","text-black-50","rounded-pill"],[1,"ti-folder"],[1,"text-right"],["data-sidebar-target","#view-file",1,"dropdown-item","cursor-pointer",3,"click"],[1,"dropdown-item","cursor-pointer",3,"click"],[1,"row","mb-5"],[1,"col-md-12"],[1,"timeline"],["class","timeline-item",4,"ngFor","ngForOf"],[1,"timeline-item"],[1,"avatar","mr-3"],["src","../../assets/media/image/user/avatar2.jpg","alt","image",1,"rounded-circle"],[1,"d-md-flex","justify-content-between","mt-3",2,"margin-top","50ppx"],[1,"d-block"],[1,"link-1"]],template:function(r,o){r&1&&(u(0,"div")(1,"div",0),y(2,"app-navigation"),u(3,"div",1)(4,"div",2),y(5,"div",3),u(6,"div",4)(7,"div",5)(8,"h4"),p(9,"Daily Usage"),d(),y(10,"div",6),d(),u(11,"div",7)(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11),y(16,"img",12),d()(),u(17,"h4",13),p(18,"Create Memo"),d(),u(19,"p",14),p(20,"Create memo to grow their business and serve their customers better. Use this tool to generate reports."),d(),u(21,"button",15),E("click",function(){return o.openModal()}),p(22,"Create Memo"),d()()()()(),u(23,"div",16)(24,"h4"),p(25,"Favorite Folders"),d(),u(26,"a",17),p(27,"View All"),d()(),M(28,cM,2,0,"div",18)(29,uM,2,1,"div",19),u(30,"div",16)(31,"h4"),p(32,"Quick Access"),d(),u(33,"a",17),p(34,"View All"),d()(),u(35,"div",10)(36,"div",20)(37,"div",21)(38,"div",22)(39,"div",23),E("click",function(){return o.openModal()}),u(40,"span",24),y(41,"i",25),d()()()(),u(42,"h6"),p(43,"Add"),d()()(),u(44,"div",16)(45,"h4"),p(46,"Recent Memo"),d(),u(47,"a",17),p(48,"View All"),d()(),M(49,hM,2,0,"div",18),u(50,"div",26),M(51,fM,13,1,"div",27),d(),u(52,"div",16)(53,"h4"),p(54,"Last Activities"),d()(),M(55,mM,2,0,"div",18)(56,vM,4,1,"div",28),d()(),y(57,"app-sidebar"),d()()),r&2&&(g(26),_("routerLink",Fe(9,eu)),g(2),_("ngIf",o.isLoading),g(),_("ngIf",!o.isLoading),g(4),_("routerLink",Fe(10,eu)),g(14),_("routerLink",Fe(11,eu)),g(2),_("ngIf",o.isLoading),g(2),_("ngIf",!o.isLoading),g(4),_("ngIf",o.isLoading),g(),_("ngIf",!o.isLoading))},dependencies:[U,Se,W,rn,on,An],styles:[".spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid rgba(0,0,0,.1);border-top-color:#3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]});let i=e;return i})();var tu=tt(et());var y0=i=>({"is-invalid":i}),yM=()=>["/forgotpassword"];function bM(i,e){i&1&&(u(0,"small"),p(1,"Identity is required."),d())}function _M(i,e){i&1&&(u(0,"small"),p(1,"Please enter a valid email."),d())}function xM(i,e){if(i&1&&(u(0,"div",12),M(1,bM,2,0,"small",13)(2,_M,2,0,"small",13),d()),i&2){let n=x();g(),_("ngIf",n.loginForm.get("identity").errors.required),g(),_("ngIf",n.loginForm.get("identity").errors.email)}}function CM(i,e){i&1&&(u(0,"small"),p(1,"Password is required."),d())}function wM(i,e){i&1&&(u(0,"small"),p(1,"Password must be at least 6 characters long."),d())}function SM(i,e){if(i&1&&(u(0,"div",12),M(1,CM,2,0,"small",13)(2,wM,2,0,"small",13),d()),i&2){let n=x();g(),_("ngIf",n.loginForm.get("password").errors.required),g(),_("ngIf",n.loginForm.get("password").errors.minlength)}}var b0=(()=>{let e=class e{constructor(t,r,o,s,a){this.fb=t,this.router=r,this.local=o,this.HttpRequest=s,this.userDetail=a,this.isLoading=!1,this.loginForm=this.fb.group({identity:["",ge.required],password:["",ge.required]})}onSubmit(){if(this.loginForm.valid){this.isLoading=!0;let t=this.loginForm.value;console.log(t),this.HttpRequest.makePostRequest("/auth/login",t).subscribe({next:r=>{console.log(r),this.userDetail.setUserDetail(r),this.isLoading=!1,r.status&&((0,tu.default)({text:"Authentication successful!",duration:3e3,gravity:"top",position:"right",backgroundColor:"green"}).showToast(),console.log(r),this.local.write("data",r.token),this.router.navigate(["/auth"]))},error:r=>{this.isLoading=!1;let o=r?.error?.message??r.message;console.log(r),(0,tu.default)({text:o,duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast()}})}}};e.\u0275fac=function(r){return new(r||e)(C(Je),C(me),C(ft),C(K),C(re))},e.\u0275cmp=A({type:e,selectors:[["app-login"]],standalone:!0,features:[V],decls:18,vars:13,consts:[[1,"form-membership",2,"background","url(../../assets/media/image/image1.jpg)"],[1,"form-wrapper"],["id","logo"],["src","../../assets/media/image/logo-dark.png","alt","image"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","identity","placeholder","Identity (Username or Email)","required","","autofocus","",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","password","placeholder","Password","required","",1,"form-control",3,"ngClass"],[1,"form-group","d-flex","justify-content-between"],[1,"cursor-pointer",3,"routerLink"],["type","submit",1,"btn","btn-primary","btn-block","w-full","bg-blue-600","text-white","py-3","rounded-md","hover:bg-blue-700",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),y(3,"img",3),d(),u(4,"h5"),p(5,"Sign in"),d(),u(6,"form",4),E("ngSubmit",function(){return o.onSubmit()}),u(7,"div",5),y(8,"input",6),M(9,xM,3,2,"div",7),d(),u(10,"div",5),y(11,"input",8),M(12,SM,3,2,"div",7),d(),u(13,"div",9)(14,"span",10),p(15,"Forgot password"),d()(),u(16,"button",11),p(17),d()()()()),r&2&&(g(6),_("formGroup",o.loginForm),g(2),_("ngClass",rt(8,y0,o.loginForm.get("identity").invalid&&o.loginForm.get("identity").touched)),g(),_("ngIf",o.loginForm.get("identity").invalid&&o.loginForm.get("identity").touched),g(2),_("ngClass",rt(10,y0,o.loginForm.get("password").invalid&&o.loginForm.get("password").touched)),g(),_("ngIf",o.loginForm.get("password").invalid&&o.loginForm.get("password").touched),g(2),_("routerLink",Fe(12,yM)),g(2),_("disabled",o.isLoading),g(),P(" ",o.isLoading?"Logging in...":"Login"," "))},dependencies:[U,ot,W,oe,le,X,Y,ae,lt,Me,ke,An]});let i=e;return i})();var _0=tt(et());function EM(i,e){if(i&1){let n=q();u(0,"div",121)(1,"ul",122)(2,"li",123)(3,"a",124),E("click",function(){let r=D(n).$implicit,o=x(2);return N(o.foldName(r.Id))}),y(4,"i",125),u(5,"span",126),p(6),d()()()()()}if(i&2){let n=e.$implicit;g(6),P(" ",(n==null?null:n.MemFoldName)==="0"||!(n!=null&&n.MemFoldName)?"No folder name available":n==null?null:n.MemFoldName," ")}}function MM(i,e){if(i&1){let n=q();u(0,"div",115)(1,"div",116)(2,"h6",117),p(3,"My Folders"),d(),u(4,"span",118)(5,"button",119),E("click",function(){D(n);let r=x();return N(r.createFolders())}),p(6," Create Folder "),d()(),M(7,EM,7,1,"div",120),d()()}if(i&2){let n=x();g(7),_("ngForOf",n.allFolder)}}function kM(i,e){i&1&&y(0,"span",132)}function IM(i,e){i&1&&y(0,"span",132)}function TM(i,e){if(i&1){let n=q();u(0,"ul",127)(1,"span",118)(2,"button",128),E("click",function(){D(n);let r=x();return N(r.previous())}),M(3,kM,1,0,"span",129),p(4),d()(),u(5,"span",118)(6,"button",128),E("click",function(){D(n);let r=x();return N(r.next())}),M(7,IM,1,0,"span",129),p(8),d()(),u(9,"div",130)(10,"label"),p(11,"Search by Title"),d(),u(12,"input",131),_e("ngModelChange",function(r){D(n);let o=x();return be(o.searchTerm,r)||(o.searchTerm=r),N(r)}),d()()()}if(i&2){let n=x();g(2),_("disabled",n.isLoadingNext),g(),_("ngIf",n.isLoadingPrevious),g(),P(" ",n.isLoadingPrevious?"Loading...":"Previous"," "),g(2),_("disabled",n.isLoadingPrevious),g(),_("ngIf",n.isLoadingNext),g(),P(" ",n.isLoadingNext?"Loading...":"Next"," "),g(4),ye("ngModel",n.searchTerm)}}function DM(i,e){i&1&&(u(0,"div",133),y(1,"div",134),d())}function NM(i,e){i&1&&(u(0,"tr")(1,"td",139)(2,"h3",140),p(3,"No files found"),d()()())}function OM(i,e){if(i&1){let n=q();u(0,"button",155),E("click",function(){D(n);let r=x().$implicit,o=x(2);return N(o.copyToClipboard(r.MemFullLink))}),y(1,"i",156),d()}}function RM(i,e){if(i&1){let n=q();u(0,"tr"),y(1,"td"),u(2,"td")(3,"span",141)(4,"figure",142)(5,"span",143),y(6,"i",94),d()(),u(7,"span",144)(8,"span"),p(9),d()()()(),u(10,"td"),p(11),d(),u(12,"td"),p(13),d(),u(14,"td",145),p(15),M(16,OM,2,0,"button",146),d(),u(17,"td",147),y(18,"img",148),d(),y(19,"td"),u(20,"td",149)(21,"div",150)(22,"a",151),y(23,"i",152),d(),u(24,"div",153)(25,"span",154),E("click",function(){let r=D(n).$implicit,o=x(2);return N(o.editFiles(r==null?null:r.MemUniqueId))}),p(26,"Edit"),d(),u(27,"span",154),E("click",function(){let r=D(n).$implicit,o=x(2);return N(o.publish(r.Id))}),p(28),d()()()()()}if(i&2){let n=e.$implicit,t=x(2);g(9),z(n.MemTitle),g(2),z(t.format(n.CreatedAt)),g(2),z(n.MemFoldName),g(2),P(" ",n.MemFullLink," "),g(),_("ngIf",n.MemFullLink),g(2),_("src",n.MemQuickResponse,Ke),g(10),P(" ",n.isPublished?"UnPublish":"Publish","")}}function AM(i,e){if(i&1&&(u(0,"div",135)(1,"table",136),M(2,NM,4,0,"tr",137),u(3,"thead")(4,"tr"),y(5,"th"),u(6,"th"),p(7,"Name"),d(),u(8,"th"),p(9,"Date"),d(),u(10,"th"),p(11,"Folder Name"),d(),u(12,"th"),p(13,"Link"),d(),u(14,"th"),p(15,"QrCode"),d()()(),u(16,"tbody"),M(17,RM,29,7,"tr",138),d()()()),i&2){let n=x();g(2),_("ngIf",n.filteredFiles().length===0),g(15),_("ngForOf",n.filteredFiles())}}var x0=(()=>{let e=class e{constructor(t,r,o){this.httpRequest=t,this.handleModal=r,this.editMemo=o,this.isLoadingPrevious=!1,this.isLoadingNext=!1,this.foldId=void 0,this.page=1,this.allFile=[],this.allFolder=[],this.isLoading=!0,this.searchTerm="",this.format=s=>{let a=new Date(s),l=a.getFullYear(),c=String(a.getMonth()+1).padStart(2,"0"),h=String(a.getDate()).padStart(2,"0");return`${l}-${c}-${h}`}}ngOnInit(){this.httpRequest.makeGetRequest("/dashboard/files/all").subscribe(t=>{this.allFile=t.data,console.log(this.allFile),this.isLoading=!1},t=>{console.log(t)}),this.httpRequest.makeGetRequest("/dashboard/folder/all").subscribe(t=>{this.allFolder=t.data},t=>{console.log(t)})}previous(){this.isLoadingPrevious=!0,this.page-=1,this.page>0&&this.httpRequest.makeGetRequest(`/dashboard/files/all?page=${this.page}&foldId=${this.foldId}`).subscribe(t=>{this.allFile=t.data,this.isLoadingPrevious=!1},t=>{console.log(t),this.isLoadingPrevious=!1})}next(){this.isLoadingNext=!0,this.page+=1,this.httpRequest.makeGetRequest(`/dashboard/files/all?page=${this.page}&foldId=${this.foldId}`).subscribe(t=>{this.allFile=t.data,this.isLoadingNext=!1},t=>{console.log(t),this.isLoadingNext=!1})}editFiles(t){this.httpRequest?.makeGetRequest("/memo/single?id="+t).subscribe(r=>{this.handleModal.setEditMemo(r.data),console.log(r.data),this.handleModal.showMother("edit_files")},r=>{console.log("Error fetching data",r),this.isLoading=!1})}foldName(t){this.isLoading=!0,this.foldId=t,this.page=1,this.httpRequest.makeGetRequest("/dashboard/files/all?page=1&foldId="+t).subscribe(r=>{this.allFile=r.data,console.log(this.allFile),this.isLoading=!1})}publish(t){console.log(t),this.handleModal.showMother("otp"),this.handleModal.setPublishMemId(t)}filteredFiles(){return this.allFile.filter(t=>t.MemTitle.toLowerCase().includes(this.searchTerm.toLowerCase()))}createFolders(){this.handleModal.showMother("create_folder")}copyToClipboard(t){let r=document.createElement("textarea");r.style.position="fixed",r.style.opacity="0",r.value=t,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),(0,_0.default)({text:"Link copied to clipboard!",duration:"3000",position:"right",gravity:"top",backgroundColor:"blue"}).showToast()}};e.\u0275fac=function(r){return new(r||e)(C(K),C(re),C(re))},e.\u0275cmp=A({type:e,selectors:[["app-files"]],standalone:!0,features:[V],decls:365,vars:4,consts:[[1,"content-wrapper"],[1,"content-body"],[1,"content"],[1,"page-header","d-flex","justify-content-between"],["href","#",1,"files-toggler"],[1,"ti-menu"],[1,"row"],["class","col-xl-3 files-sidebar",4,"ngIf"],[1,"col-xl-9"],[1,"content-title","mt-0"],[1,"d-md-flex","justify-content-between","mb-4"],["class","list-inline mb-3",4,"ngIf"],["class","spinner-container",4,"ngIf"],["class","table-responsive",4,"ngIf"],["id","newTaskModal","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],["role","document",1,"modal-dialog"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close"],[1,"ti-close"],[1,"modal-body"],["autocomplete","off"],[1,"form-group","row"],[1,"col-sm-3","col-form-label"],[1,"col-sm-9"],["type","text",1,"form-control"],["multiple","",1,"js-example-basic-single"],["value","Theme Support"],["value","Freelance"],["selected","","value","Social"],["selected","","value","Friends"],["value","Coding"],[1,"form-group","row","row-sm"],[1,"col-sm-5"],["type","text","placeholder","Date",1,"form-control","create-event-datepicker"],[1,"col-sm-4"],["type","text","placeholder","Time",1,"form-control","create-event-demo"],[1,"avatar-group"],[1,"avatar","avatar-sm"],["src","../../assets/media/image/user/women_avatar3.jpg","alt","image",1,"rounded-circle"],[1,"avatar-title","bg-danger","rounded-circle"],["src","../../assets/media/image/user/women_avatar5.jpg","alt","image",1,"rounded-circle"],["type","button","title","Add User","data-toggle","dropdown",1,"btn","btn-outline-light","btn-sm","btn-floating"],[1,"ti-plus"],[1,"dropdown-menu","p-0"],[1,"p-3"],[1,"text-uppercase","font-size-11","mb-3"],[1,"input-group","input-group-sm"],["type","text","placeholder","Search User","aria-describedby","button-addon2",1,"form-control"],[1,"input-group-append"],["type","button","id","button-addon2",1,"btn","btn-outline-light"],[1,"ti-search"],[1,"list-group","list-group-flush","mt-2"],[1,"list-group-item","d-flex","align-items-center","pl-0","pr-0"],[1,"mr-2"],[1,"avatar-title","bg-primary","rounded-circle"],[1,"mb-0"],[1,"dropdown","ml-auto"],["href","#","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-outline-light","btn-sm"],["data-feather","plus"],["src","../../assets/media/image/user/women_avatar2.jpg","alt","image",1,"rounded-circle"],["href","#","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"btn","btn-outline-light","btn-sm","ml-3"],["src","../../assets/media/image/user/man_avatar2.jpg","alt","image",1,"rounded-circle"],["rows","6",1,"form-control"],[1,"col-sm-3"],["type","submit",1,"btn","btn-primary"],["id","editTaskModal","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade"],["type","text","placeholder","Title","value","Draw design and presentation for customers.",1,"form-control"],["selected","","value","Theme Support"],["value","Social"],["value","Friends"],["type","text","placeholder","Date","value","10/31/2019",1,"form-control","create-event-datepicker"],["type","text","value","11:57","placeholder","Time",1,"form-control","create-event-demo"],["type","text","placeholder","Search User","aria-describedby","button-addon3",1,"form-control"],["type","button","id","button-addon3",1,"btn","btn-outline-light"],["type","submit",1,"btn","btn-success"],["data-feather","check",1,"mr-2"],[1,"sidebar-group","d-print-none"],["id","storage",1,"sidebar","primary-sidebar","show"],[1,"sidebar-header"],[1,"sidebar-content"],["id","justgage_five",1,"mb-3"],[1,"list-group","list-group-flush","mb-3"],["href","#",1,"list-group-item","px-0","d-flex","align-items-center"],[1,"mr-3"],[1,"avatar"],[1,"avatar-title","bg-primary-bright","text-primary","rounded"],[1,"ti-image"],[1,"flex-grow-1"],[1,"small","text-muted"],[1,"text-primary"],[1,"ti-control-play"],[1,"ti-files"],[1,"ti-file"],[1,"card","border","shadow-none"],[1,"card-body","text-center"],["src","../../assets/media/svg/upgrade.svg","alt","upgrade",1,"img-fluid","mb-3"],[1,"text-muted"],[1,"btn","btn-primary"],[1,"sidebar-footer"],[1,"btn","btn-lg","btn-block","btn-outline-primary"],[1,"fa","fa-cloud-upload","mr-3"],["id","view-detail",1,"sidebar"],["href","#",1,"btn","btn-light","btn-floating","sidebar-close-btn"],[1,"ti-angle-right"],[1,"avatar","mb-4"],[1,"avatar-title","bg-info-bright","text-info","rounded-pill"],[1,"row","mb-3"],[1,"col-md-5"],[1,"col-md-7"],["href","#",1,"link-1"],[1,"col-md-7","text-success"],[1,"btn","btn-lg","btn-block","btn-primary"],[1,"ti-share","mr-3"],[1,"col-xl-3","files-sidebar"],["id","folder",1,"card","border-0"],[1,"card-title"],[1,"list-inline-item","mb-0"],[1,"btn","btn-primary",3,"click"],["id","files","class","jstree jstree-1 jstree-default","role","tree","aria-multiselectable","true","tabindex","0","aria-activedescendant","j1_1","aria-busy","false",4,"ngFor","ngForOf"],["id","files","role","tree","aria-multiselectable","true","tabindex","0","aria-activedescendant","j1_1","aria-busy","false",1,"jstree","jstree-1","jstree-default"],["role","group",1,"jstree-container-ul","jstree-children","jstree-no-dots"],["role","treeitem","aria-selected","false","aria-level","1","aria-labelledby","j1_1_anchor","aria-expanded","false","id","j1_1",1,"jstree-node","jstree-closed"],["tabindex","-1","id","j1_1_anchor",1,"jstree-anchor","cursor-pointer","ms-5",3,"click"],["role","presentation",1,"jstree-icon","jstree-themeicon","ti-folder","text-warning","jstree-themeicon-custom"],[2,"margin-left","10px"],[1,"list-inline","mb-3"],[1,"btn","btn-primary",3,"click","disabled"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],[1,"form-group"],["type","text","placeholder","Enter title to search",1,"form-control",3,"ngModelChange","ngModel"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"spinner-container"],[1,"spinner"],[1,"table-responsive"],["id","table-files",1,"table","table-borderless","table-hover"],[4,"ngIf"],[4,"ngFor","ngForOf"],["colspan","6",1,"text-center"],[1,"text-danger"],[1,"d-flex","align-items-center"],[1,"avatar","avatar-sm","mr-3"],[1,"avatar-title","rounded-pill"],[1,"d-flex","flex-column"],[1,"text-primary","cursor-pointer"],["title","copy to clipboard","class","btn btn-icon",3,"click",4,"ngIf"],[1,"qrcode"],["alt","User Image",2,"width","60px","height","60px","object-fit","contain",3,"src"],[1,"text-right"],[1,"dropdown"],["href","#","data-toggle","dropdown",1,"btn","btn-floating"],[1,"ti-more-alt"],[1,"dropdown-menu","dropdown-menu-right"],[1,"dropdown-item","cursor-pointer",3,"click"],["title","copy to clipboard",1,"btn","btn-icon",3,"click"],[1,"ti-clipboard"]],template:function(r,o){r&1&&(u(0,"div",0),y(1,"app-navigation"),u(2,"div",1)(3,"div",2)(4,"div",3)(5,"h2"),p(6,"Files"),d(),u(7,"a",4),y(8,"i",5),d()(),u(9,"div",6),M(10,MM,8,1,"div",7),u(11,"div",8)(12,"div",9)(13,"h4"),p(14,"Documents"),d()(),u(15,"div",10),M(16,TM,13,7,"ul",11),d(),M(17,DM,2,0,"div",12)(18,AM,18,2,"div",13),d()(),u(19,"div",14)(20,"div",15)(21,"div",16)(22,"div",17)(23,"h5",18),p(24,"New Task"),d(),u(25,"button",19),y(26,"i",20),d()(),u(27,"div",21)(28,"form",22)(29,"div",23)(30,"label",24),p(31,"Task title"),d(),u(32,"div",25),y(33,"input",26),d()(),u(34,"div",23)(35,"label",24),p(36,"Tags"),d(),u(37,"div",25)(38,"select",27)(39,"option",28),p(40,"Theme Support"),d(),u(41,"option",29),p(42,"Freelance"),d(),u(43,"option",30),p(44,"Social"),d(),u(45,"option",31),p(46,"Friends"),d(),u(47,"option",32),p(48,"Coding"),d()()()(),u(49,"div",33)(50,"label",24),p(51,"Deadline"),d(),u(52,"div",34),y(53,"input",35),d(),u(54,"div",36),y(55,"input",37),d()(),u(56,"div",23)(57,"label",24),p(58,"Participate"),d(),u(59,"div",25)(60,"div",38)(61,"figure",39),y(62,"img",40),d(),u(63,"figure",39)(64,"span",41),p(65,"S"),d()(),u(66,"figure",39),y(67,"img",42),d()(),u(68,"button",43),y(69,"i",44),d(),u(70,"div",45)(71,"div",46)(72,"h6",47),p(73,"Add User"),d(),u(74,"div",48),y(75,"input",49),u(76,"div",50)(77,"button",51),y(78,"i",52),d()()(),u(79,"ul",53)(80,"li",54)(81,"div",55)(82,"figure",39)(83,"span",56),p(84,"V"),d()()(),u(85,"div")(86,"h6",57),p(87,"Valentine Maton"),d()(),u(88,"div",58)(89,"a",59),y(90,"i",60),d()()(),u(91,"li",54)(92,"div",55)(93,"figure",39),y(94,"img",40),d()(),u(95,"div")(96,"h6",57),p(97,"Valentine Maton"),d()(),u(98,"div",58)(99,"a",59),y(100,"i",60),d()()(),u(101,"li",54)(102,"div",55)(103,"figure",39),y(104,"img",61),d()(),u(105,"div")(106,"h6",57),p(107,"Valentine Maton"),d()(),u(108,"div",58)(109,"a",62),y(110,"i",60),d()()(),u(111,"li",54)(112,"div",55)(113,"figure",39),y(114,"img",63),d()(),u(115,"div")(116,"h6",57),p(117,"Valentine Maton"),d()(),u(118,"div",58)(119,"a",62),y(120,"i",60),d()()()()()()()(),u(121,"div",23)(122,"label",24),p(123,"Description"),d(),u(124,"div",25),y(125,"textarea",64),d()(),u(126,"div",23),y(127,"label",65),u(128,"div",25)(129,"button",66),p(130,"Create"),d()()()()()()()(),u(131,"div",67)(132,"div",15)(133,"div",16)(134,"div",17)(135,"h5",18),p(136,"Edit Task"),d(),u(137,"button",19),y(138,"i",20),d()(),u(139,"div",21)(140,"form",22)(141,"div",23)(142,"label",24),p(143,"Task title"),d(),u(144,"div",25),y(145,"input",68),d()(),u(146,"div",23)(147,"label",24),p(148,"Tags"),d(),u(149,"div",25)(150,"select",27)(151,"option",69),p(152,"Theme Support"),d(),u(153,"option",29),p(154,"Freelance"),d(),u(155,"option",70),p(156,"Social"),d(),u(157,"option",71),p(158,"Friends"),d(),u(159,"option",32),p(160,"Coding"),d()()()(),u(161,"div",33)(162,"label",24),p(163,"Deadline"),d(),u(164,"div",34),y(165,"input",72),d(),u(166,"div",36),y(167,"input",73),d()(),u(168,"div",23)(169,"label",24),p(170,"Participate"),d(),u(171,"div",25)(172,"div",38)(173,"figure",39),y(174,"img",40),d(),u(175,"figure",39)(176,"span",41),p(177,"S"),d()(),u(178,"figure",39),y(179,"img",42),d()(),u(180,"button",43),y(181,"i",44),d(),u(182,"div",45)(183,"div",46)(184,"h6",47),p(185,"Add User"),d(),u(186,"div",48),y(187,"input",74),u(188,"div",50)(189,"button",75),y(190,"i",52),d()()(),u(191,"ul",53)(192,"li",54)(193,"div",55)(194,"figure",39)(195,"span",56),p(196,"V"),d()()(),u(197,"div")(198,"h6",57),p(199,"Valentine Maton"),d()(),u(200,"div",58)(201,"a",59),y(202,"i",60),d()()(),u(203,"li",54)(204,"div",55)(205,"figure",39),y(206,"img",40),d()(),u(207,"div")(208,"h6",57),p(209,"Valentine Maton"),d()(),u(210,"div",58)(211,"a",59),y(212,"i",60),d()()(),u(213,"li",54)(214,"div",55)(215,"figure",39),y(216,"img",61),d()(),u(217,"div")(218,"h6",57),p(219,"Valentine Maton"),d()(),u(220,"div",58)(221,"a",62),y(222,"i",60),d()()(),u(223,"li",54)(224,"div",55)(225,"figure",39),y(226,"img",63),d()(),u(227,"div")(228,"h6",57),p(229,"Valentine Maton"),d()(),u(230,"div",58)(231,"a",62),y(232,"i",60),d()()()()()()()(),u(233,"div",23)(234,"label",24),p(235,"Description"),d(),u(236,"div",25)(237,"textarea",64),p(238,"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Consectetur corporis incidunt labore modi numquam omnis pariatur possimus suscipit vitae voluptas?"),d()()(),u(239,"div",23),y(240,"label",65),u(241,"div",25)(242,"button",76),y(243,"i",77),p(244," Save "),d()()()()()()()()()(),u(245,"div",78)(246,"div",79)(247,"div",80)(248,"h4"),p(249,"Storage Overview"),d()(),u(250,"div",81),y(251,"div",82),u(252,"div")(253,"div",83)(254,"a",84)(255,"div",85)(256,"figure",86)(257,"span",87),y(258,"i",88),d()()(),u(259,"div",89)(260,"p",57),p(261,"Images"),d(),u(262,"span",90),p(263,"259 Files"),d()(),u(264,"div")(265,"h5",91),p(266,"15.7 GB"),d()()(),u(267,"a",84)(268,"div",85)(269,"figure",86)(270,"span",87),y(271,"i",92),d()()(),u(272,"div",89)(273,"p",57),p(274,"Videos"),d(),u(275,"span",90),p(276,"8 Files"),d()(),u(277,"div")(278,"h5",91),p(279,"20 GB"),d()()(),u(280,"a",84)(281,"div",85)(282,"figure",86)(283,"span",87),y(284,"i",93),d()()(),u(285,"div",89)(286,"p",57),p(287,"Documents"),d(),u(288,"span",90),p(289,"46 Files"),d()(),u(290,"div")(291,"h5",91),p(292,"10.5 GB"),d()()(),u(293,"a",84)(294,"div",85)(295,"figure",86)(296,"span",87),y(297,"i",94),d()()(),u(298,"div",89)(299,"p",57),p(300,"Other Files"),d(),u(301,"span",90),p(302,"50 Files"),d()(),u(303,"div")(304,"h5",91),p(305,"2.8 GB"),d()()()()(),u(306,"div",95)(307,"div",96),y(308,"img",97),u(309,"h5"),p(310,"Get an Upgrade"),d(),u(311,"p",98),p(312,"Get additional 500 GB space for your documents and files. Unlock now for more space."),d(),u(313,"button",99),p(314,"Upgrade"),d()()()(),u(315,"div",100)(316,"button",101),y(317,"i",102),p(318," Upload "),d()()(),u(319,"div",103)(320,"div",80)(321,"h4"),p(322,"View Detail"),d(),u(323,"a",104),y(324,"i",105),d()(),u(325,"div",81)(326,"figure",106)(327,"span",107),y(328,"i",94),d()(),u(329,"div",108)(330,"div",109),p(331,"File name:"),d(),u(332,"div",110)(333,"a",111),p(334,"Meeting-notes.doc"),d()()(),u(335,"div",108)(336,"div",109),p(337,"File type:"),d(),u(338,"div",110),p(339,"Word File"),d()(),u(340,"div",108)(341,"div",109),p(342,"File size:"),d(),u(343,"div",110),p(344,"22 KB"),d()(),u(345,"div",108)(346,"div",109),p(347,"Created:"),d(),u(348,"div",110),p(349,"Monday, July 02, 2020 9:34am"),d()(),u(350,"div",108)(351,"div",109),p(352,"Modified:"),d(),u(353,"div",112),p(354,"Monday, July 02, 2020 9:34am"),d()(),u(355,"div",108)(356,"div",109),p(357,"Accessed:"),d(),u(358,"div",110),p(359,"Monday, July 03, 2020 10:22am"),d()()(),u(360,"div",100)(361,"button",113),y(362,"i",114),p(363," Share "),d()()(),y(364,"app-sidebar"),d()()),r&2&&(g(10),_("ngIf",!o.isLoading),g(6),_("ngIf",!o.isLoading),g(),_("ngIf",o.isLoading),g(),_("ngIf",!o.isLoading))},dependencies:[rn,on,oe,le,jn,zn,X,Y,ae,ve,Re,Mt,U,Se,W],styles:["#folder[_ngcontent-%COMP%]{max-height:70vh;overflow-y:auto}#folder[_ngcontent-%COMP%]::-webkit-scrollbar{width:2px}#folder[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}#folder[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#88888880;border-radius:6px}#folder[_ngcontent-%COMP%]{scrollbar-width:thin;scrollbar-color:rgba(136,136,136,.5) transparent}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid rgba(0,0,0,.1);border-top-color:#3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.qrcode1[_ngcontent-%COMP%]{border:2px solid blue;height:10px;width:10px}.btn-icon[_ngcontent-%COMP%]{background:none;border:none;padding:0;margin-left:3px;margin-top:-4px;cursor:pointer;color:#007bff}.btn-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.btn-icon[_ngcontent-%COMP%]:hover   i[_ngcontent-%COMP%]{color:#00f}"]});let i=e;return i})();function PM(i,e){i&1&&(u(0,"div",9),y(1,"div",10),d())}function FM(i,e){if(i&1&&(u(0,"div",15)(1,"div")(2,"figure",16),y(3,"img",17),d()(),u(4,"div")(5,"h6",18)(6,"span",19)(7,"a",20)(8,"p"),p(9),d()()()(),y(10,"a",21),d()()),i&2){let n=e.$implicit,t=x(2);g(9),as("",n==null?null:n.ViewEmail," from ",n==null?null:n.ViewLoc," viewed this memo on ",t.format(n==null?null:n.CreatedAt)," at approximately ",t.formatTime(n==null?null:n.CreatedAt),".")}}function VM(i,e){if(i&1&&(u(0,"div",11)(1,"div",12)(2,"div",13),M(3,FM,11,4,"div",14),d()()()),i&2){let n=x();g(3),_("ngForOf",n.activities)}}var C0=(()=>{let e=class e{constructor(t,r){this.service=t,this.httpRequest=r,this.isLoading=!1,this.format=o=>{let s=new Date(o),a=s.getFullYear(),l=String(s.getMonth()+1).padStart(2,"0"),c=String(s.getDate()).padStart(2,"0");return`${a}-${l}-${c}`}}ngOnInit(){this.memoAcitivities()}memoAcitivities(){this.isLoading=!0,this.httpRequest.makeGetRequest("/memo/memo_activities").subscribe(t=>{this.activities=t.data,console.log(this.activities),this.isLoading=!1},t=>{console.log(t),this.isLoading=!1})}formatTime(t){let r=new Date(t),o=String(r.getHours()).padStart(2,"0"),s=String(r.getMinutes()).padStart(2,"0"),a=String(r.getSeconds()).padStart(2,"0");return`${o}:${s}:${a}`}};e.\u0275fac=function(r){return new(r||e)(C(re),C(K))},e.\u0275cmp=A({type:e,selectors:[["app-activities"]],standalone:!0,features:[V],decls:14,vars:2,consts:[[1,"content-wrapper"],[1,"content-body"],[1,"content"],[1,"page-header","d-md-flex","justify-content-between"],[1,"nav","justify-content-end","mt-4","mt-md-0"],[1,"nav-item"],["href","#",1,"nav-link","active"],["class","spinner-container",4,"ngIf"],["class","row mb-5",4,"ngIf"],[1,"spinner-container"],[1,"spinner"],[1,"row","mb-5"],[1,"col-md-12"],[1,"timeline"],["class","timeline-item",4,"ngFor","ngForOf"],[1,"timeline-item"],[1,"avatar","mr-3"],["src","../../assets/media/image/user/avatar2.jpg","alt","image",1,"rounded-circle"],[1,"d-md-flex","justify-content-between","mt-3",2,"margin-top","50ppx"],[1,"d-block"],[1,"link-1"],["href","#"]],template:function(r,o){r&1&&(u(0,"div",0),y(1,"app-navigation"),u(2,"div",1)(3,"div",2)(4,"div",3)(5,"h2"),p(6,"Activities"),d(),u(7,"ul",4)(8,"li",5)(9,"a",6),p(10,"Memo"),d()()()(),M(11,PM,2,0,"div",7)(12,VM,4,1,"div",8),d()(),y(13,"app-sidebar"),d()),r&2&&(g(11),_("ngIf",o.isLoading),g(),_("ngIf",!o.isLoading))},dependencies:[rn,on,U,Se,W,oe],styles:[".spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid rgba(0,0,0,.1);border-top-color:#3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]});let i=e;return i})();var LM=()=>({standalone:!0});function jM(i,e){i&1&&(u(0,"div",7)(1,"div",8),y(2,"div",9),d()())}function zM(i,e){if(i&1&&(u(0,"option",26),p(1),d()),i&2){let n=e.$implicit;_("value",n.id),g(),z(n.RoleName)}}function BM(i,e){if(i&1){let n=q();u(0,"tr")(1,"td")(2,"div",29),y(3,"input",33)(4,"label",34),d()(),u(5,"td")(6,"a",35)(7,"figure",36),y(8,"img",37),d(),p(9),d()(),u(10,"td")(11,"a",38),p(12),d()(),u(13,"td"),p(14),d(),u(15,"td")(16,"span"),p(17),d()(),u(18,"td")(19,"div",39)(20,"a",40),y(21,"i",41),d(),u(22,"div",42)(23,"button",43),E("click",function(){let r=D(n).$implicit,o=x(3);return N(o.suspendUserMethod(r.id,o.suspendUser?"unsuspend":"suspend"))}),p(24),d(),u(25,"button",43),E("click",function(){let r=D(n).$implicit,o=x(3);return N(o.authentication(r.id))}),p(26,"Authentication"),d()(),y(27,"div",42),d()()()}if(i&2){let n=e.$implicit;g(3),rs("id","user-",n==null?null:n.id,""),g(),rs("for","user-",n==null?null:n.id,""),g(5),P(" ",n==null?null:n.full_name," "),g(2),rs("href","mailto:",n==null?null:n.email,"",Ke),g(),z(n==null?null:n.email),g(2),z(n==null||n.UserRole==null?null:n.UserRole.RoleName),g(2),Vt(n.is_locked_out?"bg-danger-bright text-danger badge":"badge bg-success-bright text-success"),g(),z(n.is_locked_out?"Block":"Active"),g(7),P(" ",n.is_locked_out?"Unsuspend":"Suspend"," ")}}function UM(i,e){if(i&1&&(u(0,"div",27)(1,"table",28)(2,"thead")(3,"tr")(4,"th")(5,"div",29),y(6,"input",30)(7,"label",31),d()(),u(8,"th"),p(9,"Name"),d(),u(10,"th"),p(11,"Email"),d(),u(12,"th"),p(13,"Role"),d(),u(14,"th"),p(15,"Status"),d(),u(16,"th"),p(17,"Action"),d()()(),u(18,"tbody"),M(19,BM,28,13,"tr",32),d()()()),i&2){let n=x(2);g(19),_("ngForOf",n.makeFilter())}}function qM(i,e){if(i&1){let n=q();u(0,"div",10)(1,"div",11)(2,"h2"),p(3,"Users"),d(),u(4,"ul",12)(5,"li",13)(6,"a",14),y(7,"i",15),d(),u(8,"div",16)(9,"form")(10,"div",17)(11,"label"),p(12,"Role"),d(),u(13,"select",18),_e("ngModelChange",function(r){D(n);let o=x();return be(o.selectedValue,r)||(o.selectedValue=r),N(r)}),u(14,"option",19),p(15,"Select a role"),d(),M(16,zM,2,2,"option",20),d()()()()(),u(17,"li",21)(18,"div",22),E("click",function(){D(n);let r=x();return N(r.createUser())}),y(19,"i",23),d()()()(),u(20,"div",24),M(21,UM,20,1,"div",25),d()()}if(i&2){let n=x();g(13),ye("ngModel",n.selectedValue),_("ngModelOptions",Fe(5,LM)),g(),_("value",void 0),g(2),_("ngForOf",n.userRoles),g(5),_("ngIf",!n.isLoading)}}var w0=(()=>{let e=class e{constructor(t,r,o,s,a){this.httpRequest=t,this.authData=r,this.local=s,this.handleModal=a,this.user=[],this.users=[],this.userRoles=[],this.userRoleRights=[],this.userProfile=[],this.selectedValue=void 0,this.isLoading=!0,this.makeFilter=()=>isNaN(this.selectedValue)?this.users:this.users.filter(l=>l.role_id==this.selectedValue),this.filter=()=>{console.log(this.selectedValue)}}ngOnInit(){this.httpRequest?.makeGetRequest("/users_management/users/all").subscribe(t=>{this.users=t.data,this.isLoading=!1},t=>{console.log("Error fetching data",t),this.isLoading=!1}),this.httpRequest?.makeGetRequest("/users_management/user_roles/all").subscribe(t=>{if(this.userRoles=t.data,console.log(this.userRoles),this.local.write("userRoles",this.userRoles),this.userRoles&&this.userRoles.length>0){let r=this.userRoles[0].id;this.local.write("role_id",r),this.httpRequest?.makeGetRequest(`/users_management/user_role/right?roleId=${r}`).subscribe(o=>{this.userRoleRights=o.data,console.log(this.userRoleRights)},o=>{console.log(o)})}},t=>{console.log(t)})}suspendUserMethod(t,r){console.log(`${t}, ${r}`),this.httpRequest.makePatchRequest("/users_management/suspend_user_and_unsuspend_user",{identity:t}).subscribe(o=>{console.log(o),this.suspendUser=r==="suspend",console.log(this.suspendUser)},o=>{console.log(o)})}createUser(){this.handleModal.showMother("new_user")}authentication(t){this.httpRequest.makePostRequest("/users_management/create_authenticator_secret",{identity:t}).subscribe(r=>{this.handleModal.showMother("authentication"),this.authData.setAuthData(r)},r=>{console.log(r)})}};e.\u0275fac=function(r){return new(r||e)(C(K),C(re),C(me),C(ft),C(re))},e.\u0275cmp=A({type:e,selectors:[["app-users"]],standalone:!0,features:[V],decls:10,vars:2,consts:[[1,"layout-wrapper"],[1,"content-wrapper"],[1,"content-body"],[1,"row"],[1,"content"],["class","spinner-container",4,"ngIf"],["class","col-md-12",4,"ngIf"],[1,"spinner-container"],[1,"text-center"],[1,"spinner"],[1,"col-md-12"],[1,"page-header","d-flex","justify-content-between"],[1,"nav"],[1,"nav-item","dropdown"],["href","#","title","Filter","data-toggle","dropdown",1,"nav-link"],[1,"ti-filter"],[1,"dropdown-menu","dropdown-menu-big","p-4","dropdown-menu-right"],[1,"form-group"],["id","roleSelect",1,"form-control",3,"ngModelChange","ngModel","ngModelOptions"],["selected","",3,"value"],[3,"value",4,"ngFor","ngForOf"],[1,"nav-item","cursor-pointer"],["title","create user",1,"nav-link",3,"click"],[1,"ti-view-grid"],[1,"card","border-0"],["class","table-responsive",4,"ngIf"],[3,"value"],[1,"table-responsive"],["id","user-list",1,"table","table-borderless","table-hover"],[1,"custom-control","custom-checkbox"],["type","checkbox","id","user-list-select-all",1,"custom-control-input"],["for","user-list-select-all",1,"custom-control-label"],[4,"ngFor","ngForOf"],["type","checkbox",1,"custom-control-input",3,"id"],[1,"custom-control-label",3,"for"],["href","#"],[1,"avatar","avatar-sm","mr-2"],["src","../../assets/media/image/user/avatar2.jpg","alt","image",1,"rounded-circle"],[3,"href"],[1,"dropdown"],["href","#","data-toggle","dropdown",1,"btn","btn-floating"],[1,"ti-more-alt"],[1,"dropdown-menu","dropdown-menu-right"],[1,"dropdown-item",3,"click"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"div",1),y(2,"app-header")(3,"app-navigation"),u(4,"div",2)(5,"div",3)(6,"div",4),M(7,jM,3,0,"div",5)(8,qM,22,6,"div",6),d()()(),y(9,"app-sidebar"),d()()),r&2&&(g(7),_("ngIf",o.isLoading),g(),_("ngIf",!o.isLoading))},dependencies:[U,Se,W,rn,Hs,on,ve,le,jn,zn,Ln,Y,ae,Re,Mt],styles:[".example-container[_ngcontent-%COMP%]{width:500px;height:300px;border:1px solid rgba(0,0,0,.5)}.example-sidenav-content[_ngcontent-%COMP%]{display:flex;height:100%;align-items:center;justify-content:center}.example-sidenav[_ngcontent-%COMP%]{padding:20px}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid rgba(0,0,0,.1);border-top-color:#3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]});let i=e;return i})();function $M(i,e){i&1&&(u(0,"thead")(1,"tr")(2,"th"),p(3,"Title"),d(),u(4,"th"),p(5,"Date"),d(),u(6,"th"),p(7,"Image"),d()()())}function HM(i,e){if(i&1&&(u(0,"tr")(1,"td"),p(2),d(),u(3,"td"),p(4),te(5,"date"),d(),u(6,"td"),y(7,"img",34),d()()),i&2){let n=e.$implicit;g(2),z(n.Title),g(2),z(ju(5,3,n.CreatedAt,"medium")),g(3),_("src",n.ESignFile,Ke)}}var S0=(()=>{let e=class e{ngOnInit(){this.checkForExistingRecord();let t=this.http.makeGetRequest("/auth/user").subscribe(r=>{this.user=r.data,console.log(this.user)},r=>{console.log(r)})}constructor(t,r){this.http=t,this.handleModal=r,this.imageSrc="../../assets/media/image/user/women_avatar1.jpg",this.base64Image=null,this.memoImage=null,this.data=void 0,this.user={},this.isLoading=!1,this.isLoadingImage=!1,this.esignature={title:"",image:""},this.recordExists=!1}onFileChange(t){let r=t.target.files[0];if(console.log(r),r){let o=new FileReader;o.onload=()=>{this.base64Image=o.result,this.imageSrc=this.base64Image},o.readAsDataURL(r)}}uploadImage(){if(this.isLoadingImage=!0,this.base64Image){let t={image:this.base64Image};this.http.makePatchRequest("/users_management/admin/change_profile_picture",t).subscribe(r=>{this.isLoadingImage=!1},r=>{console.error(r),this.isLoadingImage=!1})}else console.warn("No file selected. Please select an image before uploading.")}returnData(){return this.data||[]}handleImageChange(t){let r=t.target.files[0];if(r){let o=new FileReader;o.onload=()=>{this.memoImage=o.result},o.readAsDataURL(r)}}eSignatures(){this.handleModal.showMother("esignature")}checkForExistingRecord(){this.isLoading=!0,this.http.makeGetRequest("/memo/mem_e_signature/all").subscribe(t=>{console.log(t),this.isLoading=!1,this.data=Array.isArray(t.data)?t.data:[],this.data.length>0&&(this.esignature=this.data[0],this.recordExists=!0),this.isLoading=!1},t=>{console.log(t),this.isLoading=!1})}fileChange(t){let r=t.target.files[0];if(r){let o=new FileReader;o.onload=s=>{this.esignature.image=s.target.result},o.readAsDataURL(r)}}addESignature(){if(this.data){this.isLoading=!0;try{this.data.length>0?(this.isLoading=!0,this.http.makePatchRequest("/memo/mem_e_signature/update/",H(k({},this.esignature),{identity:this.data[0].id})).subscribe(t=>{this.data[0]=t.data,console.log(t),console.log(this.data[0]),this.isLoading=!1})):this.http.makePostRequest("/memo/mem_e_signature/create",this.esignature).subscribe(t=>{console.log(t),this.data[0]=t.data,console.log(this.data[0]),this.isLoading=!1},t=>{console.log(t),this.isLoading=!1})}catch{}finally{this.isLoading=!1}}}};e.\u0275fac=function(r){return new(r||e)(C(K),C(re))},e.\u0275cmp=A({type:e,selectors:[["app-settings"]],standalone:!0,features:[V],decls:89,vars:8,consts:[[1,"layout-wrapper"],[1,"content-wrapper"],[1,"content-body"],[1,"content"],[1,"page-header"],["id","v-pills-tab","role","tablist","aria-orientation","vertical",1,"nav","nav-pills","mb-4"],["id","v-pills-home-tab","data-toggle","pill","href","#v-pills-home","role","tab","aria-controls","v-pills-home","aria-selected","true",1,"nav-item","nav-link","active"],["id","v-pills-messages-tab","data-toggle","pill","href","#v-pills-messages","role","tab","aria-controls","v-pills-messages","aria-selected","false",1,"nav-item","nav-link"],["id","v-pills-signature-tab","data-toggle","pill","href","#v-pills-signature","role","tab","aria-controls","v-pills-signature","aria-selected","false",1,"nav-item","nav-link"],["id","v-pills-tabContent",1,"tab-content"],["id","v-pills-home","role","tabpanel","aria-labelledby","v-pills-home-tab",1,"tab-pane","fade","show","active"],[1,"content-title"],[1,"row"],[1,"col-md-6"],[1,"mb-3"],[1,"row","my-4"],[1,"form-group"],["type","text",1,"form-control",3,"value"],[1,"btn","btn-primary","mb-5"],["id","v-pills-messages","role","tabpanel","aria-labelledby","v-pills-messages-tab",1,"tab-pane","fade"],["type","password",1,"form-control"],["id","v-pills-signature","role","tabpanel","aria-labelledby","v-pills-signature-tab",1,"tab-pane","fade"],[1,"esignatures-container"],["enctype","multipart/form-data",3,"ngSubmit"],["for","title"],["type","text","id","title","name","title","required","",1,"form-control",3,"ngModelChange","ngModel"],["for","image"],["type","file","id","image","accept","image/*","required","",3,"change"],["type","submit",1,"btn","btn-primary","my-5",3,"disabled"],[1,"card","border-0"],[1,"table-responsive"],["id","user-list",1,"table","table-borderless","table-hover"],[4,"ngIf"],[4,"ngFor","ngForOf"],["alt","E-Signature","width","100",1,"signature-image",3,"src"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"div",1),y(2,"app-navigation"),u(3,"div",2)(4,"div",3)(5,"div",4)(6,"h2"),p(7,"Settings"),d()(),u(8,"div",5)(9,"a",6),p(10,"Account"),d(),u(11,"a",7),p(12,"Security"),d(),u(13,"a",8),p(14,"E-Signature"),d()(),u(15,"div",9)(16,"div",10)(17,"div",11)(18,"h4"),p(19,"Account"),d()(),u(20,"div",12)(21,"div",13)(22,"div",14),y(23,"div")(24,"div"),d(),u(25,"form")(26,"div",15)(27,"div",13)(28,"div",16)(29,"label"),p(30,"Name"),d(),y(31,"input",17),d(),u(32,"div",16)(33,"label"),p(34,"Email"),d(),y(35,"input",17),d(),u(36,"div",16)(37,"label"),p(38,"Phone"),d(),y(39,"input",17),d()()(),u(40,"button",18),p(41,"Save Changes"),d()()()()(),u(42,"div",19)(43,"div",11)(44,"h4"),p(45,"Security"),d()(),u(46,"div",12)(47,"div",13)(48,"form")(49,"div",12)(50,"div",13)(51,"div",16)(52,"label"),p(53,"Old Password"),d(),y(54,"input",20),d(),u(55,"div",16)(56,"label"),p(57,"New Password"),d(),y(58,"input",20),d(),u(59,"div",16)(60,"label"),p(61,"New Password Repeat"),d(),y(62,"input",20),d()()(),u(63,"button",18),p(64,"Save Changes"),d()()()()(),u(65,"div",21)(66,"div",22)(67,"div",11)(68,"h4"),p(69,"E-Signatures Management"),d()(),u(70,"form",23),E("ngSubmit",function(){return o.addESignature()}),u(71,"div",12)(72,"div",13)(73,"div",16)(74,"label",24),p(75,"Title:"),d(),u(76,"input",25),_e("ngModelChange",function(a){return be(o.esignature.title,a)||(o.esignature.title=a),a}),d()(),u(77,"label",26),p(78,"Upload Image:"),d(),u(79,"input",27),E("change",function(a){return o.fileChange(a)}),d(),u(80,"button",28),p(81),d()()()(),u(82,"div",29)(83,"div",30)(84,"table",31),M(85,$M,8,0,"thead",32),u(86,"tbody"),M(87,HM,8,6,"tr",33),d()()()()()()()()(),y(88,"app-sidebar"),d()()),r&2&&(g(31),zi("value",o.user==null?null:o.user.last_name),g(4),zi("value",o.user==null?null:o.user.email),g(4),zi("value",o.user==null?null:o.user.phone),g(37),ye("ngModel",o.esignature.title),g(4),_("disabled",o.isLoading),g(),P(" ",o.isLoading?"Loading.....":o.data&&o.data.length>0?"Update E-Signature":"Add E-Signature"," "),g(4),_("ngIf",o.returnData()&&o.returnData().length>0),g(2),_("ngForOf",o.returnData()))},dependencies:[rn,on,ve,le,X,Y,ae,lt,Re,Mt,U,Se,W,th]});let i=e;return i})();var nu=tt(et());var GM=i=>({"is-invalid":i});function WM(i,e){i&1&&(u(0,"small"),p(1,"Password is required."),d())}function KM(i,e){i&1&&(u(0,"small"),p(1,"Password must be at least 6 characters long."),d())}function JM(i,e){if(i&1&&(u(0,"div",9),M(1,WM,2,0,"small",10)(2,KM,2,0,"small",10),d()),i&2){let n=x();g(),_("ngIf",n.authForm.get("otp").errors.required),g(),_("ngIf",n.authForm.get("otp").errors.minlength)}}var E0=(()=>{let e=class e{constructor(t,r,o,s){this.fb=t,this.router=r,this.local=o,this.httpRequest=s,this.isLoading=!1,this.isSuccess=!0,this.message="",this.authForm=this.fb.group({otp:["",ge.required]})}onSubmit(){if(this.authForm.value){this.isLoading=!0;let t=this.authForm.value;this.httpRequest.makePostRequest("/auth/validate_two_fact_auth",t).subscribe({next:r=>{this.isLoading=!1,(0,nu.default)({text:"Authentication successful!",duration:3e3,gravity:"top",position:"right",backgroundColor:"blue"}).showToast(),this.router.navigate(["/portal/dashboard"])},error:r=>{this.isLoading=!1,console.log(r),(0,nu.default)({text:"invalid",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast()}})}}};e.\u0275fac=function(r){return new(r||e)(C(Je),C(me),C(ft),C(K))},e.\u0275cmp=A({type:e,selectors:[["app-twofactorauth"]],standalone:!0,features:[V],decls:13,vars:7,consts:[[1,"form-membership",2,"background","url(../../assets/media/image/image1.jpg)"],[1,"form-wrapper"],["id","logo"],["src","../../assets/media/image/logo-dark.png","alt","image"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","otp","formControlName","otp","placeholder","number","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-block","w-full","bg-blue-600","text-white","py-3","rounded-md","hover:bg-blue-700",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),y(3,"img",3),d(),u(4,"h5"),p(5,"Two Factor Authentication"),d(),u(6,"form",4),E("ngSubmit",function(){return o.onSubmit()}),u(7,"div",5),y(8,"input",6),M(9,JM,3,2,"div",7),d(),u(10,"button",8),p(11),d(),y(12,"hr"),d()()()),r&2&&(g(6),_("formGroup",o.authForm),g(2),_("ngClass",rt(5,GM,o.authForm.get("otp").invalid&&o.authForm.get("otp").touched)),g(),_("ngIf",o.authForm.get("otp").invalid&&o.authForm.get("otp").touched),g(),_("disabled",o.isLoading),g(),P(" ",o.isLoading?"Submitting...":"Submit"," "))},dependencies:[U,ot,W,oe,le,X,Y,ae,lt,Me,ke],styles:[".alert[_ngcontent-%COMP%]{padding:10px;margin-bottom:10px;border-radius:5px}.alert-success[_ngcontent-%COMP%]{background-color:#d4edda;color:#155724}.alert-danger[_ngcontent-%COMP%]{background-color:#f8d7da;color:#721c24}"]});let i=e;return i})();var M0=(i,e)=>{let n=R(me),r=R(ft).read("data");return console.log(r),r||n.navigate([""]),!0};function QM(i,e){i&1&&(u(0,"div",2),p(1,` Loading...
`),d())}function XM(i,e){if(i&1){let n=q();u(0,"div")(1,"label",5),p(2,"Enter your phone number:"),d(),u(3,"input",6),_e("ngModelChange",function(r){D(n);let o=x(2);return be(o.phoneNumber,r)||(o.phoneNumber=r),N(r)}),d(),u(4,"button",7),E("click",function(){D(n);let r=x(2);return N(r.sendSmsOtp())}),p(5,"Send OTP"),d()()}if(i&2){let n=x(2);g(3),ye("ngModel",n.phoneNumber)}}function YM(i,e){if(i&1){let n=q();u(0,"div")(1,"label",8),p(2,"Enter your email:"),d(),u(3,"input",9),_e("ngModelChange",function(r){D(n);let o=x(2);return be(o.email,r)||(o.email=r),N(r)}),d(),u(4,"button",10),E("click",function(){D(n);let r=x(2);return N(r.sendEmailOtp())}),p(5,"Send OTP"),d()()}if(i&2){let n=x(2);g(3),ye("ngModel",n.email)}}function ZM(i,e){if(i&1){let n=q();u(0,"div")(1,"label",11),p(2,"Enter OTP:"),d(),u(3,"input",12),_e("ngModelChange",function(r){D(n);let o=x(2);return be(o.otp,r)||(o.otp=r),N(r)}),d(),u(4,"button",10),E("click",function(){D(n);let r=x(2);return N(r.verifyOtp())}),p(5,"Verify OTP"),d()()}if(i&2){let n=x(2);g(3),ye("ngModel",n.otp)}}function ek(i,e){if(i&1&&(u(0,"div"),p(1),d()),i&2){let n=x(2);g(),z(n.message)}}function tk(i,e){if(i&1&&(u(0,"div")(1,"h2"),p(2,"Your current location is:"),d(),u(3,"p"),p(4),d(),u(5,"p"),p(6),d()()),i&2){let n=x(2);g(4),P("Latitude: ",n.latitude,""),g(2),P("Longitude: ",n.longitude,"")}}function nk(i,e){if(i&1&&(u(0,"div")(1,"p"),p(2),d()()),i&2){let n=x(2);g(2),P("Error: ",n.errorMessage,"")}}function ik(i,e){if(i&1&&(u(0,"div",3),M(1,XM,6,1,"div",4)(2,YM,6,1,"div",4)(3,ZM,6,1,"div",4)(4,ek,2,1,"div",4)(5,tk,7,2,"div",4)(6,nk,3,1,"div",4),d()),i&2){let n=x();g(),_("ngIf",n.showPhoneOtpInput),g(),_("ngIf",n.showEmailOtpInput),g(),_("ngIf",n.showOtpVerification),g(),_("ngIf",n.message),g(),_("ngIf",n.latitude&&n.longitude),g(),_("ngIf",n.errorMessage)}}var k0=(()=>{let e=class e{constructor(t){this.httpRequest=t,this.isLoading=!0,this.showPhoneOtpInput=!1,this.showEmailOtpInput=!1,this.showOtpVerification=!1,this.phoneNumber="",this.email="",this.otp="",this.message=""}ngOnInit(){this.performSecurityChecks(),this.getUserLocation()}performSecurityChecks(){this.checkIpSecurity().subscribe(t=>{if(!t){this.message="Access denied: IP address not allowed.",this.isLoading=!1;return}this.checkLocationSecurity().then(r=>{if(!r){this.message="Access denied: Location not allowed.",this.isLoading=!1;return}this.checkOtpSecurity()})})}checkIpSecurity(){return this.httpRequest.makeGetRequest("/api/check-ip-security")}checkLocationSecurity(){return new Promise(t=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(r=>{let o={latitude:r.coords.latitude,longitude:r.coords.longitude};this.httpRequest.makePostRequest("/api/check-location-security",o).subscribe(t)},()=>t(!1)):t(!1)})}checkOtpSecurity(){this.httpRequest.makeGetRequest("/api/check-otp-security").subscribe(t=>{console.log(t)})}sendSmsOtp(){this.httpRequest.makePostRequest("/api/send-sms-otp",{phone:this.phoneNumber}).subscribe(t=>{console.log(t),this.showPhoneOtpInput=!1,this.showOtpVerification=!0})}sendEmailOtp(){this.httpRequest.makePostRequest("/api/send-email-otp",{email:this.email}).subscribe(t=>{console.log(t),this.showEmailOtpInput=!1,this.showOtpVerification=!0})}verifyOtp(){this.httpRequest.makePostRequest("/api/verify-otp",{otp:this.otp}).subscribe(t=>{t?this.message="Access granted: OTP verified successfully.":this.message="Access denied: Invalid OTP.",this.isLoading=!1})}getUserLocation(){navigator.geolocation?(console.log(navigator.geolocation),navigator.geolocation.getCurrentPosition(t=>{console.log(t),this.latitude=t.coords.latitude,this.longitude=t.coords.longitude,console.log(`Latitude: ${this.latitude}, Longitude: ${this.longitude}`)},t=>{switch(t.code){case t.PERMISSION_DENIED:this.errorMessage="User denied the request for Geolocation.";break;case t.POSITION_UNAVAILABLE:this.errorMessage="Location information is unavailable.";break;case t.TIMEOUT:this.errorMessage="The request to get user location timed out.";break}})):this.errorMessage="Geolocation is not supported by this browser."}};e.\u0275fac=function(r){return new(r||e)(C(K))},e.\u0275cmp=A({type:e,selectors:[["app-security-check"]],standalone:!0,features:[V],decls:2,vars:2,consts:[["class","loading-spinner",4,"ngIf"],["class","col-6 mx-auto",4,"ngIf"],[1,"loading-spinner"],[1,"col-6","mx-auto"],[4,"ngIf"],["for","phone"],["id","phone","type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","btn-block","w-full","bg-blue-600","text-white","py-3","rounded-md","hover:bg-blue-700","my-2",3,"click"],["for","email"],["id","email","type","email",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","btn-block","w-full","bg-blue-600","text-white","py-3","rounded-md","hover:bg-blue-700",3,"click"],["for","otp"],["id","otp","type","text",1,"form-control",3,"ngModelChange","ngModel"]],template:function(r,o){r&1&&M(0,QM,2,0,"div",0)(1,ik,7,6,"div",1),r&2&&(_("ngIf",o.isLoading),g(),_("ngIf",!o.isLoading))},dependencies:[ve,X,Y,Re,oe,U,W]});let i=e;return i})();var tl=tt(et());function rk(i,e){if(i&1&&(nt(0),u(1,"div",5)(2,"h2",6),p(3,"Title:"),d(),u(4,"p",7),p(5),d(),u(6,"h2",6),p(7,"Contents:"),d(),y(8,"p",8),u(9,"div",9)(10,"p",10),p(11,"Signature"),d(),y(12,"img",11),d()(),it()),i&2){let n=x();g(5),z(n.data==null?null:n.data.MemTitle),g(3),_("innerHTML",n.data==null?null:n.data.MemContents,qt),g(4),zi("src",n.data==null?null:n.data.signature.ESignFile,Ke)}}function ok(i,e){if(i&1&&(u(0,"div",12)(1,"p"),p(2),d()()),i&2){let n=x();g(2),z(n.message)}}function sk(i,e){i&1&&(u(0,"div",13),y(1,"div",14),d())}function ak(i,e){if(i&1){let n=q();u(0,"div",15)(1,"h3",16),p(2,"This is a restricted Document"),d(),u(3,"p"),p(4,"Please enter your email or phone number to receive an OTP:"),d(),u(5,"input",17),_e("ngModelChange",function(r){D(n);let o=x();return be(o.identity,r)||(o.identity=r),N(r)}),d(),u(6,"button",18),E("click",function(){D(n);let r=x();return N(r.sendIdentityOtp())}),p(7),d()()}if(i&2){let n=x();g(5),ye("ngModel",n.identity),g(2),z(n.isLoader?"Loading ...":" Send OTP")}}function lk(i,e){if(i&1){let n=q();u(0,"div",15)(1,"p"),p(2,"Enter the OTP sent to your email:"),d(),u(3,"input",19),_e("ngModelChange",function(r){D(n);let o=x();return be(o.identityOtp,r)||(o.identityOtp=r),N(r)}),d(),u(4,"button",20),E("click",function(){D(n);let r=x();return N(r.verifyEmailOtp())}),p(5,"Verify OTP"),d()()}if(i&2){let n=x();g(3),ye("ngModel",n.identityOtp)}}var I0=(()=>{let e=class e{constructor(t,r){this.http=t,this.route=r,this.itemId=null,this.status="isLoading",this.message="",this.data=void 0,this.isLoader=!1,this.identity="",this.identityOtp="",this.identityOtpSent=!1,this.isVerified=!1}ngOnInit(){this.route.paramMap.subscribe(t=>{this.itemId=t.get("id"),this.getData()})}getData(){navigator.geolocation.getCurrentPosition(t=>{let r=t.coords.latitude,o=t.coords.longitude;if(!r||!o){this.status="error",this.message="Unable to retrieve your location coordinates.";return}this.status="isLoading",this.http.makeGetRequest(`/memo/get_mem_by_memuniqueid/?id=${this.itemId}&lat=${r}&long=${o}`).subscribe(s=>{console.log(s.data),this.data=s.data,s.requireAccess?this.status="requireAccess":this.status="data"},s=>{this.status="error",this.message=s.error.message,console.error(s)})},t=>{this.status="error",this.message="This page requires your location to fetch the data",console.error("Error retrieving location:",t)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}sendIdentityOtp(){if(!this.identity){console.log("empty"),(0,tl.default)({text:"input cannot be empty",duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast();return}this.isLoader=!0;let t={identity:this.identity,memId:this.itemId};console.log(t),this.http.makePostRequest("/memo/verify_viewer_identity/",t).subscribe(r=>{console.log(r),this.status="Next_token",(0,tl.default)({text:"success",duration:3e3,gravity:"top",position:"right",backgroundColor:"blue"}).showToast(),this.isLoader=!1},r=>{console.log(r),this.isLoader=!1,this.message=r.error.message,(0,tl.default)({text:`${r.error.message};`,duration:3e3,gravity:"top",position:"right",backgroundColor:"red"}).showToast()})}verifyEmailOtp(){}};e.\u0275fac=function(r){return new(r||e)(C(K),C(Wt))},e.\u0275cmp=A({type:e,selectors:[["app-external-viewer"]],standalone:!0,features:[V],decls:7,vars:5,consts:[[1,"py-5",2,"display","flex","flex-direction","column","align-items","center","justify-content","center","font-family","Arial, sans-serif"],[4,"ngIf"],["style","color: red; font-size: 18px; margin-top: 20px;",4,"ngIf"],["class","spinner-container","style","margin-top: 20px;",4,"ngIf"],["id","verification",4,"ngIf"],[2,"background","white","border-radius","8px","box-shadow","0 4px 10px rgba(0, 0, 0, 0.1)","padding","20px","max-width","600px","width","100%","text-align","center"],[2,"color","#333","margin-bottom","20px"],[2,"color","#555","line-height","1.5"],[2,"color","#555","line-height","1.5",3,"innerHTML"],[2,"align-items","center","justify-content","center","margin-bottom","20px","margin-left","400px"],[2,"color","#555","margin","0"],["alt","Signature",2,"margin-left","10px","width","50px","height","auto",3,"src"],[2,"color","red","font-size","18px","margin-top","20px"],[1,"spinner-container",2,"margin-top","20px"],[1,"spinner"],["id","verification"],[1,"text-center"],["type","text","placeholder","Enter email or phone number",1,"form-control",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","btn-block","w-full","bg-blue-600","text-white","py-3","rounded-md","hover:bg-blue-700","my-3",2,"box-shadow","2rem",3,"click"],["type","text","placeholder","Enter OTP",1,"form-control",2,"padding","8px","margin-bottom","10px",3,"ngModelChange","ngModel"],[1,"btn","btn-primary","btn-block","w-full","bg-blue-600","text-white","py-3","rounded-md","hover:bg-blue-700","my-3",3,"click"]],template:function(r,o){r&1&&(u(0,"div",0),M(1,rk,13,3,"ng-container",1)(2,ok,3,1,"div",2)(3,sk,2,0,"div",3),u(4,"div"),M(5,ak,8,2,"div",4)(6,lk,6,1,"div",4),d()()),r&2&&(g(),_("ngIf",o.status==="data"),g(),_("ngIf",o.status==="error"),g(),_("ngIf",o.status==="isLoading"),g(2),_("ngIf",o.status=="requireAccess"),g(),_("ngIf",o.status==="Next_token"))},dependencies:[U,W,oe,X,Y,ve,Re],styles:[".spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:100vh}.spinner[_ngcontent-%COMP%]{width:50px;height:50px;border:5px solid rgba(0,0,0,.1);border-top-color:#3498db;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}#verification[_ngcontent-%COMP%]{box-shadow:#00000059 0 5px 15px;padding:20px}"]});let i=e;return i})();var ck=()=>["/"],T0=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=A({type:e,selectors:[["app-pagenotfound"]],standalone:!0,features:[V],decls:7,vars:2,consts:[[1,"page-not-found","cursor-pointer"],[1,"cursor-pointer",3,"routerLink"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"h1"),p(2,"404"),d(),u(3,"p"),p(4,"The page you are looking for doesn't exist."),d(),u(5,"a",1),p(6,"Go back to Home"),d()()),r&2&&(g(5),_("routerLink",Fe(1,ck)))},dependencies:[An],styles:[".page-not-found[_ngcontent-%COMP%]{text-align:center;margin-top:50px}.page-not-found[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:72px;margin-bottom:20px}.page-not-found[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:24px;margin-bottom:30px}.cursor-pointer[_ngcontent-%COMP%]{cursor:pointer}.page-not-found[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:18px;color:#007bff;text-decoration:none}.page-not-found[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]});let i=e;return i})();var iu=tt(et());var dk=i=>({"is-invalid":i});function uk(i,e){i&1&&(u(0,"small"),p(1,"Identity is required."),d())}function hk(i,e){i&1&&(u(0,"small"),p(1,"Please enter a valid email."),d())}function pk(i,e){if(i&1&&(u(0,"div",9),M(1,uk,2,0,"small",10)(2,hk,2,0,"small",10),d()),i&2){let n=x();g(),_("ngIf",n.forgotPasswordForm.get("identity").errors.required),g(),_("ngIf",n.forgotPasswordForm.get("identity").errors.email)}}var D0=(()=>{let e=class e{constructor(t,r,o,s){this.fb=t,this.router=r,this.local=o,this.httpRequest=s,this.isLoading=!1,this.forgotPasswordForm=this.fb.group({identity:["",Ka.required]})}onSubmit(){if(this.forgotPasswordForm.invalid)return;this.isLoading=!0;let t=this.forgotPasswordForm.value;console.log(t),this.httpRequest.makePostRequest("/auth/forgot_password",t).subscribe(r=>{console.log(r),(0,iu.default)({text:"success",backgroundColor:"blue",gravity:"top",position:"right",duration:3e3}).showToast(),console.log(r),this.local.write("passwordToken",r.token),this.router.navigate(["/passwordAuth"]),this.forgotPasswordForm.reset(),this.isLoading=!1},r=>{console.error(r),this.isLoading=!1,(0,iu.default)({text:"invalid",backgroundColor:"red",gravity:"top",position:"right",duration:3e3}).showToast()})}};e.\u0275fac=function(r){return new(r||e)(C(Je),C(me),C(ft),C(K))},e.\u0275cmp=A({type:e,selectors:[["app-forgotpassword"]],standalone:!0,features:[V],decls:12,vars:7,consts:[[1,"form-membership",2,"background","url(../../assets/media/image/image1.jpg)"],[1,"form-wrapper"],["id","logo"],["src","../../assets/media/image/logo-dark.png","alt","image"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","formControlName","identity","placeholder","Identity (Username or Email)","required","","autofocus","",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-block","w-full","bg-blue-600","text-white","py-3","rounded-md","hover:bg-blue-700",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),y(3,"img",3),d(),u(4,"h5"),p(5,"Forgot Password"),d(),u(6,"form",4),E("ngSubmit",function(){return o.onSubmit()}),u(7,"div",5),y(8,"input",6),M(9,pk,3,2,"div",7),d(),u(10,"button",8),p(11),d()()()()),r&2&&(g(6),_("formGroup",o.forgotPasswordForm),g(2),_("ngClass",rt(5,dk,o.forgotPasswordForm.get("identity").invalid&&o.forgotPasswordForm.get("identity").touched)),g(),_("ngIf",o.forgotPasswordForm.get("identity").invalid&&o.forgotPasswordForm.get("identity").touched),g(),_("disabled",o.isLoading),g(),P(" ",o.isLoading?"Logging in...":"Login"," "))},dependencies:[U,ot,W,oe,le,X,Y,ae,lt,Me,ke]});let i=e;return i})();var nl=tt(et());var fk=i=>({"is-invalid":i});function mk(i,e){i&1&&(u(0,"small"),p(1,"Password is required."),d())}function gk(i,e){i&1&&(u(0,"small"),p(1,"Password must be at least 6 characters long."),d())}function vk(i,e){if(i&1&&(u(0,"div",9),M(1,mk,2,0,"small",10)(2,gk,2,0,"small",10),d()),i&2){let n=x();g(),_("ngIf",n.authForm.get("otp").errors.required),g(),_("ngIf",n.authForm.get("otp").errors.minlength)}}var N0=(()=>{let e=class e{constructor(t,r,o){this.fb=t,this.http=r,this.router=o,this.isLoading=!1}ngOnInit(){this.token=JSON.parse(localStorage.getItem("passwordToken")),console.log(this.token),this.authForm=new Et({otp:new se("",[ge.required])})}onSubmit(){if(!this.authForm.valid){(0,nl.default)({text:"OTP cannot be empty.",backgroundColor:"red",gravity:"top",position:"right",duration:3e3}).showToast();return}this.isLoading=!0;let t=this.authForm.value;console.log(t);let r=new st({Authorization:`Bearer ${this.token}`,"Content-Type":"application/json","ngrok-skip-browser-warning":"69420"});this.http.post("https://45a5-102-88-62-203.ngrok-free.app/api/auth/verify_two_fact_auth",t,{headers:r}).subscribe(o=>{console.log(o),this.isLoading=!1,(0,nl.default)({text:"OTP verified successfully!",backgroundColor:"blue",gravity:"top",position:"right",duration:3e3}).showToast(),this.router.navigate(["/resetPassword"])},o=>{this.isLoading=!1,(0,nl.default)({text:"Failed to verify OTP. Please try again.",backgroundColor:"red",gravity:"top",position:"right",duration:3e3}).showToast(),console.error(o)})}};e.\u0275fac=function(r){return new(r||e)(C(Je),C(oi),C(me))},e.\u0275cmp=A({type:e,selectors:[["app-passwordauth"]],standalone:!0,features:[V],decls:13,vars:7,consts:[[1,"form-membership",2,"background","url(../../assets/media/image/image1.jpg)"],[1,"form-wrapper"],["id","logo"],["src","../../assets/media/image/logo-dark.png","alt","image"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","otp","formControlName","otp","placeholder","number","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","submit",1,"btn","btn-primary","btn-block","w-full","bg-blue-600","text-white","py-3","rounded-md","hover:bg-blue-700",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),y(3,"img",3),d(),u(4,"h5"),p(5,"Enter your Otp"),d(),u(6,"form",4),E("ngSubmit",function(){return o.onSubmit()}),u(7,"div",5),y(8,"input",6),M(9,vk,3,2,"div",7),d(),u(10,"button",8),p(11),d(),y(12,"hr"),d()()()),r&2&&(g(6),_("formGroup",o.authForm),g(2),_("ngClass",rt(5,fk,o.authForm.get("otp").invalid&&o.authForm.get("otp").touched)),g(),_("ngIf",o.authForm.get("otp").invalid&&o.authForm.get("otp").touched),g(),_("disabled",o.isLoading),g(),P(" ",o.isLoading?"Submitting...":"Submit"," "))},dependencies:[U,ot,W,oe,le,X,Y,ae,lt,Me,ke]});let i=e;return i})();var il=tt(et());var O0=i=>({"is-invalid":i});function yk(i,e){i&1&&(u(0,"small"),p(1,"Password is required."),d())}function bk(i,e){i&1&&(u(0,"small"),p(1,"password is required."),d())}function _k(i,e){if(i&1&&(u(0,"div",10),M(1,yk,2,0,"small",11)(2,bk,2,0,"small",11),d()),i&2){let n=x();g(),_("ngIf",n.resetPassword.get("password").errors.required),g(),_("ngIf",n.resetPassword.get("identity").errors.required)}}function xk(i,e){i&1&&(u(0,"small"),p(1,"Confirm Password is required."),d())}function Ck(i,e){i&1&&(u(0,"small"),p(1,"Passwords must match."),d())}function wk(i,e){if(i&1&&(u(0,"div",10),M(1,xk,2,0,"small",11)(2,Ck,2,0,"small",11),d()),i&2){let n=x();g(),_("ngIf",n.resetPassword.get("confirmPassword").errors.required),g(),_("ngIf",n.resetPassword.errors.passwordMismatch)}}var R0=(()=>{let e=class e{constructor(t,r,o){this.fb=t,this.http=r,this.router=o,this.isLoading=!1}ngOnInit(){this.token=JSON.parse(localStorage.getItem("passwordToken")),console.log(this.token),this.resetPassword=this.fb.group({password:["",[ge.required]],confirmPassword:["",[ge.required]]},{validator:this.passwordMatchValidator})}passwordMatchValidator(t){return t.get("password").value===t.get("confirmPassword").value?null:{passwordMismatch:!0}}onSubmit(){if(this.resetPassword.errors?.passwordMismatch){(0,il.default)({text:"Passwords do not match.",backgroundColor:"red",gravity:"top",position:"right",duration:3e3}).showToast();return}if(this.resetPassword.valid){this.isLoading=!0;let t=this.resetPassword.value;console.log(t);let r=new st({Authorization:`Bearer ${this.token}`,"Content-Type":"application/json","ngrok-skip-browser-warning":"69420"});this.http.patch("https://45a5-102-88-62-203.ngrok-free.app/api/auth/reset_password",{password:t.password},{headers:r}).subscribe(o=>{console.log(o),this.isLoading=!1,(0,il.default)({text:"Password reset request submitted successfully!",backgroundColor:"blue",gravity:"top",position:"right",duration:3e3}).showToast(),this.router.navigate(["/portal/dashboard"])},o=>{console.error(o),this.isLoading=!1,(0,il.default)({text:"An error occurred. Please try again.",backgroundColor:"red",gravity:"top",position:"right",duration:3e3}).showToast()})}}};e.\u0275fac=function(r){return new(r||e)(C(Je),C(oi),C(me))},e.\u0275cmp=A({type:e,selectors:[["app-resetPassword"]],standalone:!0,features:[V],decls:15,vars:11,consts:[[1,"form-membership",2,"background","url(../../assets/media/image/image1.jpg)"],[1,"form-wrapper"],["id","logo"],["src","../../assets/media/image/logo-dark.png","alt","image"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","password","formControlName","password","placeholder","New Password","required","",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["type","password","formControlName","confirmPassword","placeholder","Confirm Password","required","",1,"form-control",3,"ngClass"],["type","submit",1,"btn","btn-primary","btn-block","w-full","bg-blue-600","text-white","py-3","rounded-md","hover:bg-blue-700",3,"disabled"],[1,"invalid-feedback"],[4,"ngIf"]],template:function(r,o){r&1&&(u(0,"div",0)(1,"div",1)(2,"div",2),y(3,"img",3),d(),u(4,"h5"),p(5,"Reset Password"),d(),u(6,"form",4),E("ngSubmit",function(){return o.onSubmit()}),u(7,"div",5),y(8,"input",6),M(9,_k,3,2,"div",7),d(),u(10,"div",5),y(11,"input",8),M(12,wk,3,2,"div",7),d(),u(13,"button",9),p(14),d()()()()),r&2&&(g(6),_("formGroup",o.resetPassword),g(2),_("ngClass",rt(7,O0,o.resetPassword.get("password").invalid&&o.resetPassword.get("password").touched)),g(),_("ngIf",o.resetPassword.get("password").invalid&&o.resetPassword.get("password").touched),g(2),_("ngClass",rt(9,O0,o.resetPassword.get("confirmPassword").invalid&&o.resetPassword.get("confirmPassword").touched)),g(),_("ngIf",o.resetPassword.get("confirmPassword").invalid&&o.resetPassword.get("confirmPassword").touched),g(),_("disabled",o.isLoading),g(),P(" ",o.isLoading?"Submitting...":"Submit"," "))},dependencies:[oe,le,X,Y,ae,lt,Me,ke,U,ot,W]});let i=e;return i})();var A0=[{path:"",component:b0},{path:"auth",component:E0},{path:"forgotpassword",component:D0},{path:"passwordAuth",component:N0},{path:"resetPassword",component:R0},{path:"portal",component:m0,canActivate:[M0],children:[{path:"dashboard",component:v0},{path:"files",component:x0},{path:"activities",component:C0},{path:"users",component:w0},{path:"settings",component:S0},{path:"newuser",component:Ya}]},{path:"securitycheck",component:k0},{path:"viewer/:id",component:I0},{path:"**",component:T0}];var Sk=(()=>{let e=class e extends bs{constructor(t,r,o){super(t,r,o)}ngOnDestroy(){this.flush()}};e.\u0275fac=function(r){return new(r||e)(j(Ne),j(Fr),j(ys))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})();function Ek(){return new sh}function Mk(i,e,n){return new lh(i,e,n)}var P0=[{provide:ys,useFactory:Ek},{provide:bs,useClass:Sk},{provide:Vi,useFactory:Mk,deps:[$i,bs,Pe]}],ru=[{provide:Fr,useFactory:()=>new ah},{provide:kr,useValue:"BrowserAnimations"},...P0],kk=[{provide:Fr,useClass:oh},{provide:kr,useValue:"NoopAnimations"},...P0],F0=(()=>{let e=class e{static withConfig(t){return{ngModule:e,providers:t.disableAnimations?kk:ru}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Ge({type:e}),e.\u0275inj=He({providers:ru,imports:[Oh]});let i=e;return i})();function V0(){return Dr("NgEagerAnimations"),[...ru]}var Wo="Service workers are disabled or not supported by this browser";function Ik(i){return Oi(()=>Yn(new Error(i)))}var Sr=class{constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=Ik(Wo);else{let t=Zo(e,"controllerchange").pipe(G(()=>e.controller)),r=Oi(()=>F(e.controller)),o=Yo(r,t);this.worker=o.pipe(pt(h=>!!h)),this.registration=this.worker.pipe(Ae(()=>e.getRegistration()));let c=Zo(e,"message").pipe(G(h=>h.data)).pipe(pt(h=>h&&h.type)).pipe(pu());c.connect(),this.events=c}}postMessage(e,n){return this.worker.pipe(bt(1),De(t=>{t.postMessage(k({action:e},n))})).toPromise().then(()=>{})}postMessageWithOperation(e,n,t){let r=this.waitForOperationCompleted(t),o=this.postMessage(e,n);return Promise.all([o,r]).then(([,s])=>s)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let n;return typeof e=="string"?n=t=>t.type===e:n=t=>e.includes(t.type),this.events.pipe(pt(n))}nextEventOfType(e){return this.eventsOfType(e).pipe(bt(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(pt(n=>n.nonce===e),bt(1),G(n=>{if(n.result!==void 0)return n.result;throw new Error(n.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},Tk=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,this.pushManager=null,this.subscriptionChanges=new Be,!t.isEnabled){this.messages=Ri,this.notificationClicks=Ri,this.subscription=Ri;return}this.messages=this.sw.eventsOfType("PUSH").pipe(G(o=>o.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(G(o=>o.data)),this.pushManager=this.sw.registration.pipe(G(o=>o.pushManager));let r=this.pushManager.pipe(Ae(o=>o.getSubscription()));this.subscription=ll(r,this.subscriptionChanges)}requestSubscription(t){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(Wo));let r={userVisibleOnly:!0},o=this.decodeBase64(t.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),s=new Uint8Array(new ArrayBuffer(o.length));for(let a=0;a<o.length;a++)s[a]=o.charCodeAt(a);return r.applicationServerKey=s,this.pushManager.pipe(Ae(a=>a.subscribe(r)),bt(1)).toPromise().then(a=>(this.subscriptionChanges.next(a),a))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(Wo));let t=r=>{if(r===null)throw new Error("Not subscribed to push notifications.");return r.unsubscribe().then(o=>{if(!o)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(bt(1),Ae(t)).toPromise()}decodeBase64(t){return atob(t)}};e.\u0275fac=function(r){return new(r||e)(j(Sr))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),Dk=(()=>{let e=class e{get isEnabled(){return this.sw.isEnabled}constructor(t){if(this.sw=t,!t.isEnabled){this.versionUpdates=Ri,this.unrecoverable=Ri;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Wo));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:t},t)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(Wo));let t=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:t},t)}};e.\u0275fac=function(r){return new(r||e)(j(Sr))},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})();var L0=new Q("");function Nk(i,e,n,t){return()=>{if(!(bl(t)&&"serviceWorker"in navigator&&n.enabled!==!1))return;let r=i.get(Pe),o=i.get(dn);r.runOutsideAngular(()=>{let a=navigator.serviceWorker,l=()=>a.controller?.postMessage({action:"INITIALIZE"});a.addEventListener("controllerchange",l),o.onDestroy(()=>{a.removeEventListener("controllerchange",l)})});let s;if(typeof n.registrationStrategy=="function")s=n.registrationStrategy();else{let[a,...l]=(n.registrationStrategy||"registerWhenStable:30000").split(":");switch(a){case"registerImmediately":s=F(null);break;case"registerWithDelay":s=j0(+l[0]||0);break;case"registerWhenStable":let c=Te(i.get(dn).whenStable());s=l[0]?ll(c,j0(+l[0])):c;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${n.registrationStrategy}`)}}r.runOutsideAngular(()=>s.pipe(bt(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:n.scope}).catch(a=>console.error("Service worker registration failed with:",a))))}}function j0(i){return F(null).pipe(uu(i))}function Ok(i,e){return new Sr(bl(e)&&i.enabled!==!1?navigator.serviceWorker:void 0)}var Go=class{};function z0(i,e={}){return an([Tk,Dk,{provide:L0,useValue:i},{provide:Go,useValue:e},{provide:Sr,useFactory:Ok,deps:[Go,Ut]},{provide:Or,useFactory:Nk,deps:[In,L0,Go,Ut],multi:!0}])}var Rk="@",Ak=(()=>{let e=class e{constructor(t,r,o,s,a){this.doc=t,this.delegate=r,this.zone=o,this.animationType=s,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=R(Nu,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-TVIC23E2.js").then(r=>r)).catch(r=>{throw new ce(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:o})=>{this._engine=r(this.animationType,this.doc);let s=new o(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(t,r){let o=this.delegate.createRenderer(t,r);if(o.\u0275type===0)return o;typeof o.throwOnSyntheticProps=="boolean"&&(o.throwOnSyntheticProps=!1);let s=new ou(o);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(t,r);s.use(l),this.scheduler?.notify(9)}).catch(a=>{s.use(o)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){ns()},e.\u0275prov=L({token:e,factory:e.\u0275fac});let i=e;return i})(),ou=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let n of this.replay)n(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,n){this.delegate.appendChild(e,n)}insertBefore(e,n,t,r){this.delegate.insertBefore(e,n,t,r)}removeChild(e,n,t){this.delegate.removeChild(e,n,t)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,t,r){this.delegate.setAttribute(e,n,t,r)}removeAttribute(e,n,t){this.delegate.removeAttribute(e,n,t)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,t,r){this.delegate.setStyle(e,n,t,r)}removeStyle(e,n,t){this.delegate.removeStyle(e,n,t)}setProperty(e,n,t){this.shouldReplay(n)&&this.replay.push(r=>r.setProperty(e,n,t)),this.delegate.setProperty(e,n,t)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,t){return this.shouldReplay(n)&&this.replay.push(r=>r.listen(e,n,t)),this.delegate.listen(e,n,t)}shouldReplay(e){return this.replay!==null&&e.startsWith(Rk)}};function B0(i="animations"){return Dr("NgAsyncAnimations"),an([{provide:Vi,useFactory:(e,n,t)=>new Ak(e,n,t,i),deps:[Ne,$i,Pe]},{provide:kr,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var U0={providers:[Bu({eventCoalescing:!0}),Cp(A0),V0(),pl(Ch),pl(F0),z0("ngsw-worker.js",{enabled:!Uu(),registrationStrategy:"registerWhenStable:30000"}),B0()]};var q0=(()=>{let e=class e{constructor(){this.title="memoapp"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=A({type:e,selectors:[["app-root"]],standalone:!0,features:[V],decls:1,vars:0,template:function(r,o){r&1&&y(0,"router-outlet")},dependencies:[co]});let i=e;return i})();Dh(q0,U0).catch(i=>console.error(i));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/src/service-worker.js").then(i=>{console.log("Service Worker registered with scope:",i.scope)}).catch(i=>{console.log("Service Worker registration failed:",i)})});
